{"version":3,"file":"solarnetwork-api-core.js","sources":["../src/util/enum.js","../src/util/comparableEnum.js","../src/domain/aggregation.js","../src/domain/authTokenStatus.js","../src/domain/authTokenType.js","../src/domain/pagination.js","../src/domain/sortDescriptor.js","../src/util/propMap.js","../src/domain/location.js","../src/format/date.js","../src/domain/datumFilter.js","../src/domain/generalMetadata.js","../src/domain/instructionState.js","../src/domain/locationPrecision.js","../src/domain/securityPolicy.js","../src/domain/domain.js","../src/format/scale.js","../src/format/format.js","../src/util/multiMap.js","../src/util/configuration.js","../src/net/environment.js","../src/net/httpHeaders.js","../src/net/urlQuery.js","../src/net/authV2.js","../src/net/urlHelper.js","../src/net/locationUrlHelperMixin.js","../src/net/queryUrlHelperMixin.js","../src/net/locationDatumMetadataUrlHelperMixin.js","../src/net/locationDatumUrlHelperMixin.js","../src/net/nodeUrlHelperMixin.js","../src/net/nodeDatumMetadataUrlHelperMixin.js","../src/net/nodeDatumUrlHelperMixin.js","../src/net/userUrlHelperMixin.js","../src/net/nodeInstructionUrlHelperMixin.js","../src/net/nodeMetadataUrlHelperMixin.js","../src/net/userAuthTokenUrlHelperMixin.js","../src/net/net.js","../src/util/logger.js","../src/util/util.js"],"sourcesContent":["/**\n * An enumerated object base class.\n * \n * This class is essentially abstract, and must be extended by another\n * class that overrides the {@link module:util~Enum.enumValues} method.\n * \n * @abstract\n * @alias module:util~Enum\n */\nclass Enum {\n\n    /**\n     * Constructor.\n     * \n     * @param {string} name the name\n     */\n    constructor(name) {\n        this._name = name;\n        if ( this.constructor === Enum ) {\n            Object.freeze(this);\n        }\n    }\n\n    /**\n     * Get the enum name.\n     * \n     * @returns {string} the  name\n     */\n    get name() {\n        return this._name;\n    }\n\n    /**\n     * Test if a string is equal to this enum's name.\n     * \n     * As long as enum values are consistently obtained from the {@link module:util~Enum.enumValues}\n     * array then enum instances can be compared with `===`. If unsure, this method can be used\n     * to compare string values instead.\n     * \n     * @param {string} value the value to test\n     * @returns {boolean} `true` if `value` is the same as this instance's `name` value \n     */\n    equals(value) {\n        return (value === this.name);\n    }\n\n    /**\n     * Get all enum values.\n     * \n     * This method must be overridden by subclasses to return something meaningful.\n     * This implementation returns an empty array.\n     * \n     * @abstract\n     * @returns {module:util~Enum[]} get all enum values\n     */\n    static enumValues() {\n        return [];\n    }\n\n    /**\n     * This method takes an array of enums and turns them into a mapped object, using the enum\n     * `name` as object property names.\n     * \n     * @param {module:util~Enum[]} enums the enum list to turn into a value object\n     * @returns {object} an object with enum `name` properties with associated enum values \n     */\n    static enumsValue(enums) {\n        return Object.freeze(enums.reduce((obj, e) => {\n            obj[e.name] = e;\n            return obj;\n        }, {}));\n    }\n\n    /**\n     * Get an enum instance from its name.\n     * \n     * This method searches the {@link module:util~Enum#enumVvalues} array for a matching value.\n     * \n     * @param {string} name the enum name to get an instnace for\n     * @returns {module:util~Enum} the instance, or `undefined` if no instance exists for the given `name`\n     */\n    static valueOf(name) {\n        const enums = this.enumValues();\n        if ( !Array.isArray(enums) ) {\n            return undefined;\n        }\n        for ( let i = 0, len = enums.length; i < len; i += 1 ) {\n            if ( name === enums[i].name ) {\n                return enums[i];\n            }\n        }\n    }\n\n    static namesFor(set) {\n        const result = [];\n        if ( set ) {\n            for ( const e of set ) {\n                result.push(e.name);\n            }\n        }\n        return result;\n    }\n}\n\nexport default Enum;\n","import Enum from './enum';\n\n/**\n * An immutable enum-like object with an associated comparable value.\n *\n * This class is essentially abstract, and must be extended by another\n * class that overrides the inerited {@link module:util~Enum.enumValues} method.\n * \n * @abstract\n * @extends module:util~Enum\n * @alias module:util~ComparableEnum\n */\nclass ComparableEnum extends Enum {\n\n    /**\n     * Constructor.\n     * \n     * @param {string} name the name\n     * @param {number} value the comparable value\n     */\n    constructor(name, value) {\n        super(name);\n        this._value = value;\n        if ( this.constructor === ComparableEnum ) {\n            Object.freeze(this);\n        }\n    }\n\n    /**\n     * Get the comparable value.\n     * \n     * @returns {number} the value\n     */\n    get value() {\n        return this._value;\n    }\n\n    /**\n     * Compare two ComparableEnum objects based on their <code>value</code> values.\n     * \n     * @param {ComparableEnum} other the object to compare to\n     * @returns {number} <code>-1</code> if <code>this.value</code> is less than <code>other.value</code>, \n     *                   <code>1</code> if <code>this.value</code> is greater than <code>other.value</code>,\n     *                   <code>0</code> otherwise (when the values are equal) \n     */\n    compareTo(other) {\n        return this.value < other.value ? -1 : this.value > other.value ? 1 : 0;\n    }\n\n    /**\n     * Compute a complete set of enum values based on a minimum enum and/or set of enums.\n     * \n     * If <code>cache</code> is provided, then results computed via <code>minAggregation</code> \n     * will be cached there, and subsequent calls will returned the cached result when appropriate.\n     * \n     * @param {ComparableEnum} [minEnum] a minimum enum value\n     * @param {Map<string, Set<ComparableEnum>>} [cache] a cache of computed values\n     * @returns {Set<ComparableEnum>|null} the computed set, or <code>null</code> if no values match\n     */\n    static minimumEnumSet(minEnum, cache) {\n        if ( !minEnum ) {\n            return null;\n        }\n        let result = (cache ? cache.get(minEnum.name) : undefined);\n        if ( result ) {\n            return result;\n        }\n        result = new Set();\n        for ( const agg of minEnum.constructor.enumValues() ) {\n            if ( agg.compareTo(minEnum) > -1 ) {\n                result.add(agg);\n            }\n        }\n        if ( cache ) {\n            cache.set(minEnum.name, result);\n        }\n        return (result.size > 0 ? result : null);\n    }\n\n}\n\nexport default ComparableEnum;\n","import ComparableEnum from '../util/comparableEnum';\n\n/**\n * A named aggregation.\n * \n * @extends module:util~ComparableEnum\n * @alias module:domain~Aggregation\n */\nclass Aggregation extends ComparableEnum {\n\n\t/**\n     * Constructor.\n     * \n     * @param {string} name the unique name for this precision \n     * @param {number} level a relative aggregation level value \n     */\n    constructor(name, level) {\n\t\tsuper(name, level);\n\t\tif ( this.constructor === Aggregation ) {\n\t\t\tObject.freeze(this);\n\t\t}\n    }\n\n    /**\n     * Get the aggregate level value.\n\t * \n\t * This is an alias for {@link module:util~ComparableEnum#value}.\n     */\n    get level() {\n        return this.value;\n\t}\n\t\n\t/**\n\t * Get the {@link module:domain~Aggregations} values.\n\t * \n\t * @override\n\t * @inheritdoc\n\t */\n\tstatic enumValues() {\n\t\treturn AggregationValues;\n\t}\n\n}\n\n\nconst AggregationValues = Object.freeze([\n\tnew Aggregation('Minute', 60),\n\tnew Aggregation('FiveMinute', 60 * 5),\n\tnew Aggregation('TenMinute', 60 * 10),\n\tnew Aggregation('FifteenMinute', 60 * 15),\n\tnew Aggregation('ThirtyMinute', 60 * 30),\n\tnew Aggregation('Hour', 3600),\n\tnew Aggregation('HourOfDay', 3600),\n\tnew Aggregation('SeasonalHourOfDay', 3600),\n\tnew Aggregation('Day', 86400),\n\tnew Aggregation('DayOfWeek', 86400),\n\tnew Aggregation('SeasonalDayOfWeek', 86400),\n\tnew Aggregation('Week', 604800),\n\tnew Aggregation('WeekOfYear', 604800),\n\tnew Aggregation('Month', 2419200),\n\tnew Aggregation('RunningTotal', Number.MAX_SAFE_INTEGER),\n]);\n\n/**\n * The enumeration of supported Aggregation values.\n * \n * @readonly\n * @enum {module:domain~Aggregation}\n * @property {module:domain~Aggregation} Minute minute\n * @property {module:domain~Aggregation} FiveMinute 5 minutes\n * @property {module:domain~Aggregation} TenMinute 10 minutes\n * @property {module:domain~Aggregation} FifeteenMinute 15 minutes\n * @property {module:domain~Aggregation} ThirtyMinute 30 minutes\n * @property {module:domain~Aggregation} Hour an hour\n * @property {module:domain~Aggregation} HourOfDay an hour of a day, e.g. 1-24\n * @property {module:domain~Aggregation} SeasonalHourOfDay an hour of a day, further grouped into 4 seasons\n * @property {module:domain~Aggregation} Day a day\n * @property {module:domain~Aggregation} DayOfWeek a day of the week, e.g. Monday - Sunday\n * @property {module:domain~Aggregation} SeasonalDayOfWeek a day of the week, further grouped into 4 seasons\n * @property {module:domain~Aggregation} Week a week\n * @property {module:domain~Aggregation} WeekOfYear the week within a year, e.g. 1 - 52\n * @property {module:domain~Aggregation} Month a month\n * @property {module:domain~Aggregation} RunningTotal a complete running total over a time span\n * @alias module:domain~Aggregations\n */\nconst Aggregations = Aggregation.enumsValue(AggregationValues);\n\nexport default Aggregations;\nexport { Aggregation };","import Enum from '../util/enum';\n\n/**\n * An auth token status.\n * \n * @extends module:util~Enum\n * @alias module:domain~AuthTokenStatus\n */\nexport class AuthTokenStatus extends Enum {\n    /**\n     * Constructor.\n     * \n     * @param {string} name the name\n     */\n    constructor(name) {\n        super(name);\n        if ( this.constructor === AuthTokenStatus ) {\n            Object.freeze(this);\n        }\n    }\n\n    /**\n\t * Get the {@link module:domain~AuthTokenStatuses} values.\n\t * \n\t * @inheritdoc\n\t */\n\tstatic enumValues() {\n\t\treturn AuthTokenStatusValues;\n\t}\n\n}\n\nconst AuthTokenStatusValues = Object.freeze([\n\tnew AuthTokenStatus('Active'),\n    new AuthTokenStatus('Disabled'),\n]);\n\n/**\n * The enumeration of supported AuthTokenStatus values.\n * \n * @readonly\n * @enum {module:domain~AuthTokenStatus}\n * @property {module:domain~AuthTokenStatus} Active the token is active and usable\n * @property {module:domain~AuthTokenStatus} Disabled the token is disabled and not usable\n * @alias module:domain~AuthTokenStatuses\n */\nconst AuthTokenStatuses = AuthTokenStatus.enumsValue(AuthTokenStatusValues);\n\nexport default AuthTokenStatuses;\n","import Enum from '../util/enum';\n\n/**\n * A named auth token type.\n * \n * @extends module:util~Enum\n * @alias module:domain~AuthTokenType\n */\nexport class AuthTokenType extends Enum {\n    /**\n     * Constructor.\n     * \n     * @param {string} name the name\n     */\n    constructor(name) {\n        super(name);\n        if ( this.constructor === AuthTokenType ) {\n            Object.freeze(this);\n        }\n    }\n\n    /**\n\t * Get the {@link AuthTokenTypes} values.\n\t * \n\t * @inheritdoc\n\t */\n\tstatic enumValues() {\n\t\treturn AuthTokenTypeValues;\n\t}\n\n}\n\nconst AuthTokenTypeValues = Object.freeze([\n\tnew AuthTokenType('ReadNodeData'),\n    new AuthTokenType('User'),\n]);\n\n/**\n * The enumeration of supported AuthTokenType values.\n * \n * @readonly\n * @enum {module:domain~AuthTokenType}\n * @property {module:domain~AuthTokenType} ReadNodeData a read-only token for reading SolarNode data\n * @property {module:domain~AuthTokenType} User full access as the user that owns the token\n * @alias module:domain~AuthTokenTypes\n */\nconst AuthTokenTypes = AuthTokenType.enumsValue(AuthTokenTypeValues);\n\nexport default AuthTokenTypes;\n","/**\n * A pagination criteria object.\n * @alias module:domain~Pagination\n */\nclass Pagination {\n\n    /**\n     * Construct a pagination object.\n     * \n     * @param {number} max the maximum number of results to return \n     * @param {number} [offset] the 0-based starting offset \n     */\n    constructor(max, offset) {\n        this._max = (max > 0 ? +max : 0);\n        this._offset = (offset > 0 ? +offset : 0);\n    }\n\n    /**\n     * Get the maximum number of results to return.\n     * \n     * @returns {number} the maximum number of results\n     */\n    get max() {\n        return this._max;\n    }\n\n    /**\n     * Get the results starting offset.\n     * \n     * The first available result starts at offset <code>0</code>. Note this is \n     * a raw offset value, not a \"page\" offset.\n     * \n     * @returns {number} the starting result offset\n     */\n    get offset() {\n        return this._offset;\n    }\n\n    /**\n     * Copy constructor with a new <code>offset</code> value.\n     * \n     * @param {number} offset the new offset to use\n     * @return {Pagination} a new instance\n     */\n    withOffset(offset) {\n        return new Pagination(this.max, offset);\n    }\n\n    /**\n     * Get this object as a standard URI encoded (query parameters) string value.\n     * \n     * @return {string} the URI encoded string\n     */\n    toUriEncoding() {\n        let result = '';\n        if ( this.max > 0 ) {\n            result += 'max=' +this.max;\n        }\n        if ( this.offset > 0 ) {\n            if ( result.length > 0 ) {\n                result += '&';\n            }\n            result += 'offset=' +this.offset;\n        }\n        return result;\n    }\n}\n\nexport default Pagination;\n","/**\n * A description of a sort applied to a property of a collection.\n * @alias module:domain~SortDescriptor\n */\nclass SortDescriptor {\n\n    /**\n     * Constructor.\n     * \n     * @param {string} key the property to sort on\n     * @param {boolean} [descending] `true` to sort in descending order, `false` for ascending\n     */\n    constructor(key, descending) {\n        this._key = key;\n        this._descending = !!descending;\n    }\n\n    /**\n     * Get the sort property name.\n     * \n     * @returns {string} the sort key\n     */\n    get key() {\n        return this._key;\n    }\n\n    /**\n     * Get the sorting direction.\n     * \n     * @returns {boolean} `true` if descending order, `false` for ascending\n     */\n    get descending() {\n        return this._descending;\n    }\n\n    /**\n     * Get this object as a standard URI encoded (query parameters) string value.\n     * \n     * If `index` is provided and non-negative, then the query parameters will\n     * be encoded as an array property named `sorts`. Otherwise just\n     * bare `key` and `descending` properties will be used. The \n     * `descending` property is only added if it is `true`.\n     * \n     * @param {number} [index] an optional array property index\n     * @param {string} [propertyName=sorts] an optional array property name, only used if `index` is also provided\n     * @return {string} the URI encoded string\n     */\n    toUriEncoding(index, propertyName) {\n        let result,\n            propName = (propertyName || 'sorts');\n        if ( index !== undefined && index >= 0 ) {\n            result = encodeURIComponent(propName +'[' +index +'].key') + '=';\n        } else {\n            result = 'key=';\n        }\n        result += encodeURIComponent(this.key);\n        if ( this.descending ) {\n            if ( index !== undefined && index >= 0 ) {\n                result += '&' +encodeURIComponent(propName +'[' +index +'].descending') + '=true';\n            } else {\n                result += '&descending=true';\n            }\n        }\n        return result;\n    }\n\n}\n\nexport default SortDescriptor;\n","import Pagination from '../domain/pagination';\nimport SortDescriptor from '../domain/sortDescriptor';\nimport Enum from './enum';\n\n/**\n * A basic map-like object.\n * \n * <p>This object includes some utility functions that make it well suited to using\n * as an API query object. For example, the {@link module:util~PropMap#toUriEncoding}\n * method provides a way to serialize this object into URL query parameters.</p>\n * \n * @alias module:util~PropMap\n */\nclass PropMap {\n    /**\n     * Constructor.\n     * @param {PropMap|object} props the initial properties; if a `PropMap` instance is provided, the properties\n     *                               of that object will be copied into this one; otherwise the object will be\n     *                               used directly to hold property values\n     */\n    constructor(props) {\n        /**\n         * The object that all properties are stored on. \n         * @member {object} \n         */\n        this.props = (props instanceof PropMap ? props.properties() : \n            typeof props === 'object' ? props : {});\n    }\n\n    /**\n\t * Get, set, or remove a property value.\n\t *\n\t * @param {string} key the key to get or set the value for\n\t * @param {*} [newValue] if defined, the new value to set for the given `key`;\n\t *                       if `null` then the `key` property will be removed\n\t * @returns {*} if called as a getter, the associated value for the given `key`,\n\t *              otherwise this object\n\t */\n\tprop(key, newValue) {\n\t\tif ( arguments.length === 1 ) {\n\t\t\treturn this.props[key];\n\t\t}\n\t\tif ( newValue === null ) {\n\t\t\tdelete this.props[key];\n\t\t} else {\n\t\t\tthis.props[key] = newValue;\n\t\t}\n\t\treturn this;\n\t}\n\n    /**\n\t * Get, set, or remove multiple properties.\n\t * \n\t * @param {object} [newProps] the new values to set; if any value is `null` that property\n     *                            will be deleted\n\t * @returns {object} if called as a getter, all properties of this object copied into a \n     *                   simple object; otherwise this object\n\t */\n\tproperties(newProps) {\n\t\tif ( newProps ) {\n\t\t\tfor ( const k of Object.keys(newProps) ) {\n\t\t\t\tthis.prop(k, newProps[k]);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\treturn Object.assign({}, this.props);\n\t}\n\n    /**\n     * Get this object as a standard URI encoded (query parameters) string value.\n     * \n     * All enumerable properties of the <code>props</code> property will be added to the\n     * result. If any property value is an array, the values of the array will be joined\n     * by a comma. Any {@link module:util~Enum} values will have their `name` property used.\n     * Any value that has a `toUriEncoding()` function property will have that function\n     * invoked, passing the associated property name as the first argument, and the returned\n     * value will be used.\n     * \n     * @param {string} [propertyName] an optional object property prefix to add to all properties\n     * @param {function} [callbackFn] An optional function that will be called for each property.\n     *                   The function will be passed property name and value arguments, and must\n     *                   return either `null` to skip the property, a 2-element array with the property\n     *                   name and value to use, or anything else to use the property as- is.\n     * @return {string} the URI encoded string\n     */\n    toUriEncoding(propertyName, callbackFn) {\n        let result = '';\n        for ( let k of Object.keys(this.props) ) {\n            if ( result.length > 0 ) {\n                result += '&';\n            }\n            let v = this.props[k];\n            if ( callbackFn ) {\n                const kv = callbackFn(k, v);\n                if ( kv === null ) {\n                    continue;\n                } else if ( Array.isArray(kv) && kv.length > 1 ) {\n                    k = kv[0];\n                    v = kv[1];\n                }\n            }\n            \n            if ( typeof v.toUriEncoding === 'function' ) {\n                result += v.toUriEncoding(propertyName ? encodeURIComponent(propertyName) + '.' + k : k);\n                continue;\n            }\n            \n            if ( propertyName ) {\n                result += encodeURIComponent(propertyName) + '.';\n            }\n            result += encodeURIComponent(k) + '=';\n            if ( Array.isArray(v) ) {\n                v.forEach((e, i) => {\n                    if ( i > 0 ) {\n                        result += ',';\n                    }\n                    if ( e instanceof Enum ) {\n                        e = e.name;\n                    }\n                    result += encodeURIComponent(e);\n                });\n            } else {\n                if ( v instanceof Enum ) {\n                    v = v.name;\n                }\n                result += encodeURIComponent(v);\n            }\n        }\n        return result;\n    }\n\n\n    /**\n     * Get this object as a standard URI encoded (query parameters) string value with\n     * sorting and pagination parameters.\n     * \n     * <p>This calls {@link module:util~PropMap#toUriEncoding} first, then encodes \n     * the `sorts` and `pagination` parameters, if provided.\n     * \n\t * @param {module:domain~SortDescriptor[]} [sorts] optional sort settings to use\n\t * @param {module:domain~Pagination} [pagination] optional pagination settings to use\n     * @param {string} [propertyName] an optional object property prefix to add to all properties\n     * @param {function} [callbackFn] An optional function that will be called for each property.\n     *                   The function will be passed property name and value arguments, and must\n     *                   return either `null` to skip the property, a 2-element array with the property\n     *                   name and value to use, or anything else to use the property as- is.\n     * @return {string} the URI encoded string\n     */\n    toUriEncodingWithSorting(sorts, pagination, propertyName, callbackFn) {\n        let params = this.toUriEncoding(propertyName, callbackFn);\n        if ( Array.isArray(sorts) ) {\n            sorts.forEach((sort, i) => {\n                if ( sort instanceof SortDescriptor ) {\n                    if ( params.length > 0 ) {\n                        params += '&';\n                    }\n                    params += sort.toUriEncoding(i);\n                }\n            });\n        }\n        if ( pagination instanceof Pagination ) {\n            const paginationParams = pagination.toUriEncoding();\n            if ( paginationParams ) {\n                if ( params.length > 0 ) {\n                    params += '&';\n                }\n                params += paginationParams;\n            }\n        }\n        return params;\n    }\n\n}\n\nexport default PropMap;\n","import PropMap from '../util/propMap';\n\nconst CountryKey = 'country';\nconst ElevationKey = 'elevation';\nconst LatitudeKey = 'latitude';\nconst IdKey = 'id';\nconst LocalityKey = 'locality';\nconst LongitudeKey = 'longitude';\nconst NameKey = 'name';\nconst PostalCodeKey = 'postalCode';\nconst RegionKey = 'region';\nconst StateOrProvinceKey = 'stateOrProvince';\nconst StreetKey = 'street';\nconst TimeZoneIdKey = 'timeZoneId';\n\n/**\n * A geographic location.\n * \n * @extends module:util~PropMap\n * @alias module:domain~Location\n */\nclass Location extends PropMap {\n\n    /**\n\t * Constructor.\n\t * \n\t * @param {module:domain~Location|object} loc the location to copy properties from\n\t */\n\tconstructor(loc) {\n        super(loc);\n   }\n    \n    /**\n     * A SolarNetwork assigned unique identifier.\n     * @type {number}\n     */\n    get id() {\n        return this.prop(IdKey);\n    }\n\n    set id(val) {\n        this.prop(IdKey, val);\n    }\n\n    /**\n     * A generalized name, can be used for \"virtual\" locations.\n     * @type {string}\n     */\n    get name() {\n        return this.prop(NameKey);\n    }\n\n    set name(val) {\n        this.prop(NameKey, val);\n    }\n\n    /**\n     * An ISO 3166-1 alpha-2 character country code.\n     * @type {string}\n     */\n    get country() {\n        return this.prop(CountryKey);\n    }\n\n    set country(val) {\n        this.prop(CountryKey, val);\n    }\n\n    /**\n     * A country-specific regional identifier.\n     * @type {string}\n     */\n    get region() {\n        return this.prop(RegionKey);\n    }\n\n    set region(val) {\n        this.prop(RegionKey, val);\n    }\n\n    /**\n     * A country-specific state or province identifier.\n     * @type {string}\n     */\n    get stateOrProvince() {\n        return this.prop(StateOrProvinceKey);\n    }\n\n    set stateOrProvince(val) {\n        this.prop(StateOrProvinceKey, val);\n    }\n\n    /**\n     * Get the locality (city, town).\n     * @type {string}\n     */\n    get locality() {\n        return this.prop(LocalityKey);\n    }\n\n    set locality(val) {\n        this.prop(LocalityKey, val);\n    }\n\n    /**\n     * A country-specific postal code.\n     * @type {string}\n     */\n    get postalCode() {\n        return this.prop(PostalCodeKey);\n    }\n\n    set postalCode(val) {\n        this.prop(PostalCodeKey, val);\n    }\n\n    /**\n     * The street address.\n     * @type {string}\n     */\n    get street() {\n        return this.prop(StreetKey);\n    }\n\n    set street(val) {\n        this.prop(StreetKey, val);\n    }\n\n    /**\n     * The decimal world latitude.\n     * @type {number}\n     */\n    get latitude() {\n        return this.prop(LatitudeKey);\n    }\n\n    set latitude(val) {\n        this.prop(LatitudeKey, val);\n    }\n\n    /**\n     * The decimal world longitude.\n     * @type {number}\n     */\n    get longitude() {\n        return this.prop(LongitudeKey);\n    }\n\n    set longitude(val) {\n        this.prop(LongitudeKey, val);\n    }\n\n    /**\n     * The elevation above sea level, in meters.\n     * @type {number}\n     */\n    get elevation() {\n        return this.prop(ElevationKey);\n    }\n\n    set elevation(val) {\n        this.prop(ElevationKey, val);\n    }\n\n    /**\n     * A time zone ID, for example `Pacific/Auckland`.\n     * @type {string}\n     */\n    get timeZoneId() {\n        return this.prop(TimeZoneIdKey)\n    }\n\n    set timeZoneId(val) {\n        this.prop(TimeZoneIdKey, val);\n    }\n\n}\n\nexport default Location;\n","import { utcFormat, utcParse, isoParse } from 'd3-time-format';\n\n/**\n * Format a date into a SolarNet UTC timestamp format.\n * @function\n * @param {Date} date the date to format\n * @returns {string} the formatted date value - `yyyy-MM-dd HH:mm:ss.SSS'Z'`\n * @alias module:format~timestampFormat\n */\nexport const timestampFormat = utcFormat(\"%Y-%m-%d %H:%M:%S.%LZ\");\n\n/**\n * Format a date into a SolarNet UTC date/time format.\n * @function\n * @param {Date} date the date to format\n * @returns {string} the formatted date value - `yyyy-MM-dd HH:mm`\n * @alias module:format~dateTimeFormat\n */\nexport const dateTimeFormat = utcFormat(\"%Y-%m-%d %H:%M\");\n\n/**\n * Format a date into a SolarNet URL UTC date/time format.\n * @function\n * @param {Date} date the date to format\n * @returns {string} the formatted date value - `yyyy-MM-dd'T'HH:mm`\n * @alias module:format~dateTimeUrlFormat\n */\nexport const dateTimeUrlFormat = utcFormat(\"%Y-%m-%dT%H:%M\");\n\n/**\n * Format a date into a SolarNet UTC date format.\n * @function\n * @param {Date} date the date to format\n * @returns {string} the formatted date value - `yyyy-MM-dd`\n * @alias module:format~dateFormat\n */\nexport const dateFormat = utcFormat(\"%Y-%m-%d\");\n\n/**\n * Parse a SolarNet UTC timestamp value.\n * @function\n * @param {string} str the string to parse - `yyyy-MM-dd HH:mm:ss.SSS'Z'\n * @returns {Date} the parsed date, or `null`\n * @alias module:format~timestampParse\n */\nexport const timestampParse = utcParse(\"%Y-%m-%d %H:%M:%S.%LZ\");\n\n/**\n * Parse a SolarNet UTC date/time.\n * @function\n * @param {string} str the string to parse - `yyyy-MM-dd HH:mm\n * @returns {Date} the parsed date, or `null`\n * @alias module:format~dateTimeParse\n */\nexport const dateTimeParse = utcParse(\"%Y-%m-%d %H:%M\");\n\nexport { \n\t/**\n\t * Parse a SolarNet URL UTC date/time value.\n\t * @function\n\t * @param {string} str the string to parse - `yyyy-MM-dd'T'HH:mm`\n\t * @returns {Date} the parsed date, or `null`\n\t * @alias module:format~dateTimeUrlParse\n\t */\n\tisoParse as dateTimeUrlParse, \n\t\n\t/**\n\t * Parse a SolarNet UTC date value.\n\t * @function\n\t * @param {string} str the string to parse - `yyyy-MM-dd`\n\t * @returns {Date} the parsed date, or `null`\n\t * @alias module:format~dateParse\n\t */\n\tisoParse as dateParse } from 'd3-time-format';\n\n/**\n * Parse a UTC date string, from a variety of supported formats.\n *\n * @param {String} str the string to parse into a date\n * @returns {Date} the parsed `Date`, or `null` if the date can't be parsed\n * @alias module:format~dateParser\n */\nexport function dateParser(str) {\n\tvar date = isoParse(str)\n\t\t|| timestampParse(str)\n\t\t|| dateTimeParse(str);\n\treturn date;\n}\n\n/**\n * Format a date into an ISO 8601 timestamp or date string, in the UTC time zone.\n * \n * @param {Date} date the date to format \n * @param {boolean} [includeTime=false] `true` to format as a timestamp, `false` as just a date\n * @returns {string} the formatted date string\n * @alias module:format~iso8601Date\n */\nexport function iso8601Date(date, includeTime) {\n\treturn ''+date.getUTCFullYear()\n\t\t\t+(date.getUTCMonth() < 9 ? '0' : '') +(date.getUTCMonth()+1)\n\t\t\t+(date.getUTCDate() < 10 ? '0' : '') + date.getUTCDate()\n\t\t\t+(includeTime ?\n\t\t\t\t'T'\n\t\t\t\t+(date.getUTCHours() < 10 ? '0' : '') + date.getUTCHours()\n\t\t\t\t+(date.getUTCMinutes() < 10 ? '0' : '') + date.getUTCMinutes()\n\t\t\t\t+(date.getUTCSeconds() < 10 ? '0' : '') +date.getUTCSeconds()\n\t\t\t\t+'Z'\n\t\t\t\t: '');\n}\n","import { Aggregation } from './aggregation';\nimport Location from './location';\nimport PropMap from '../util/propMap';\n\nimport { dateTimeUrlFormat } from '../format/date'\n\nconst AggregationKey = 'aggregation';\nconst DataPathKey = 'dataPath';\nconst EndDateKey = 'endDate';\nconst LocationIdsKey = 'locationIds';\nconst LocationKey = 'location';\nconst MetadataFilterKey = 'metadataFilter';\nconst MostRecentKey = 'mostRecent';\nconst NodeIdsKey = 'nodeIds';\nconst QueryKey = 'query';\nconst SourceIdsKey = 'sourceIds';\nconst StartDateKey =  'startDate';\nconst TagsKey = 'tags';\nconst UserIdsKey = 'userIds';\n\n/**\n * A filter criteria object for datum.\n * \n * <p>This filter is used to query both node datum and location datum. Not all properties are\n * applicable to both types. Be sure to consult the SolarNet API documentation on the \n * supported properties for each type.</p>\n * \n * @extends module:util~PropMap\n * @alias module:domain~DatumFilter\n */\nclass DatumFilter extends PropMap {\n\n    /**\n     * Constructor.\n     * @param {object} [props] initial property values \n     */\n    constructor(props) {\n        super(props);\n    }\n\n    /**\n     * A node ID.\n     * \n     * This manages the first available node ID from the `nodeIds` property.\n     * \n     * @type {number}\n     */\n    get nodeId() {\n        const nodeIds = this.nodeIds;\n        return (Array.isArray(nodeIds) && nodeIds.length > 0 ? nodeIds[0] : null);\n    }\n\n    set nodeId(nodeId) {\n        if ( nodeId ) {\n            this.nodeIds = [nodeId];\n        } else {\n            this.nodeIds = null;\n        }\n    }\n\n    /**\n     * An array of node IDs.\n     * @type {number[]}\n     */\n    get nodeIds() {\n        return this.prop(NodeIdsKey);\n    }\n\n    set nodeIds(nodeIds) {\n        this.prop(NodeIdsKey, Array.isArray(nodeIds) ? nodeIds : null);\n    }\n\n    /**\n     * A location ID.\n     * \n     * This manages the first available location ID from the `locationIds` property.\n     * \n     * @type {number}\n     */\n    get locationId() {\n        const locationIds = this.locationIds;\n        return (Array.isArray(locationIds) && locationIds.length > 0 ? locationIds[0] : null);\n    }\n\n    set locationId(locationId) {\n        if ( locationId ) {\n            this.locationIds = [locationId];\n        } else {\n            this.locationIds = null;\n        }\n    }\n\n    /**\n     * An array of location IDs.\n     * @type {number[]}\n     */\n    get locationIds() {\n        return this.prop(LocationIdsKey);\n    }\n\n    set locationIds(locationIds) {\n        this.prop(LocationIdsKey, Array.isArray(locationIds) ? locationIds : null);\n    }\n\n    /**\n     * A source ID.\n     * \n     * This manages the first available source ID from the `sourceIds` property.\n     * \n     * @type {string}\n     */\n    get sourceId() {\n        const sourceIds = this.sourceIds;\n        return (Array.isArray(sourceIds) && sourceIds.length > 0 ? sourceIds[0] : null);\n    }\n\n    set sourceId(sourceId) {\n        if ( sourceId ) {\n            this.sourceIds = [sourceId];\n        } else {\n            this.sourceIds = null;\n        }\n    }\n\n    /**\n     * An array of source IDs.\n     * @type {string[]}\n     */\n    get sourceIds() {\n        return this.prop(SourceIdsKey);\n    }\n\n    set sourceIds(sourceIds) {\n        this.prop(SourceIdsKey, Array.isArray(sourceIds) ? sourceIds : null);\n    }\n\n    /**\n     * A user ID.\n     * \n     * This manages the first available location ID from the `userIds` property.\n     * \n     * @type {number}\n     */\n    get userId() {\n        const userIds = this.userIds;\n        return (Array.isArray(userIds) && userIds.length > 0 ? userIds[0] : null);\n    }\n\n    set userId(userId) {\n        if ( userId ) {\n            this.userIds = [userId];\n        } else {\n            this.userIds = null;\n        }\n    }\n\n    /**\n     * An array of user IDs.\n     * @type {number[]}\n     */\n    get userIds() {\n        return this.prop(UserIdsKey);\n    }\n\n    set userIds(userIds) {\n        this.prop(UserIdsKey, Array.isArray(userIds) ? userIds : null);\n    }\n\n    /**\n     * The \"most recent\" flag.\n     * @type {boolean}\n     */\n    get mostRecent() {\n        return !!this.prop(MostRecentKey);\n    }\n\n    set mostRecent(value) {\n        this.prop(MostRecentKey, !!value);\n    }\n\n    /**\n     * A minimumin date.\n     * @type {Date}\n     */\n    get startDate() {\n        return this.prop(StartDateKey);\n    }\n\n    set startDate(date) {\n        this.prop(StartDateKey, date);\n    }\n\n    /**\n     * A maximum date.\n     * @type {Date}\n     */\n    get endDate() {\n        return this.prop(EndDateKey);\n    }\n\n    set endDate(date) {\n        this.prop(EndDateKey, date);\n    }\n\n    /**\n     * A data path, in dot-delimited notation like `i.watts`.\n     * @type {string}\n     */\n    get dataPath() {\n        return this.prop(DataPathKey);\n    }\n\n    set dataPath(path) {\n        this.prop(DataPathKey, path);\n    }\n\n    /**\n     * An aggregation.\n     * \n     * Including this in a filter will cause SolarNet to return aggregated results, rather\n     * than raw results.\n     * \n     * @type {module:domain~Aggregation}\n     */\n    get aggregation() {\n        return this.prop(AggregationKey);\n    }\n\n    set aggregation(agg) {\n        this.prop(AggregationKey, agg instanceof Aggregation ? agg : null);\n    }\n\n    /**\n     * An array of tags.\n     * @type {string[]}\n     */\n    get tags() {\n        return this.prop(TagsKey);\n    }\n\n    set tags(val) {\n        this.prop(TagsKey, Array.isArray(val) ? val : null);\n    }\n\n    /**\n     * A location, used as an example-based search criteria.\n     * @type {module:domain~Location}\n     */\n    get location() {\n        return this.prop(LocationKey);\n    }\n\n    set location(val) {\n        this.prop(LocationKey, val instanceof Location ? val : null);\n    }\n\n    /**\n     * A general full-text style query string.\n     * @type {string}\n     */\n    get query() {\n        return this.prop(QueryKey);\n    }\n\n    set query(val) {\n        this.prop(QueryKey, val);\n    }\n\n    /**\n     * A metadata filter (LDAP style search criteria).\n     * @type {string}\n     */\n    get metadataFilter() {\n        return this.prop(MetadataFilterKey);\n    }\n\n    set metadataFilter(val) {\n        this.prop(MetadataFilterKey, val);\n    }\n\n    /**\n     * Get this object as a standard URI encoded (query parameters) string value.\n     * \n     * @override\n     * @inheritdoc\n     */\n    toUriEncoding(propertyName, callbackFn) {\n        return super.toUriEncoding(propertyName, callbackFn || datumFilterUriEncodingPropertyMapper);\n    }\n\n}\n\n/**\n * Map DatumFilter properties for URI encoding.\n * \n * @param {string} key the property key\n * @param {*} value the property value\n * @returns {*} 2-element array for mapped key+value, `null` to skip, or `key` to keep as-is\n * @private\n */\nfunction datumFilterUriEncodingPropertyMapper(key, value) {\n    if ( key === NodeIdsKey || key === LocationIdsKey || key === SourceIdsKey || key === UserIdsKey ) {\n        // check for singleton array value, and re-map to singular property by chopping of \"s\"\n        if  ( Array.isArray(value) && value.length === 1 ) {\n            return [key.substring(0, key.length - 1), value[0]];\n        }\n    } else if ( key === StartDateKey || key === EndDateKey ) {\n        return [key, dateTimeUrlFormat(value)];\n    } else if ( key === MostRecentKey && !value ) {\n        return null;\n    }\n    return key;\n}\n\nexport default DatumFilter;\n","/**\n * General metadata with a basic structure.\n * \n * This metadata can be associated with a variety of objects within SolarNetwork, such\n * as users, nodes, and datum.\n * \n * @alias module:domain~GeneralMetadata\n */\nclass GeneralMetadata {\n\n    /**\n     * Constructor.\n     * \n     * @param {Map<string, *>} [info] the general metadata map\n     * @param {Map<string, Map<string, *>>} [propertyInfo] the property metadata map\n     * @param {Set<string>} [tags] the tags\n     */\n    constructor(info, propertyInfo, tags) {\n        this.info = info || null;\n        this.propertyInfo = propertyInfo || null;\n        this.tags = (tags instanceof Set ? tags : Array.isArray(tags) ? new Set(tags) : null);\n    }\n\n    /**\n     * Get this object as a standard JSON encoded string value.\n     * \n     * @return {string} the JSON encoded string\n     */\n    toJsonEncoding() {\n        const result = {};\n        const info = this.info;\n        if ( info ) {\n            result['m'] = stringMapToObject(info);\n        }\n        const propertyInfo = this.propertyInfo;\n        if ( propertyInfo ) {\n            result['pm'] = stringMapToObject(propertyInfo);\n        }\n        const tags = this.tags;\n        if ( tags ) {\n            result['t'] = Array.from(tags);\n        }\n\n\t\treturn JSON.stringify(result);\n    }\n\n    /**\n     * Parse a JSON string into a {@link module:domain~GeneralMetadata} instance.\n     * \n     * The JSON must be encoded the same way {@link module:domain~GeneralMetadata#toJsonEncoding} does.\n     * \n     * @param {string} json the JSON to parse\n     * @returns {module:domain~GeneralMetadata} the metadata instance \n     */\n    static fromJsonEncoding(json) {\n        let m, pm, t;\n        if ( json ) {\n            const obj = JSON.parse(json);\n            m = (obj['m'] ? objectToStringMap(obj['m']) : null);\n            pm = (obj['pm'] ? objectToStringMap(obj['pm']) : null);\n            t = (Array.isArray(obj['t']) ? new Set(obj['t']) : null);\n        }\n        return new GeneralMetadata(m, pm, t);\n    }\n}\n\n/**\n * Convert a `Map` into a simple object.\n * \n * The keys are assumed to be strings. Values that are themselves `Map` instances\n * will be converted to simple objects as well.\n * \n * @param {Map<string, *>} strMap a Map with string keys; nested Map objects are also handled\n * @returns {object} a simple object\n * @see {@link objectToStringMap} for the reverse conversion\n * @alias module:domain~stringMapToObject\n */\nfunction stringMapToObject(strMap) {\n    const obj = Object.create(null);\n    if ( strMap ) {\n        for (const [k,v] of strMap) {\n            obj[k] = (v instanceof Map ? stringMapToObject(v) : v);\n        }\n    }\n    return obj;\n}\n\n/**\n * Convert a simple object into a `Map` instance.\n * \n * Property values that are themselves objects will be converted into `Map`\n * instances as well.\n * \n * @param {object} obj a simple object\n * @returns {Map<string, *>} a Map with string keys; nested Map objects are also handled\n * @see {@link module:domain~stringMapToObject} for the reverse conversion\n * @alias module:domain~objectToStringMap\n */\nfunction objectToStringMap(obj) {\n    const strMap = new Map();\n    if ( obj ) {\n        for (const k of Object.keys(obj)) {\n            const v = obj[k];\n            strMap.set(k, (typeof v === 'object' ? objectToStringMap(v) : v));\n        }\n    }\n    return strMap;\n}\n\nexport default GeneralMetadata;\nexport { stringMapToObject, objectToStringMap };\n","import Enum from '../util/enum';\n\n/**\n * A named instruction state.\n * \n * @extends module:util~Enum\n * @alias module:domain~InstructionState\n */\nclass InstructionState extends Enum {\n\n    /**\n     * Constructor.\n     * \n     * @param {string} name the name\n     */\n    constructor(name) {\n        super(name);\n        if ( this.constructor === InstructionState ) {\n            Object.freeze(this);\n        }\n    }\n\n    /**\n\t * Get the {@link module:domain~InstructionStates} values.\n\t * \n\t * @inheritdoc\n\t */\n\tstatic enumValues() {\n\t\treturn InstructionStateValues;\n\t}\n\n}\n\nconst InstructionStateValues = Object.freeze([\n\tnew InstructionState('Unknown'),\n\tnew InstructionState('Queued'),\n    new InstructionState('Received'),\n    new InstructionState('Executing'),\n    new InstructionState('Declined'),\n    new InstructionState('Completed'),\n]);\n\n/**\n * The enumeration of supported InstructionState values.\n * \n * @readonly\n * @enum {module:domain~InstructionState}\n * @property {module:domain~InstructionState} Unknown an unknown state\n * @property {module:domain~InstructionState} Queued the instruction has been received by SolarNet but not yet delivered to its destination\n * @property {module:domain~InstructionState} Received the instruction has been delivered to its destination but not yet acted upon\n * @property {module:domain~InstructionState} Executed the instruction is currently being acted upon\n * @property {module:domain~InstructionState} Declined the destination has declined to execute the instruction, or the execution failed\n * @property {module:domain~InstructionState} Completed the destination has executed successfully\n * @alias module:domain~InstructionStates\n */\nconst InstructionStates = InstructionState.enumsValue(InstructionStateValues);\n\nexport default InstructionStates;\nexport { InstructionState };","import ComparableEnum from '../util/comparableEnum';\n\n/**\n * A location precision object for use with defining named geographic precision.\n * \n * @extends module:util~ComparableEnum\n * @alias module:domain~LocationPrecision\n */\nclass LocationPrecision extends ComparableEnum {\n\n    /**\n     * Constructor.\n     * \n     * @param {string} name the unique name for this precision \n     * @param {number} precision a relative precision value for this precision \n     */\n    constructor(name, precision) {\n        super(name, precision);\n        if ( this.constructor === LocationPrecision ) {\n            Object.freeze(this);\n        }\n    }\n\n    /**\n     * Get the relative precision value.\n     * \n     * This is an alias for {@link #name}.\n     * \n     * @returns {number} the precision\n     */\n    get precision() {\n        return this.value;\n    }\n\n\t/**\n\t * Get the {@link module:domain~LocationPrecisions} values.\n\t * \n     * @override\n\t * @inheritdoc\n\t */\n\tstatic enumValues() {\n\t\treturn LocationPrecisionValues;\n\t}\n}\n\nconst LocationPrecisionValues = Object.freeze([\n    new LocationPrecision('LatLong', 1),\n    new LocationPrecision('Block', 5),\n    new LocationPrecision('Street', 10),\n    new LocationPrecision('PostalCode', 20),\n    new LocationPrecision('Locality', 30),\n    new LocationPrecision('StateOrProvince', 40),\n    new LocationPrecision('Region', 50),\n    new LocationPrecision('TimeZone', 60),\n    new LocationPrecision('Country', 70),\n]);\n\n/**\n * The enumeration of supported LocationPrecision values.\n * \n * @readonly\n * @enum {module:domain~LocationPrecision}\n * @property {module:domain~LocationPrecision} LatLong GPS coordinates\n * @property {module:domain~LocationPrecision} Block a city block\n * @property {module:domain~LocationPrecision} Street a street\n * @property {module:domain~LocationPrecision} PostalCode a postal code (or \"zip code\")\n * @property {module:domain~LocationPrecision} Locality a town or city\n * @property {module:domain~LocationPrecision} StateOrProvince a state or province\n * @property {module:domain~LocationPrecision} Region a large region\n * @property {module:domain~LocationPrecision} TimeZone a time zone\n * @property {module:domain~LocationPrecision} Country a country\n * @alias module:domain~LocationPrecisions\n */\nconst LocationPrecisions = LocationPrecision.enumsValue(LocationPrecisionValues);\n\nexport default LocationPrecisions;\nexport { LocationPrecision };","import { Aggregation } from './aggregation';\nimport { LocationPrecision } from './locationPrecision';\n\n/**\n * Get a Set from a Set or array or object, returning `null` if the set would be empty.\n * \n * @param {Object[]|Set<*>} obj the array, Set, or singleton object to get as a Set\n * @returns {Set<*>} the Set, or `null`\n * @private\n */\nfunction setOrNull(obj) {\n\tlet result = null;\n\tif ( obj instanceof Set ) {\n\t\tresult = (obj.size > 0 ? obj : null);\n\t} else if ( Array.isArray(obj) ) {\n\t\tresult = (obj.length > 0 ? new Set(obj) : null);\n\t} else if ( obj ) {\n\t\tresult = new Set([obj]);\n\t}\n\treturn result;\n}\n\n/**\n * Merge two sets.\n * \n * @param {Object[]|Set<*>} [set1] the first set \n * @param {Object[]|Set<*>} [set2] the second set \n * @returns {Set<*>} the merged Set, or `null` if neither arguments are sets or \n *                   neither argument have any values\n * @private\n */\nfunction mergedSets(set1, set2) {\n\tlet s1 = setOrNull(set1);\n\tlet s2 = setOrNull(set2);\n\tif ( s1 === null && s2 === null ) {\n\t\treturn null;\n\t} else if ( s2 === null ) {\n\t\treturn s1;\n\t} else if ( s1 === null ) {\n\t\treturn s2;\n\t} else {\n\t\tfor ( let v of s2.values() ) {\n\t\t\ts1.add(v);\n\t\t}\n\t\treturn s1;\n\t}\n}\n\n\n/**\n * An immutable set of security restrictions that can be attached to other objects, like auth tokens.\n * \n * Use the {@link module:domain~SecurityPolicyBuilder} to create instances of this class with a fluent API.\n * @alias module:domain~SecurityPolicy\n */\nclass SecurityPolicy {\n\n\t/**\n\t * Constructor.\n\t * \n\t * @param {number[]|Set<number>} [nodeIds] the node IDs to restrict to, or `null` for no restriction\n\t * @param {string[]|Set<string>} [sourceIds] the source ID to restrict to, or `null` for no restriction\n\t * @param {module:domain~Aggregation[]|Set<module:domain~Aggregation>} [aggregations] the aggregation names to restrict to, or `null` for no restriction\n\t * @param {module:domain~Aggregation} [minAggregation] if specified, a minimum aggregation level that is allowed\n\t * @param {Set<module:domain~LocationPrecision>} [locationPrecisions] the location precision names to restrict to, or `null` for no restriction\n\t * @param {module:domain~LocationPrecision} [minLocationPrecision] if specified, a minimum location precision that is allowed\n\t * @param {Set<string>} [nodeMetadataPaths] the `SolarNodeMetadata` paths to restrict to, or `null` for no restriction\n\t * @param {Set<string>} [userMetadataPaths] the `UserNodeMetadata` paths to restrict to, or `null` for no restriction\n\t */\n    constructor(nodeIds, sourceIds, aggregations, minAggregation, locationPrecisions,\n\t\t\tminLocationPrecision, nodeMetadataPaths, userMetadataPaths) {\n\t\tthis._nodeIds = setOrNull(nodeIds);\n\t\tthis._sourceIds = setOrNull(sourceIds);\n\t\tthis._aggregations = setOrNull(aggregations);\n\t\tthis._minAggregation = (minAggregation instanceof Aggregation ? minAggregation : null);\n\t\tthis._locationPrecisions = setOrNull(locationPrecisions);\n\t\tthis._minLocationPrecision = (minLocationPrecision instanceof LocationPrecision ? minLocationPrecision : null);\n\t\tthis._nodeMetadataPaths = setOrNull(nodeMetadataPaths);\n        this._userMetadataPaths = setOrNull(userMetadataPaths);\n        if ( this.constructor === SecurityPolicy ) {\n            Object.freeze(this);\n        }\n\t}\n\n\t/**\n\t * Get the node IDs.\n\t * \n\t * @returns {Set<number>} the node IDs, or `null`\n\t */\n\tget nodeIds() {\n\t\treturn this._nodeIds;\n\t}\n\n\t/**\n\t * Get the source IDs.\n\t * \n\t * @returns {Set<string>} the source IDs, or `null`\n\t */\n\tget sourceIds() {\n\t\treturn this._sourceIds;\n\t}\n\n\t/**\n\t * Get the aggregations.\n\t * \n\t * @returns {Set<module:domain~Aggregation>} the aggregations, or `null`\n\t */\n\tget aggregations() {\n\t\treturn this._aggregations;\n\t}\n\n\t/**\n\t * Get the location precisions.\n\t * \n\t * @returns {Set<module:domain~LocationPrecision>} the precisions, or `null`\n\t */\n\tget locationPrecisions() {\n\t\treturn this._locationPrecisions;\n\t}\n\n\t/**\n\t * Get the minimum aggregation.\n\t * \n\t * @returns {module:domain~Aggregation} the minimum aggregation, or `null`\n\t */\n\tget minAggregation() {\n\t\treturn this._minAggregation;\n\t}\n\n\t/**\n\t * Get the minimum location precision.\n\t * \n\t * @returns {module:domain~LocationPrecision} the minimum precision, or `null`\n\t */\n\tget minLocationPrecision() {\n\t\treturn this._minLocationPrecision;\n\t}\n\n\t/**\n\t * Get the node metadata paths.\n\t * \n\t * @returns {Set<string>} the node metadata paths, or `null`\n\t */\n\tget nodeMetadataPaths() {\n\t\treturn this._nodeMetadataPaths;\n\t}\n\n\t/**\n\t * Get the user metadata paths.\n\t * \n\t * @returns {Set<string>} the user metadata paths, or `null`\n\t */\n\tget userMetadataPaths() {\n\t\treturn this._userMetadataPaths;\n\t}\n\n    /**\n     * Get this object as a standard JSON encoded string value.\n     * \n     * @return {string} the JSON encoded string\n     */\n    toJsonEncoding() {\n\t\tlet result = {};\n\t\tlet val = this.nodeIds;\n\t\tif ( val ) {\n\t\t\tresult.nodeIds = Array.from(val);\n\t\t}\n\t\t\n\t\tval = this.sourceIds;\n\t\tif ( val ) {\n\t\t\tresult.sourceIds = Array.from(val);\n\t\t}\n\n\t\tval = this.aggregations;\n\t\tif ( val ) {\n\t\t\tresult.aggregations = Array.from(val).map(e => e.name);\n\t\t}\n\n\t\tval = this.locationPrecisions;\n\t\tif ( val ) {\n\t\t\tresult.locationPrecisions = Array.from(val).map(e => e.name);\n\t\t}\n\n\t\tval = this.minAggregation;\n\t\tif ( val ) {\n\t\t\tif ( result.length > 0 ) {\n\t\t\t\tresult += '&';\n\t\t\t}\n\t\t\tresult.minAggregation = val.name;\n\t\t}\n\n\t\tval = this.minLocationPrecision;\n\t\tif ( val ) {\n\t\t\tresult.minLocationPrecision = val.name;\n\t\t}\n\n\t\tval = this.nodeMetadataPaths;\n\t\tif ( val ) {\n\t\t\tresult.nodeMetadataPaths = Array.from(val);\n\t\t}\n\n\t\tval = this.userMetadataPaths;\n\t\tif ( val ) {\n\t\t\tresult.userMetadataPaths = Array.from(val);\n\t\t}\n\n\t\treturn JSON.stringify(result);\n    }\n}\n\nconst MIN_AGGREGATION_CACHE = new Map(); // Map<string, Set<Aggregation>>\nconst MIN_LOCATION_PRECISION_CACHE = new Map(); // Map<string, Set<LocationPrecision>>\n\n/**\n * A mutable builder object for {@link module:domain~SecurityPolicy} instances.\n * @alias module:domain~SecurityPolicyBuilder\n */\nclass SecurityPolicyBuilder {\n\n\t/**\n\t * Apply all properties from another SecurityPolicy.\n\t * \n\t * @param {module:domain~SecurityPolicy} policy the SecurityPolicy to apply\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\twithPolicy(policy) {\n\t\tif ( policy ) {\n\t\t\tthis.withAggregations(policy.aggregations)\n\t\t\t\t.withMinAggregation(policy.minAggregation)\n\t\t\t\t.withLocationPrecisions(policy.locationPrecisions)\n\t\t\t\t.withMinLocationPrecision(policy.minLocationPrecision)\n\t\t\t\t.withNodeIds(policy.nodeIds)\n\t\t\t\t.withSourceIds(policy.sourceIds)\n\t\t\t\t.withNodeMetadataPaths(policy.nodeMetadataPaths)\n\t\t\t\t.withUserMetadataPaths(policy.userMetadataPaths);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Merge all properties from another SecurityPolicy.\n\t * \n\t * @param {module:domain~SecurityPolicy} policy the SecurityPolicy to merge\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\taddPolicy(policy) {\n\t\tif ( policy ) {\n\t\t\tthis.addAggregations(policy.aggregations)\n\t\t\t\t\t.addLocationPrecisions(policy.locationPrecisions)\n\t\t\t\t\t.addNodeIds(policy.nodeIds)\n\t\t\t\t\t.addSourceIds(policy.sourceIds)\n\t\t\t\t\t.addNodeMetadataPaths(policy.nodeMetadataPaths)\n\t\t\t\t\t.addUserMetadataPaths(policy.userMetadataPaths);\n\t\t\tif ( policy.minAggregation ) {\n\t\t\t\tthis.withMinAggregation(policy.minAggregation);\n\t\t\t}\n\t\t\tif ( policy.minLocationPrecision ) {\n\t\t\t\tthis.withMinLocationPrecision(policy.minLocationPrecision);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Set the node IDs.\n\t * \n\t * @param {number[]|Set<number>} nodeIds the node IDs to use\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\twithNodeIds(nodeIds) {\n\t\tthis.nodeIds = setOrNull(nodeIds);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a set of node IDs.\n\t * \n\t * @param {number[]|Set<number>} nodeIds the node IDs to add\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\taddNodeIds(nodeIds) {\n\t\treturn this.withNodeIds(mergedSets(this.nodeIds, nodeIds));\n\t}\n\n\t/**\n\t * Set the node metadata paths.\n\t * \n\t * @param {string[]|Set<string>} nodeMetadataPaths the path expressions to use\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\twithNodeMetadataPaths(nodeMetadataPaths) {\n\t\tthis.nodeMetadataPaths = setOrNull(nodeMetadataPaths);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a set of node metadata paths.\n\t * \n\t * @param {string[]|Set<string>} nodeMetadataPaths the path expressions to add\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\taddNodeMetadataPaths(nodeMetadataPaths) {\n\t\treturn this.withNodeMetadataPaths(mergedSets(this.nodeMetadataPaths, nodeMetadataPaths));\n\t}\n\n\t/**\n\t * Set the user metadata paths.\n\t * \n\t * @param {string[]|Set<string>} userMetadataPaths the path expressions to use\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\twithUserMetadataPaths(userMetadataPaths) {\n\t\tthis.userMetadataPaths = setOrNull(userMetadataPaths);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a set of user metadata paths.\n\t * \n\t * @param {string[]|Set<string>} userMetadataPaths the path expressions to add\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\taddUserMetadataPaths(userMetadataPaths) {\n\t\treturn this.withUserMetadataPaths(mergedSets(this.userMetadataPaths, userMetadataPaths));\n\t}\n\n\t/**\n\t * Set the source IDs.\n\t * \n\t * @param {string[]|Set<string>} sourceIds the source IDs to use\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\twithSourceIds(sourceIds) {\n\t\tthis.sourceIds = setOrNull(sourceIds);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add source IDs.\n\t * \n\t * @param {string[]|Set<string>} sourceIds the source IDs to add\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\taddSourceIds(sourceIds) {\n\t\treturn this.withSourceIds(mergedSets(this.sourceIds, sourceIds));\n\t}\n\n\t/**\n\t * Set the aggregations.\n\t * \n\t * @param {module:domain~Aggregation[]|Set<module:domain~Aggregation>} aggregations the aggregations to use\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\twithAggregations(aggregations) {\n\t\tthis.aggregations = setOrNull(aggregations);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Set the aggregations.\n\t * \n\t * @param {module:domain~Aggregation[]|Set<module:domain~Aggregation>} aggregations the aggregations to add\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\taddAggregations(aggregations) {\n\t\treturn this.withAggregations(mergedSets(this.aggregations, aggregations));\n\t}\n\n\t/**\n\t * Set the location precisions.\n\t * \n\t * @param {module:domain~LocationPrecision[]|Set<module:domain~LocationPrecision>} locationPrecisions the precisions to use\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\twithLocationPrecisions(locationPrecisions) {\n\t\tthis.locationPrecisions = setOrNull(locationPrecisions);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add location precisions.\n\t * \n\t * @param {module:domain~LocationPrecision[]|Set<module:domain~LocationPrecision>} locationPrecisions the precisions to add\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\taddLocationPrecisions(locationPrecisions) {\n\t\treturn this.withLocationPrecisions(mergedSets(this.locationPrecisions, locationPrecisions));\n\t}\n\n\t/**\n\t * Set a minimum aggregation level.\n\t * \n\t * @param {module:domain~Aggregation} minAggregation the minimum aggregation level to set\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\twithMinAggregation(minAggregation) {\n\t\tthis.minAggregation = minAggregation;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Build the effective aggregation level set from the policy settings.\n\t * \n\t * This computes a set of aggregation levels based on the configured `minAggregation`\n\t * and `aggregations` values.\n\t * \n\t * @returns {Set<module:domain~Aggregation>} the aggregation set\n\t * @private\n\t */\n\tbuildAggregations() {\n\t\tconst minAggregation = this.minAggregation;\n\t\tconst aggregations = this.aggregations;\n\t\tif ( !minAggregation && aggregations && aggregations.size > 0 ) {\n\t\t\treturn aggregations;\n\t\t} else if ( !minAggregation ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn Aggregation.minimumEnumSet(minAggregation, MIN_AGGREGATION_CACHE);\n\t}\n\n\t/**\n\t * Treat the configured `locationPrecisions` set as a single\n\t * minimum value or a list of exact values.\n\t * \n\t * By default if `locationPrecisions` is configured with a single\n\t * value it will be treated as a <em>minimum</em> value, and any\n\t * {@link module:domain~LocationPrecision} with a {@link module:domain~LocationPrecision#precision} equal \n\t * to or higher than that value's level will be included in the generated\n\t * {@link module:domain~SecurityPolicy#locationPrecisions} set. Set this to\n\t * `null` to disable that behavior and treat\n\t * `locationPrecisions` as the exact values to include in the\n\t * generated {@link module:domain~SecurityPolicy#locationPrecisions} set.\n\t * \n\t * @param {module:domain~LocationPrecision|null} minLocationPrecision\n\t *        `null` to treat configured location precision values\n\t *        as-is, or else the minimum threshold\n\t * @returns {module:domain~SecurityPolicyBuilder} this object\n\t */\n\twithMinLocationPrecision(minLocationPrecision) {\n\t\tthis.minLocationPrecision = minLocationPrecision;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Build the effective aggregation level set from the policy settings.\n\t * \n\t * This computes a set of location precision levels based on the configured `minLocationPrecision`\n\t * and `locationPrecisions` values.\n\t * \n\t * @returns {Set<module:domain~LocationPrecision>} the precision set\n\t * @private\n\t */\n\tbuildLocationPrecisions() {\n\t\tconst minLocationPrecision = this.minLocationPrecision;\n\t\tconst locationPrecisions = this.locationPrecisions;\n\t\tif ( !minLocationPrecision && locationPrecisions && locationPrecisions.size > 0 ) {\n\t\t\treturn locationPrecisions;\n\t\t} else if ( !minLocationPrecision ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn LocationPrecision.minimumEnumSet(minLocationPrecision, MIN_LOCATION_PRECISION_CACHE);\n\t}\n\n\t/**\n\t * Create a new {@link SecurityPolicy} out of the properties configured on this builder.\n\t * \n\t * @returns {module:domain~SecurityPolicy} the new policy instance\n\t */\n\tbuild() {\n\t\treturn new SecurityPolicy(this.nodeIds, this.sourceIds, \n\t\t\t\tthis.buildAggregations(), this.minAggregation,\n\t\t\t\tthis.buildLocationPrecisions(), this.minLocationPrecision,\n\t\t\t\tthis.nodeMetadataPaths, this.userMetadataPaths);\n\t}\n}\n\nexport default SecurityPolicy;\nexport { SecurityPolicyBuilder };","/** @module domain */\n\nexport { default as Aggregations, Aggregation } from './aggregation';\nexport { default as AuthTokenStatuses, AuthTokenStatus } from './authTokenStatus';\nexport { default as AuthTokenTypes, AuthTokenType } from './authTokenType';\nexport { default as DatumFilter } from './datumFilter';\nexport { default as GeneralMetadata,\n    stringMapToObject,\n    objectToStringMap } from './generalMetadata';\nexport { default as InstructionStates, InstructionState } from './instructionState';\nexport { default as Location } from './location';\nexport { default as LocationPrecisions, LocationPrecision } from './locationPrecision';\nexport { default as Pagination } from './pagination';\nexport { default as SecurityPolicy, SecurityPolicyBuilder } from './securityPolicy';\nexport { default as SortDescriptor } from './sortDescriptor';\n","/**\n * Get an appropriate multiplier value for scaling a given value to a more display-friendly form.\n * \n * This will return values suitable for passing to {@link module:format~displayUnitsForScale}.\n * \n * @param {number} value the value to get a display scale factor for, for example the maximum value\n *                       in a range of values\n * @return {number} the display scale factor\n * @alias module:format~displayScaleForValue\n */\nexport function displayScaleForValue(value) {\n    var result = 1,\n        num = Math.abs(Number(value));\n\tif ( isNaN(num) === false ) {\n\t\tif ( num >= 1000000000 ) {\n\t\t\tresult = 1000000000;\n\t\t} else if ( num >= 1000000 ) {\n\t\t\tresult = 1000000;\n\t\t} else if ( num >= 1000 ) {\n\t\t\tresult = 1000;\n\t\t}\n\t}\n\treturn result;\n}\n\n/**\n * Get an appropriate display unit for a given base unit and scale factor.\n * \n * Use this method to render scaled data value units. Typically you would first call\n * {@link module:module:format~displayScaleForValue}, passing in the largest expected value\n * in a set of data, and then pass the result to this method to generate a display unit\n * for the base unit for that data.\n * \n * For example, given a base unit of `W` (watts) and a maximum data value of `10000`:\n * \n * ```\n * const fmt = import { * } from 'format/scale';\n * const displayScale = fmt.displayScaleForValue(10000);\n * const displayUnit = fmt.displayUnitForScale('W', displayScale);\n * ```\n * \n * The `displayUnit` result in that example would be `kW`.\n *\n * @param {string} baseUnit the base unit, for example `W` or `Wh`\n * @param {number} scale the unit scale, which must be a recognized SI scale, such \n *                       as `1000` for `k`\n * @return {string} the display unit value\n * @alias module:format~displayUnitsForScale\n */\nexport function displayUnitsForScale(baseUnit, scale) {\n\treturn (scale === 1000000000 ? 'G' \n\t\t\t: scale === 1000000 ? 'M' \n\t\t\t: scale === 1000 ? 'k' \n\t\t\t: '') + baseUnit;\n}\n","/** @module format */\n\nexport *  from './date';\nexport *  from './scale';\n","/**\n * A case-insensitive string key multi-value map object.\n * @alias module:util~MultiMap\n */\nclass MultiMap {\n\n\t/**\n\t * Constructor.\n\t * \n\t * @param {*} [values] an object who's enumerable properties will be added to this map\n\t */\n\tconstructor(values) {\n\t\tthis.mappings = {}; // map of lower-case header names to {name:X, val:[]} values\n\t\tthis.mappingNames = []; // to keep insertion order\n\t\tif ( values ) {\n\t\t\tthis.putAll(values);\n\t\t}\n\t}\n\n\t/**\n\t * Add a value.\n\t * \n\t * This method will append values to existing keys.\n\t * \n\t * @param {string} key the key to use\n\t * @param {*} value the value to add\n\t * @returns {module:util~MutliMap} this object\n\t */\n\tadd(key, value) {\n\t\treturn addValue(this, key, value);\n\t}\n\n\t/**\n\t * Set a value.\n\t * \n\t * This method will replace any existing values with just <code>value</code>.\n\t * \n\t * @param {string} key the key to use\n\t * @param {*} value the value to set\n\t * @returns {module:util~MutliMap} this object\n\t */\n\tput(key, value) {\n\t\treturn addValue(this, key, value, true);\n\t}\n\n\t/**\n\t * Set multiple values.\n\t * \n\t * This method will replace any existing values with those provided on <code>values</code>.\n\t * \n\t * @param {*} values an object who's enumerable properties will be added to this map\n\t * @returns {module:util~MutliMap} this object\n\t */\n\tputAll(values) {\n\t\tfor ( let key in values ) {\n\t\t\tif ( values.hasOwnProperty(key) ) {\n                addValue(this, key, values[key], true);\n            }\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Get the values associated with a key.\n\t * \n\t * @param {string} key the key of the values to get\n\t * @returns {object[]} the array of values associated with the key, or <code>undefined</code> if not available\n\t */\n\tvalue(key) {\n\t\tconst keyLc = key.toLowerCase();\n\t\tconst mapping = this.mappings[keyLc];\n\t\treturn (mapping ? mapping.val : undefined);\n\t}\n\n\t/**\n\t * Get the first avaialble value assocaited with a key.\n\t * \n\t * @param {string} key the key of the value to get\n\t * @returns {*} the first available value associated with the key, or <code>undefined</code> if not available\n\t */\n\tfirstValue(key) {\n\t\tconst values = this.value(key);\n\t\treturn (values && values.length > 0 ? values[0] : undefined);\n\t}\n\n\t/**\n\t * Remove all properties from this map.\n\t * \n\t * @returns {module:util~MutliMap} this object\n\t */\n\tclear() {\n\t\tthis.mappingNames.length = 0;\n\t\tthis.mappings = {};\n\t\treturn this;\n\t}\n\n\t/**\n\t * Remove all values associated with a key.\n\t * \n\t * @param {string} key the key of the values to remove\n\t * @returns {object[]} the removed values, or <code>undefined</code> if no values were present for the given key\n\t */\n\tremove(key) {\n\t\tconst keyLc = key.toLowerCase();\n\t\tconst index = this.mappingNames.indexOf(keyLc);\n\t\tconst result = this.mappings[keyLc];\n\t\tif ( result ) {\n\t\t\tdelete this.mappings[keyLc];\n\t\t\tthis.mappingNames.splice(index, 1);\n\t\t}\n\t\treturn (result ? result.val : undefined);\n\t}\n\n\t/**\n\t * Get the number of entries in this map.\n\t * \n\t * @returns {number} the number of entries in the map\n\t */\n\tsize() {\n\t\treturn this.mappingNames.length;\n\t}\n\n\t/**\n\t * Test if the map is empty.\n\t * \n\t * @returns {boolean} <code>true</code> if there are no entries in this map\n\t */\n\tisEmpty() {\n\t\treturn this.size() < 1;\n\t}\n\n\t/**\n\t * Test if there are any values associated with a key.\n\t * \n\t * @param {string} key the key to test\n\t * @returns {boolean} <code>true</code> if there is at least one value associated with the key\n\t */\n\tcontainsKey(key) {\n\t\treturn (this.value(key) !== undefined);\n\t}\n\n\t/**\n\t * Get an array of all keys in this map.\n\t * \n\t * @returns {string[]} array of keys in this map, or an empty array if the map is empty\n\t */\n\tkeySet() {\n\t\tconst result = [];\n\t\tconst len = this.size();\n\t\tfor ( let i = 0; i < len; i += 1 ) {\n\t\t\tresult.push(this.mappings[this.mappingNames[i]].key);\n\t\t}\n\t\treturn result;\n\t}\n}\n\n/**\n * Add/replace values on a map.\n * \n * @param {module:util~MutliMap} map the map to mutate \n * @param {string} key the key to change \n * @param {*} value the value to add\n * @param {boolean} replace if <code>true</code> then replace all existing values;\n *                          if <code>false</code> append to any existing values\n * @returns {module:util~MutliMap} the passed in <code>map</code>\n * @private\n */\nfunction addValue(map, key, value, replace) {\n\tconst keyLc = key.toLowerCase();\n\tlet mapping = map.mappings[keyLc];\n\tif ( !mapping ) {\n\t\tmapping = {key:key, val:[]};\n\t\tmap.mappings[keyLc] = mapping;\n\t\tmap.mappingNames.push(keyLc);\n\t}\n\tif ( replace ) {\n\t\tmapping.val.length = 0;\n\t}\n\tif ( Array.isArray(value) ) {\n\t\tconst len = value.length;\n\t\tfor ( let i = 0; i < len; i += 1 ) {\n\t\t\tmapping.val.push(value[i]);\n\t\t}\n\t} else {\n\t\tmapping.val.push(value);\n\t}\n\treturn map;\n}\n\nexport default MultiMap;\n","function createGetter(me, prop) {\n\treturn function() { return me.map[prop]; };\n}\n\nfunction createSetter(me, prop) {\n\treturn function(value) { me.map[prop] = value; };\n}\n\nfunction createProperty(me, prop) {\n\tObject.defineProperty(me, prop, {\n\t\tenumerable : true,\n\t\tconfigurable : true,\n\t\tget : createGetter(me, prop),\n\t\tset : createSetter(me, prop)\n\t});\n}\n\n/**\n * A configuration utility object.\n *\n * Properties can be get/set by using the {@link module:util~Configuration#value} function.\n * @alias module:util~Configuration\n */\nclass Configuration {\n\n\t/**\n\t * Constructor.\n\t *\n\t * For any properties passed on `initialMap`, {@link module:util~Configuration#value} will\n\t * be called so those properties are defined on this instance.\n\t *\n\t * @param {object} initialMap the optional initial properties to store\n\t */\n\tconstructor(initialMap) {\n\t\tthis.map = {};\n\t\tif ( initialMap !== undefined ) {\n\t\t\tthis.values(initialMap);\n\t\t}\n\t}\n\n\t/**\n\t * Test if a key is truthy.\n\t *\n\t * @param {string} key the key to test\n\t * @returns {boolean} `true` if the key is enabled\n\t */\n\tenabled(key) {\n\t\tif ( key === undefined ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !!this.map[key];\n\t}\n\n\t/**\n\t * Set or toggle the enabled status of a given key.\n\t *\n\t * <p>If the `enabled` parameter is not passed, then the enabled\n\t * status will be toggled to its opposite value.</p>\n\t *\n\t * @param {string} key they key to set\n\t * @param {boolean} enabled the optional enabled value to set\n\t * @returns {module:util~Configuration} this object to allow method chaining\n\t */\n\ttoggle(key, enabled) {\n\t\tvar val = enabled;\n\t\tif ( key === undefined ) {\n\t\t\treturn this;\n\t\t}\n\t\tif ( val === undefined ) {\n\t\t\t// in 1-argument mode, toggle current value\n\t\t\tval = (this.map[key] === undefined);\n\t\t}\n\t\treturn this.value(key, (val === true ? true : null));\n\t}\n\n\t/**\n\t * Get or set a configuration value.\n\t *\n\t * @param {string} key The key to get or set the value for\n\t * @param {object} [newValue] If defined, the new value to set for the given `key`.\n\t *                            If `null` then the value will be removed.\n\t * @returns {object} If called as a getter, the associated value for the given `key`,\n\t *                   otherwise this object.\n\t */\n\tvalue(key, newValue) {\n\t\tif ( arguments.length === 1 ) {\n\t\t\treturn this.map[key];\n\t\t}\n\t\tif ( newValue === null ) {\n\t\t\tdelete this.map[key];\n\t\t\tif ( this.hasOwnProperty(key) ) {\n\t\t\t\tdelete this[key];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.map[key] = newValue;\n\t\t\tif ( !this.hasOwnProperty(key) ) {\n\t\t\t\tcreateProperty(this, key);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Get or set multiple properties.\n\t * \n\t * @param {object} [newMap] a map of values to set\n\t * @returns {object} if called as a getter, all properties of this object copied into a simple object;\n\t *                   otherwise this object\n\t */\n\tvalues(newMap) {\n\t\tif ( newMap ) {\n\t\t\tfor ( let prop in newMap ) {\n\t\t\t\tif ( newMap.hasOwnProperty(prop) ) {\n\t\t\t\t\tthis.value(prop, newMap[prop]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\treturn Object.assign({}, this.map);\n\t}\n\n}\n\nexport default Configuration;\n","import Configuration from '../util/configuration';\n\n/**\n * Normailze a protocol value.\n * \n * This method is used to normalize protocol values which might come from a `Location`\n * object and thus contain a trailing colon.\n * \n * @param {String} [val] the protocol value to normalize\n */\nfunction normalizedProtocol(val) {\n\tif ( !val ) {\n\t\treturn 'https';\n\t}\n\treturn val.replace(/:$/, '');\n}\n\n/**\n * Normalize the environment configuration.\n * \n * @param {Object} [config] the initial configuration \n */\nfunction normalizedConfig(config) {\n\tvar result = Object.assign({\n\t\thost: 'data.solarnetwork.net'\n\t}, config);\n\tresult.protocol = normalizedProtocol(result.protocol || 'https');\n\tresult.port = (result.port || (result.protocol === 'https'  ? 443  : 80));\n\treturn result;\n}\n\n/**\n * An environment configuration utility object.\n *\n * This extends {@link module:util~Configuration} to add support for standard properties\n * needed to access the SolarNetwork API, such as host and protocol values.\n *\n * @extends module:util~Configuration\n * @alias module:net~Environment\n */\nclass Environment extends Configuration {\n\n\t/**\n\t * Constructor.\n\t *\n\t * This will define the following default properties, if not supplied on the\n\t * `config` argument:\n\t *\n\t * <dl>\n\t * <dt>host</dt><dd>`data.solarnetwork.net`</dd>\n\t * <dt>protocol</dt><dd>`https`</dd>\n\t * <dt>port</dt><dd>`443`</dd>\n\t * </dl>\n\t * \n\t * These properties correspond to those on the `window.location` object when\n\t * running in a browser. Thus to construct an environment based on the location\n\t * of the current page you can create an instance like this:\n\t * \n\t * ```\n\t * const env = new Environment(window.location);\n\t * ```\n\t *\n\t * @param {Object} [config] an optional set of properties to start with\n\t */\n\tconstructor(config) {\n\t\tsuper(normalizedConfig(config));\n\t}\n\n    /**\n\t * Check if TLS is in use via the `https` protocol.\n\t *\n     * @returns {boolean} `true` if the `protocol` is set to `https`\n     */\n\tuseTls() {\n\t\treturn (this.value('protocol') === 'https');\n\t}\n\n}\n\nexport default Environment;\n","import MultiMap from '../util/multiMap';\n\nconst HttpMethod = Object.freeze(\t\n\t/**\n\t * Enumeration of HTTP methods (verbs).\n\t * @enum {string}\n\t * @alias module:net~HttpMethod\n\t * @constant\n\t */\n\t{\n\tGET: 'GET',\n\tHEAD: 'HEAD',\n\tPOST: 'POST',\n\tPUT: 'PUT',\n\tPATCH: 'PATCH',\n\tDELETE: 'DELETE',\n\tOPTIONS: 'OPTIONS',\n\tTRACE: 'TRACE',\n});\n\nconst HttpContentType = Object.freeze(\t\n\t/**\n\t * Enumeration of common HTTP `Content-Type` values.\n\t * @enum {string}\n\t * @alias module:net~HttpContentType\n\t * @constant\n\t */\n\t{\n\t\tAPPLICATION_JSON:\t\t'application/json',\n\t\tAPPLICATION_JSON_UTF8:\t'application/json; charset=UTF-8',\n\t\tFORM_URLENCODED: \t\t'application/x-www-form-urlencoded',\n\t\tFORM_URLENCODED_UTF8:\t'application/x-www-form-urlencoded; charset=UTF-8',\n});\n\n/**\n * Support for HTTP headers.\n * \n * @extends module:util~MultiMap\n * @alias module:net~HttpHeaders\n */\nclass HttpHeaders extends MultiMap {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n}\n\nObject.defineProperties(HttpHeaders, {\n\t/**\n\t * The `Authorization` header.\n\t * \n\t * @memberof module:net~HttpHeaders\n\t * @readonly\n\t * @type {string}\n\t */\n\t'AUTHORIZATION':\t{ value: 'Authorization' },\n\n\t/**\n\t * The `Content-MD5` header.\n\t * \n\t * @memberof module:net~HttpHeaders\n\t * @readonly\n\t * @type {string}\n\t */\n\t'CONTENT_MD5':\t\t{ value: 'Content-MD5' },\n\n\t/**\n\t * The `Content-Type` header.\n\t * \n\t * @memberof module:net~HttpHeaders\n\t * @readonly\n\t * @type {string}\n\t */\n\t'CONTENT_TYPE': \t{ value: 'Content-Type' },\n\n\t/**\n\t * The `Date` header.\n\t * \n\t * @memberof module:net~HttpHeaders\n\t * @readonly\n\t * @type {string}\n\t */\n\t'DATE':\t\t\t\t{ value: 'Date' },\n\n\t/**\n\t * The `Digest` header.\n\t * \n\t * @memberof module:net~HttpHeaders\n\t * @readonly\n\t * @type {string}\n\t */\n\t'DIGEST':\t\t\t{ value: 'Digest' },\n\n\t/**\n\t * The `Host` header.\n\t * \n\t * @memberof module:net~HttpHeaders\n\t * @readonly\n\t * @type {string}\n\t */\n\t'HOST': \t\t\t{ value: 'Host' },\n\n\t/**\n\t * The `X-SN-Date` header.\n\t * \n\t * @memberof module:net~HttpHeaders\n\t * @readonly\n\t * @type {string}\n\t */\n\t'X_SN_DATE': \t\t{ value: 'X-SN-Date' },\n});\n\nexport default HttpHeaders;\nexport { HttpContentType, HttpMethod };","/**\n * Parse the query portion of a URL string, and return a parameter object for the\n * parsed key/value pairs.\n *\n * <p>Multiple parameters of the same name will be stored as an array on the returned object.</p>\n *\n * @param {string} search the query portion of the URL, which may optionally include\n *                        the leading `?` character\n * @return {object} the parsed query parameters, as a parameter object\n * @alias module:net~urlQueryParse\n */\nfunction urlQueryParse(search) {\n    var params = {};\n    var pairs;\n    var pair;\n    var i, len, k, v;\n    if ( search !== undefined && search.length > 0 ) {\n        // remove any leading ? character\n        if ( search.match(/^\\?/) ) {\n            search = search.substring(1);\n        }\n        pairs = search.split('&');\n        for ( i = 0, len = pairs.length; i < len; i++ ) {\n            pair = pairs[i].split('=', 2);\n            if ( pair.length === 2 ) {\n                k = decodeURIComponent(pair[0]);\n                v = decodeURIComponent(pair[1]);\n                if ( params[k] ) {\n                    if ( !Array.isArray(params[k]) ) {\n                        params[k] = [params[k]]; // turn into array;\n                    }\n                    params[k].push(v);\n                } else {\n                    params[k] = v;\n                }\n            }\n        }\n    }\n    return params;\n}\n\n/**\n * Encode the properties of an object as a URL query string.\n *\n * <p>If an object property has an array value, multiple URL parameters will be encoded for that property.</p>\n *\n * <p>The optional `encoderFn` argument is a function that accepts a string value\n * and should return a URI-safe string for that value.</p>\n *\n * @param {object} parameters an object to encode as URL parameters\n * @param {function} encoderFn an optional function to encode each URI component with;\n *                             if not provided the built-in `encodeURIComponent()` function\n *                             will be used\n * @return {string} the encoded query parameters\n * @alias module:net~urlQueryEncode\n */\nfunction urlQueryEncode(parameters, encoderFn) {\n    var result = '',\n        prop,\n        val,\n        i,\n        len;\n    const encoder = (encoderFn || encodeURIComponent);\n    function handleValue(k, v) {\n        if ( result.length ) {\n            result += '&';\n        }\n        result += encoder(k) + '=' + encoder(v);\n    }\n    if ( parameters ) {\n        for ( prop in parameters ) {\n            if ( parameters.hasOwnProperty(prop) ) {\n                val = parameters[prop];\n                if ( Array.isArray(val) ) {\n                    for ( i = 0, len = val.length; i < len; i++ ) {\n                        handleValue(prop, val[i]);\n                    }\n                } else {\n                    handleValue(prop, val);\n                }\n            }\n        }\n    }\n    return result;\n}\n\nexport { urlQueryParse, urlQueryEncode };\n\nexport default {\n    urlQueryParse : urlQueryParse,\n    urlQueryEncode : urlQueryEncode,\n}\n","import Base64 from 'crypto-js/enc-base64';\nimport Hex from 'crypto-js/enc-hex';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport SHA256 from 'crypto-js/sha256';\nimport { parse as uriParse } from 'uri-js';\n\nimport { iso8601Date } from '../format/date';\nimport MultiMap from '../util/multiMap';\nimport Environment from './environment';\nimport { HttpMethod, default as HttpHeaders } from './httpHeaders';\nimport { urlQueryParse } from './urlQuery';\n\n/**\n * The number of milliseconds a signing key is valid for.\n * @type {number}\n * @private\n */\nconst SIGNING_KEY_VALIDITY = (7 * 24 * 60 * 60 * 1000);\n\n/**\n * A builder object for the SNWS2 HTTP authorization scheme.\n *\n * This builder can be used to calculate a one-off header value, for example:\n *\n * ```\n * let authHeader = new AuthorizationV2Builder(\"my-token\")\n *     .path(\"/solarquery/api/v1/pub/...\")\n *     .build(\"my-token-secret\");\n * ```\n * \n * Or the builder can be re-used for a given token:\n *\n * ```\n * // create a builder for a token\n * let builder = new AuthorizationV2Builder(\"my-token\");\n *\n * // elsewhere, re-use the builder for repeated requests\n * builder.reset()\n *     .path(\"/solarquery/api/v1/pub/...\")\n *     .build(\"my-token-secret\");\n * ```\n *\n * Additionally, a signing key can be generated and re-used for up to 7 days:\n *\n * ```\n * // create a builder for a token\n * let builder = new AuthorizationV2Builder(\"my-token\")\n *   .saveSigningKey(\"my-token-secret\");\n *\n * // elsewhere, re-use the builder for repeated requests\n * builder.reset()\n *     .path(\"/solarquery/api/v1/pub/...\")\n *     .buildWithSavedKey(); // note previously generated key used\n * ```\n * @alias module:net~AuthorizationV2Builder\n */\nclass AuthorizationV2Builder {\n\n    /**\n     * Constructor.\n     * \n     * @param {string} token the auth token to use\n     * @param {module:net~Environment} [environment] the environment to use; if not provided a default environment will be created \n     */\n    constructor(token, environment) {\n\n        /**\n         * The SolarNet auth token value.\n         * @member {string}\n         */\n        this.tokenId = token;\n\n        /**\n         * The SolarNet environment.\n         * @member {module:net~Environment}\n         */\n        this.environment = (environment || new Environment());\n\n        /**\n         * Force a port number to be added to host values, even if port would be implied.\n         * \n         * This can be useful when working with a server behind a proxy, where the \n         * proxy is configured to always forward the port even if the port is implied\n         * (i.e. HTTPS is used on the standard port 443).\n         * \n         * @member {boolean}\n         */\n        this.forceHostPort = false;\n\n        this.reset();\n    }\n\n    /**\n     * Reset to defalut property values.\n     *\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    reset() {\n        this.contentDigest = null;\n        this.httpHeaders = new HttpHeaders();\n        this.parameters = new MultiMap();\n        this.signedHeaderNames = [];\n        var host = this.environment.host;\n        if ( this.environment.protocol === 'https' || this.environment.port != 80 ) {\n            host += ':' +this.environment.port;\n        }\n        return this.method(HttpMethod.GET).host(host).path('/').date(new Date());\n    }\n\n    /**\n     * Compute and cache the signing key.\n     *\n     * Signing keys are derived from the token secret and valid for 7 days, so\n     * this method can be used to compute a signing key so that {@link module:net~AuthorizationV2Builder#build}\n     * can be called later. The signing date will be set to whatever date is\n     * currently configured via {@link module:net~AuthorizationV2Builder#date}, which defaults to the\n     * current time for newly created builder instances.\n     *\n     * @param {string} tokenSecret the secret to sign the digest with\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    saveSigningKey(tokenSecret) {\n        this.signingKey = this.computeSigningKey(tokenSecret);\n        this.signingKeyExpiration = new Date(this.requestDate.getTime() + SIGNING_KEY_VALIDITY)\n    }\n\n    /**\n     * Test if a signing key is present and not expired.\n     * @readonly\n     * @type {boolean}\n     */\n    get signingKeyValid() {\n        return (this.signingKey && this.signingKeyExpiration instanceof Date\n            && Date.now() < this.signingKeyExpiration.getTime() ? true : false);\n    }\n\n    /**\n     * Set the HTTP method (verb) to use.\n     *\n     * @param {string} val the method to use; see the {@link HttpMethod} enum for possible values\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    method(val) {\n        this.httpMethod = val;\n        return this;\n    }\n\n    /**\n     * Set the HTTP host.\n     *\n     * This is a shortcut for calling `HttpHeaders#put(HttpHeaders.HOST, val)`.\n     *\n     * @param {string} val the HTTP host value to use\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    host(val) {\n        if ( this.forceHostPort && val.indexOf(':') < 0 && this.environment.port != 80 ) {\n            val += ':' +this.environment.port;\n        }\n        this.httpHeaders.put(HttpHeaders.HOST, val);\n        return this;\n    }\n\n    /**\n     * Set the HTTP request path to use.\n     *\n     * @param {string} val the request path to use\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    path(val) {\n        this.requestPath = val;\n        return this;\n    }\n\n    /**\n     * Set the host, path, and query parameters via a URL string.\n     *\n     * @param {string} url the URL value to use\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    url(url) {\n        const uri = uriParse(url);\n        let host = uri.host;\n        if ( uri.port && (((uri.scheme === 'https' || uri.scheme === 'wss') && uri.port !== 443) \n                || ((uri.scheme === 'http' || uri.scheme === 'ws') && uri.port !== 80)) ) {\n            host += ':' + uri.port;\n        }\n        if ( uri.query ) {\n            this.queryParams(urlQueryParse(uri.query));\n        }\n        return this.host(host).path(uri.path);\n    }\n\n    /**\n     * Set the HTTP content type.\n     *\n     * This is a shortcut for calling {@link HttpHeaders#put} with the key {@link HttpHeaders#CONTENT_TYPE}.\n     *\n     * @param {string} val the HTTP content type value to use\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    contentType(val) {\n        this.httpHeaders.put(HttpHeaders.CONTENT_TYPE, val);\n        return this;\n    }\n\n    /**\n     * Set the authorization request date.\n     *\n     * @param {Date} val the date to use; typically the current time, e.g. `new Date()`\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    date(val) {\n        this.requestDate = (val ? val : new Date());\n        return this;\n    }\n\n    /**\n     * The authorization request date as a HTTP header string value.\n     *\n     * @readonly\n     * @type {string}\n     */\n    get requestDateHeaderValue() {\n        return this.requestDate.toUTCString();\n    }\n\n    /**\n     * Control using the `X-SN-Date` HTTP header versus the `Date` header.\n     *\n     * <p>Set to `true` to use the `X-SN-Date` header, `false` to use \n     * the `Date` header. This will return `true` if `X-SN-Date` has been\n     * added to the `signedHeaderNames` property or has been added to the `httpHeaders`\n     * property.</p>\n     *\n     * @type {boolean}\n     */\n    get useSnDate() {\n        let signedHeaders = this.signedHeaderNames;\n        let existingIndex = (Array.isArray(signedHeaders)\n            ? signedHeaders.findIndex(caseInsensitiveEqualsFn(HttpHeaders.X_SN_DATE))\n            : -1);\n        return existingIndex >= 0 || this.httpHeaders.containsKey(HttpHeaders.X_SN_DATE);\n    }\n\n    set useSnDate(enabled) {\n        let signedHeaders = this.signedHeaderNames;\n        let existingIndex = (Array.isArray(signedHeaders)\n            ? signedHeaders.findIndex(caseInsensitiveEqualsFn(HttpHeaders.X_SN_DATE))\n            : -1);\n        if ( enabled && existingIndex < 0 ) {\n            signedHeaders = (signedHeaders\n                ? signedHeaders.concat(HttpHeaders.X_SN_DATE)\n                : [HttpHeaders.X_SN_DATE]);\n            this.signedHeaderNames = signedHeaders;\n        } else if ( !enabled && existingIndex >= 0 ) {\n            signedHeaders.splice(existingIndex, 1);\n            this.signedHeaderNames = signedHeaders;\n        }\n\n        // also clear from httpHeaders\n        this.httpHeaders.remove(HttpHeaders.X_SN_DATE);\n    }\n\n    /**\n     * Set the `useSnDate` property.\n     *\n     * @param {boolean} enabled `true` to use the `X-SN-Date` header, `false` to use `Date`\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    snDate(enabled) {\n        this.useSnDate = enabled;\n        return this;\n    }\n\n    /**\n     * Set a HTTP header value.\n     *\n     * This is a shortcut for calling `HttpHeaders#put(headerName, val)`.\n     *\n     * @param {string} headerName the header name to set\n     * @param {string} headerValue the header value to set\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    header(headerName, headerValue) {\n        this.httpHeaders.put(headerName, headerValue);\n        return this;\n    }\n\n    /**\n     * Set the HTTP headers to use with the request.\n     *\n     * The headers object must include all headers necessary by the\n     * authentication scheme, and any additional headers also configured via\n     * {@link module:net~AuthorizationV2Builder#signedHttpHeaders}.\n     *\n     * @param {HttpHeaders} headers the HTTP headers to use\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    headers(headers) {\n        this.httpHeaders = headers;\n        return this;\n    }\n\n    /**\n     * Set the HTTP `GET` query parameters, or `POST` form-encoded\n     * parameters.\n     *\n     * @param {MultiMap|Object} params the parameters to use, as either a {@link MultiMap} or simple `Object`\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    queryParams(params) {\n        if ( params instanceof MultiMap ) {\n            this.parameters = params;\n        } else {\n            this.parameters.putAll(params);\n        }\n        return this;\n    }\n\n    /**\n     * Set additional HTTP header names to sign with the authentication.\n     *\n     * @param {sring[]} signedHeaderNames additional HTTP header names to include in the signature\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    signedHttpHeaders(signedHeaderNames) {\n        this.signedHeaderNames = signedHeaderNames;\n        return this;\n    }\n\n    /**\n     * Set the HTTP request body content SHA-256 digest value.\n     *\n     * @param {string|module:crypto-js/enc-hex~WordArray} digest the digest value to use; if a string it is assumed to be Hex encoded\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    contentSHA256(digest) {\n        var contentDigest;\n        if ( typeof digest === 'string' ) {\n            contentDigest = Hex.parse(digest);\n        } else {\n            contentDigest = digest;\n        }\n        this.contentDigest = contentDigest;\n        return this;\n    }\n\n    /**\n     * Compute the SHA-256 digest of the request body content and configure the result on this builder.\n     * \n     * This method will compute the digest and then save the result via the {@link module:net~AuthorizationV2Builder#contentSHA256}\n     * method. In addition, it will set the `Digest` HTTP header value via {@link module:net~AuthorizationV2Builder#header}. \n     * This means you <i>must</i> also pass the `Digest` HTTP header with the request. After calling this\n     * method, you can retrieve the `Digest` HTTP header value via the `httpHeaders`property.\n     * \n     * @param {string} content the request body content to compute a SHA-256 digest value from\n     * @returns {module:net~AuthorizationV2Builder} this object\n     */\n    computeContentDigest(content) {\n        var digest = SHA256(content);\n        this.contentSHA256(digest);\n        this.header('Digest', 'sha-256=' +Base64.stringify(digest));\n        return this;\n    }\n\n    /**\n     * Compute the canonical query parameters.\n     * \n     * @returns {string} the canonical query parameters string value\n     */\n    canonicalQueryParameters() {\n        const keys = this.parameters.keySet();\n        if ( keys.length < 1 ) {\n            return '';\n        }\n        keys.sort();\n        const len = keys.length;\n        var first = true,\n            result = '';\n        for ( let i = 0; i < len; i += 1 ) {\n            let key = keys[i];\n            let vals = this.parameters.value(key);\n            const valsLen = vals.length;\n            for ( let j = 0; j < valsLen; j += 1 ) {\n                if ( first ) {\n                    first = false;\n                } else {\n                    result += '&';\n                }\n                result += _encodeURIComponent(key) + '=' + _encodeURIComponent(vals[j]);\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Compute the canonical HTTP headers string value.\n     * \n     * @param {string[]} sortedLowercaseHeaderNames the sorted, lower-cased HTTP header names to include\n     * @returns {string} the canonical headers string value\n     */\n    canonicalHeaders(sortedLowercaseHeaderNames) {\n        var result = '',\n            headerName,\n            headerValue;\n        const len = sortedLowercaseHeaderNames.length;\n        for ( let i = 0; i < len; i += 1 ) {\n            headerName = sortedLowercaseHeaderNames[i];\n            if ( \"date\" === headerName ||  \"x-sn-date\" === headerName ) {\n                headerValue = this.requestDate.toUTCString();\n            } else {\n                headerValue = this.httpHeaders.firstValue(headerName);\n            }\n            result += headerName +':' + (headerValue ? headerValue.trim() : '') + '\\n';\n        }\n        return result;\n    }\n\n    /**\n     * Compute the canonical signed header names value from an array of HTTP header names.\n     * \n     * @param {string[]} sortedLowercaseHeaderNames the sorted, lower-cased HTTP header names to include\n     * @returns {string} the canonical signed header names string value\n     * @private\n     */\n    canonicalSignedHeaderNames(sortedLowercaseHeaderNames) {\n        return sortedLowercaseHeaderNames.join(';');\n    }\n\n    /**\n     * Get the canonical request content SHA256 digest, hex encoded.\n     * \n     * @returns {string} the hex-encoded SHA256 digest of the request content\n     */\n    canonicalContentSHA256() {\n        return (this.contentDigest\n            ? Hex.stringify(this.contentDigest)\n            : AuthorizationV2Builder.EMPTY_STRING_SHA256_HEX);\n    }\n\n    /**\n     * Compute the canonical HTTP header names to include in the signature.\n     * \n     * @returns {string[]} the sorted, lower-cased HTTP header names to include\n     */\n    canonicalHeaderNames() {\n        const httpHeaders = this.httpHeaders;\n        const signedHeaderNames = this.signedHeaderNames;\n\n        // use a MultiMap to take advantage of case-insensitive keys\n        const map = new MultiMap();\n\n        map.put(HttpHeaders.HOST, true);\n        if ( this.useSnDate ) {\n            map.put(HttpHeaders.X_SN_DATE, true);\n        } else {\n            map.put(HttpHeaders.DATE, true);\n        }\n        if ( httpHeaders.containsKey(HttpHeaders.CONTENT_MD5) ) {\n            map.put(HttpHeaders.CONTENT_MD5, true);\n        }\n        if ( httpHeaders.containsKey(HttpHeaders.CONTENT_TYPE) ) {\n            map.put(HttpHeaders.CONTENT_TYPE, true);\n        }\n        if ( httpHeaders.containsKey(HttpHeaders.DIGEST) ) {\n            map.put(HttpHeaders.DIGEST, true);\n        }\n        if ( signedHeaderNames && signedHeaderNames.length > 0 ) {\n            signedHeaderNames.forEach(e => map.put(e, true));\n        }\n        return lowercaseSortedArray(map.keySet());\n    }\n\n    /**\n     * Compute the canonical request data that will be included in the data to sign with the request.\n     * \n     * @returns {string} the canonical request data\n     */\n    buildCanonicalRequestData() {\n        return this.computeCanonicalRequestData(this.canonicalHeaderNames());\n    }\n\n    /**\n     * Compute the canonical request data that will be included in the data to sign with the request,\n     * using a specific set of HTTP header names to sign.\n     * \n     * @param {string[]} sortedLowercaseHeaderNames the sorted, lower-cased HTTP header names to sign with the request\n     * @returns {string} the canonical request data\n     * @private\n     */\n    computeCanonicalRequestData(sortedLowercaseHeaderNames) {\n        // 1: HTTP verb\n        var result = this.httpMethod +'\\n';\n\n        // 2: Canonical URI\n        result += this.requestPath + '\\n';\n\n        // 3: Canonical query string\n        result += this.canonicalQueryParameters() + '\\n';\n\n        // 4: Canonical headers\n        result += this.canonicalHeaders(sortedLowercaseHeaderNames); // already includes newline\n\n        // 5: Signed header names\n        result += this.canonicalSignedHeaderNames(sortedLowercaseHeaderNames) + '\\n';\n\n        // 6: Content SHA256, hex encoded\n        result += this.canonicalContentSHA256();\n\n        return result;\n    }\n\n    /**\n     * Compute the signing key, from a secret key.\n     * \n     * @param {string} secretKey the secret key string \n     * @returns {CryptoJS#Hash} the computed key\n     * @private\n     */\n    computeSigningKey(secretKey) {\n        const datestring = iso8601Date(this.requestDate);\n        const key = HmacSHA256('snws2_request', HmacSHA256(datestring, 'SNWS2' + secretKey));\n        return key;\n    }\n\n    /**\n     * Compute the data to be signed by the signing key.\n     * \n     * @param {string} canonicalRequestData the request data, returned from {@link module:net~AuthorizationV2Builder#buildCanonicalRequestData}\n     * @returns {string} the data to sign\n     * @private\n     */\n    computeSignatureData(canonicalRequestData) {\n        /*- signature data is like:\n\n            SNWS2-HMAC-SHA256\\n\n            20170301T120000Z\\n\n            Hex(SHA256(canonicalRequestData))\n        */\n        return \"SNWS2-HMAC-SHA256\\n\" + iso8601Date(this.requestDate, true) + \"\\n\"\n                + Hex.stringify(SHA256(canonicalRequestData));\n    }\n\n    /**\n     * Compute a HTTP `Authorization` header value from the configured properties\n     * on the builder, using the provided signing key.\n     * \n     * @param {CryptoJS#Hash} signingKey the key to sign the computed signature data with\n     * @returns {string} the SNWS2 HTTP Authorization header value\n     * @private\n     */\n    buildWithKey(signingKey) {\n        const sortedHeaderNames = this.canonicalHeaderNames();\n        const canonicalReq = this.computeCanonicalRequestData(sortedHeaderNames);\n        const signatureData = this.computeSignatureData(canonicalReq);\n        const signature = Hex.stringify(HmacSHA256(signatureData, signingKey));\n        let result = 'SNWS2 Credential=' + this.tokenId\n            + ',SignedHeaders=' + sortedHeaderNames.join(';')\n            + ',Signature=' +signature;\n        return result;\n    }\n\n    /**\n     * Compute a HTTP `Authorization` header value from the configured\n     * properties on the builder, computing a new signing key based on the\n     * configured {@link module:net~AuthorizationV2Builder#date}.\n     *\n     * @param {string} tokenSecret the secret to sign the authorization with\n     * @return {string} the SNWS2 HTTP Authorization header value\n     */\n    build(tokenSecret) {\n        const signingKey = this.computeSigningKey(tokenSecret);\n        return this.buildWithKey(signingKey);\n    }\n\n    /**\n     * Compute a HTTP `Authorization` header value from the configured\n     * properties on the builder, using a signing key configured from a previous\n     * call to {@link module:net~AuthorizationV2Builder#saveSigningKey}.\n     *\n     * @return {string} the SNWS2 HTTP Authorization header value.\n     */\n    buildWithSavedKey() {\n        return this.buildWithKey(this.signingKey);\n    }\n\n}\n\n/**\n * @function stringMatchFn\n * @param {string} e the element to test\n * @returns {boolean} `true` if the element matches\n * @private\n */\n\n\n/**\n * Create a case-insensitive string matching function.\n * \n * @param {string} value the string to perform the case-insensitive comparison against\n * @returns {stringMatchFn} a matching function that performs a case-insensitive comparison\n * @private\n */\nfunction caseInsensitiveEqualsFn(value) {\n    const valueLc = value.toLowerCase();\n    return e => valueLc === e.toString().toLowerCase();\n}\n\n/**\n * Create a new array of lower-cased and sorted strings from another array.\n * \n * @param {string[]} items the items to lower-case and sort\n * @returns {string[]} a new array of the lower-cased and sorted items\n * @private\n */\nfunction lowercaseSortedArray(items) {\n    const sortedItems = [];\n    const len = items.length;\n    for ( let i = 0; i < len; i += 1 ) {\n        sortedItems.push(items[i].toLowerCase());\n    }\n    sortedItems.sort();\n    return sortedItems;\n}\n\nfunction _hexEscapeChar(c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase();\n}\n\nfunction _encodeURIComponent(str) {\n  return encodeURIComponent(str).replace(/[!'()*]/g, _hexEscapeChar);\n}\n\nObject.defineProperties(AuthorizationV2Builder, {\n    /**\n     * The hex-encoded value for an empty SHA256 digest value.\n     * \n     * @memberof AuthorizationV2Builder\n     * @readonly\n     * @type {string}\n     */\n    EMPTY_STRING_SHA256_HEX:    { value: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855' },\n\n    /**\n     * The SolarNetwork V2 authorization scheme.\n     * \n     * @memberof AuthorizationV2Builder\n     * @readonly\n     * @type {string}\n     */\n    SNWS2_AUTH_SCHEME:          { value: 'SNWS2' },\n});\n\nexport default AuthorizationV2Builder;\n","import Configuration from '../util/configuration';\nimport Environment from './environment';\n\n/**\n * A utility class for helping to compose SolarNet URLs for the REST API.\n *\n * This class is essentially abstract and meant to have mixin helper objects extend it.\n * @alias module:net~UrlHelper\n */\nclass UrlHelper {\n\n    /**\n     * Constructor.\n     *\n     * @param {module:net~Environment|object} [environment] the optional initial environment to use;\n     *        if a non-`Environment` object is passed then the properties of that object will\n     *        be used to construct a new `Environment` instance\n     */\n    constructor(environment) {\n        let env = (environment instanceof Environment ? environment\n            : new Environment(environment));\n        \n        /**\n         * The environment associated with this helper.\n         * @member {module:net~Environment}\n         */\n        this.environment = env;\n\n        this._parameters = new Configuration();\n    }\n\n    /**\n     * Get a parameters object that can be used to hold URL variables.\n     * \n     * @readonly\n     * @type {module:util~Configuration}\n     */\n    get parameters() {\n        return this._parameters;\n    }\n\n    /**\n     * Get or set an environment parameter.\n     * \n     * This is a shortcut for calling {@link module:net~Configuration#value} on the\n     * `environment` object.\n     * \n     * @param {string} key the environment parameter name to get\n     * @param {object} [val] the optional value to set\n     * @returns {object} when called as a getter, the environment parameter value;\n     *                   when called as a setter, the environment parameters object\n     */\n    env(...args) {\n        return this.environment.value(...args);\n    }\n\n    /**\n     * Get or set a parameter.\n     * \n     * This is a shortcut for calling {@link module:net~Configuration#value} on the\n     * `parameters` object.\n     * \n     * @param {string} key the parameter name to get\n     * @param {Object} [val] the optional value to set\n     * @returns {Object} when called as a getter, the parameter value;\n     *                   when called as a setter, the parameters object\n     */\n    parameter(...args) {\n        return this._parameters.value(...args);\n    }\n\n    /**\n     * Get a URL for just the SolarNet host, without any path.\n     *\n     * @returns {string} the URL to the SolarNet host\n     */\n    hostUrl() {\n        const tls = this.environment.useTls();\n        const port = +this.environment.value('port');\n\t\tlet url = 'http' +(tls ? 's' : '') +'://' +this.environment.value('host');\n        if ( (tls && port > 0 && port !== 443) || (!tls && port > 0 && port !== 80) ) {\n            url += ':' +port;\n        }\n        return url;\n    }\n    \n    /**\n     * Get a URL for just the SolarNet host using the WebSocket protocol, without any path.\n     * \n     * @returns {string} the URL to the SolarNet host WebSocket\n     */\n    hostWebSocketUrl() {\n        const tls = this.environment.useTls();\n        const port = +this.environment.value('port');\n\t\tlet url = 'ws' +(tls ? 's' : '') +'://' +this.environment.value('host');\n        if ( (tls && port > 0 && port !== 443) || (!tls && port > 0 && port !== 80) ) {\n            url += ':' +port;\n        }\n        return url;\n    }\n\n\t/**\n\t * Get the base URL to the REST API.\n\t * \n\t * This implementation is a stub, meant for subclasses to override. This implementation\n     * simply returns {@link module:net~UrlHelper#hostUrl}.\n\t * \n     * @abstract\n\t * @returns {string} the base URL to the REST API\n\t */\n\tbaseUrl() {\n\t\treturn this.hostUrl();\n\t}\n\n    /**\n     * Replace occurances of URL template variables with values from the `parameters`\n     * property and append to the host URL.\n     * \n     * This method provides a way to resolve an absolute URL based on the configured\n     * environment and parameters on this object.\n     * \n     * @param {string} template a URL path template\n     * @returns {string} an absolute URL\n     * @see module:net~UrlHelper#resolveTemplateUrl\n     */\n    resolveTemplatePath(template) {\n        return this.hostUrl() + this.resolveTemplateUrl(template);\n    }\n\n     /**\n     * Replace occurances of URL template variables with values from the `parameters`\n     * property.\n     * \n     * URL template variables are specified as `{<em>name</em>}`. The variable\n     * will be replaced by the value associated with property `name` in the\n     * `parameters` object. The value will be URI encoded.\n     * \n     * @param {string} template a URL template\n     * @returns {string} the URL with template variables resolved\n     */\n   resolveTemplateUrl(template) {\n        return UrlHelper.resolveTemplateUrl(template, this._parameters);\n    }\n\n    /**\n     * Replace occurances of URL template variables with values from a parameter object.\n     * \n     * URL template variables are specified as `{<em>name</em>}`. The variable\n     * will be replaced by the value associated with property `name` in the\n     * provided parameter object. The value will be URI encoded.\n     * \n     * @param {string} template a URL template\n     * @param {object} params an object whose properties should serve as template variables\n     * @returns {string} the URL\n     */\n    static resolveTemplateUrl(template, params) {\n        return template.replace(/\\{([^}]+)\\}/g, function(match, variableName) {\n            let variableValue = params[variableName];\n            return (variableValue !== undefined ? encodeURIComponent(variableValue) : '');\n        });\n    }\n\n}\n\nexport default UrlHelper;\n","const LocationIdsKey = 'locationIds';\nconst SourceIdsKey = 'sourceIds';\n\n/**\n * Create a LocationUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~LocationUrlHelperMixin} the mixin class\n */\nconst LocationUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds support for SolarLocation properties to a {@link module:net~UrlHelper}.\n * \n * @mixin\n * @alias module:net~LocationUrlHelperMixin\n */\nclass extends superclass {\n\n    /**\n     * The first available location ID from the `locationIds` property.\n     * Setting this replaces any existing location IDs with an array of just that value.\n     * @type {number}\n     */\n    get locationId() {\n        const locationIds = this.locationIds;\n        return (Array.isArray(locationIds) && locationIds.length > 0 ? locationIds[0] : null);\n    }\n\n    set locationId(locationId) {\n        this.parameter(LocationIdsKey, locationId ? [locationId] : null);\n    }\n\n    /**\n     * An array of location IDs, set on the `locationIds` parameter\n     * @type {number[]}\n     */\n    get locationIds() {\n        return this.parameter(LocationIdsKey);\n    }\n\n    set locationIds(locationIds) {\n        this.parameter(LocationIdsKey, locationIds);\n    }\n\n    /**\n     * The first available source ID from the `sourceIds` property.\n     * Setting this replaces any existing location IDs with an array of just that value.\n     * @type {string}\n     */\n    get sourceId() {\n        const sourceIds = this.sourceIds;\n        return (Array.isArray(sourceIds) && sourceIds.length > 0 ? sourceIds[0] : null);\n    }\n\n    set sourceId(sourceId) {\n        this.parameter(SourceIdsKey, sourceId ? [sourceId] : sourceId);\n    }\n\n    /**\n     * An array of source IDs, set on the `sourceIds` parameter\n     * @type {string[]}\n     */\n    get sourceIds() {\n        return this.parameter(SourceIdsKey);\n    }\n\n    set sourceIds(sourceIds) {\n        this.parameter(SourceIdsKey, sourceIds);\n    }\n\n    /**\n     * Generate a URL to find locations based on a search criteria.\n     * \n     * @param {module:domain~Location} filter the search criteria\n\t * @param {module:domain~SortDescriptor[]} [sorts] optional sort settings to use\n\t * @param {module:domain~Pagination} [pagination] optional pagination settings to use\n     * @returns {string} the generated URL\n     */\n    findLocationsUrl(filter, sorts, pagination) {\n        return this.baseUrl() + '/location?' +filter.toUriEncodingWithSorting(sorts, pagination);\n    }\n\n}\n\nexport default LocationUrlHelperMixin;\n","/** \n * The SolarQuery default path.\n * @type {string}\n * @alias module:net~SolarQueryDefaultPath\n */\nexport const SolarQueryDefaultPath = '/solarquery';\n\n/** \n * The {@link module:net~UrlHelper#parameters} key for the SolarQuery path.\n * @type {string}\n * @alias module:net~SolarQueryPathKey\n */\nexport const SolarQueryPathKey = 'solarQueryPath';\n\n/** \n * The SolarQuery REST API path.\n * @type {string}\n * @alias module:net~SolarQueryApiPathV1\n */\nexport const SolarQueryApiPathV1 = '/api/v1';\n\n/** \n * The {@link module:net~UrlHelper#parameters} key that holds a `boolean` flag to\n * use the public path scheme (`/pub`) when constructing URLs.\n * @type {string}\n * @alias module:net~SolarQueryPublicPathKey\n */\nexport const SolarQueryPublicPathKey = 'publicQuery';\n\n/**\n * Create a QueryUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~QueryUrlHelperMixin} the mixin class\n */\nconst QueryUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds SolarQuery specific support to {@link module:net~UrlHelper}.\n * \n * @mixin\n * @alias module:net~QueryUrlHelperMixin\n */\nclass extends superclass {\n\n    /**\n     * Flag to set the `publicQuery` environment parameter.\n     * @type {boolean}\n     */\n    get publicQuery() {\n        return !!this.env(SolarQueryPublicPathKey);\n    }\n\n    set publicQuery(value) {\n        this.env(SolarQueryPublicPathKey, !!value);\n    }\n\n\t/**\n\t * Get the base URL to the SolarQuery v1 REST API.\n\t * \n\t * The returned URL uses the configured environment to resolve\n\t * the `hostUrl`, the `solarQueryPath` context path,\n     * and the `publicQuery` boolean flag. If the context path is not \n     * available, it will default to `/solarquery`.\n\t * \n\t * @returns {string} the base URL to SolarQuery\n\t */\n\tbaseUrl() {\n\t\tconst path = this.env(SolarQueryPathKey) || SolarQueryDefaultPath;\n        const isPubPath = this.publicQuery;\n\t\treturn this.hostUrl() + path + SolarQueryApiPathV1\n            +(isPubPath ? '/pub' : '/sec');\n\t}\n\n};\n\nexport default QueryUrlHelperMixin;\n","import UrlHelper from './urlHelper';\nimport LocationUrlHelperMixin from './locationUrlHelperMixin';\nimport QueryUrlHelperMixin from './queryUrlHelperMixin'\n\n/**\n * Create a LocationDatumMetadataUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~LocationDatumMetadataUrlHelperMixin} the mixin class\n */\nconst LocationDatumMetadataUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds SolarNode datum metadata support to {@link module:net~UrlHelper}.\n * \n * <p>Location datum metadata is metadata associated with a specific location and source, i.e. \n * a `locationId` and a `sourceId`.\n * \n * @mixin\n * @alias module:net~LocationDatumMetadataUrlHelperMixin\n */\nclass extends superclass {\n\n    /**\n     * Get a base URL for location datum metadata operations using a specific location ID.\n     * \n     * @param {number} [locationId] a specific location ID to use; if not provided the `locationId` property of this class will be used\n     * @returns {string} the base URL\n     * @private\n     */\n    baseLocationDatumMetadataUrl(locationId) {\n        return this.baseUrl() + '/location/meta/' +(locationId || this.locationId);\n    }\n\n    locationDatumMetadataUrlWithSource(locationId, sourceId) {\n        let result = this.baseLocationDatumMetadataUrl(locationId);\n        let source = (sourceId || this.sourceId);\n        if ( sourceId !== null && source ) {\n            result += '?sourceId=' +encodeURIComponent(source);\n        }\n        return result;\n    }\n\n\t/**\n\t * Generate a URL for viewing datum metadata.\n     * \n     * If no `sourceId` is provided, then the API will return all available datum metadata for all sources.\n\t *\n\t * @param {number} [locationId] a specific location ID to use; if not provided the `locationId` property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to use; \n     *                            if not provided the `sourceId` property of this class will be used;\n     *                            if `null` then ignore any `sourceId` property of this class\n     * @returns {string} the URL\n\t */\n\tviewLocationDatumMetadataUrl(locationId, sourceId) {\n        return this.locationDatumMetadataUrlWithSource(locationId, sourceId);\n    }\n    \n\t/**\n\t * Generate a URL for adding (merging) datum metadata via a `POST` request.\n     * \n\t * @param {number} [locationId] a specific location ID to use; if not provided the `locationId` property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to use; if not provided the `sourceId` property of this class will be used\n     * @returns {string} the URL\n\t */\n    addLocationDatumMetadataUrl(locationId, sourceId) {\n        return this.locationDatumMetadataUrlWithSource(locationId, sourceId);\n    }\n\n\t/**\n\t * Generate a URL for setting datum metadata via a `PUT` request.\n     * \n\t * @param {number} [locationId] a specific location ID to use; if not provided the `locationId` property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to use; if not provided the `sourceId` property of this class will be used\n     * @returns {string} the URL\n\t */\n    replaceLocationDatumMetadataUrl(locationId, sourceId) {\n        return this.locationDatumMetadataUrlWithSource(locationId, sourceId);\n    }\n\n\t/**\n\t * Generate a URL for deleting datum metadata via a `DELETE` request.\n     * \n\t * @param {number} [locationId] a specific location ID to use; if not provided the `locationId` property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to use; if not provided the `sourceId` property of this class will be used\n     * @returns {string} the URL\n\t */\n    deleteLocationDatumMetadataUrl(locationId, sourceId) {\n        return this.locationDatumMetadataUrlWithSource(locationId, sourceId);\n    }\n\n\t/**\n\t * Generate a URL for searching for location metadata.\n\t * \n     * @param {module:domain~DatumFilter} [filter] a search filter; the `locationIds`, `sourceIds`, `tags`,\n\t *                                    `query`, and `location` properties are supported \n\t * @param {module:domain~SortDescriptor[]} [sorts] optional sort settings to use\n\t * @param {module:domain~Pagination} [pagination] optional pagination settings to use\n\t * @returns {string} the URL\n\t */\n\tfindLocationDatumMetadataUrl(filter, sorts, pagination) {\n\t\tlet result = this.baseUrl() + '/location/meta'\n\t\tlet params = filter.toUriEncodingWithSorting(sorts, pagination);\n\t\tif ( params.length > 0 ) {\n\t\t\tresult += '?' + params;\n\t\t}\n\t\treturn result;\n\t}\n\n};\n\n/**\n * A concrete {@link module:net~UrlHelper} with the {@link module:net~LocationDatumMetadataUrlHelperMixin},  \n * {@link module:net~QueryUrlHelperMixin}, and {@link module:net~LocationUrlHelperMixin} mixins.\n * \n * @mixes module:net~LocationDatumMetadataUrlHelperMixin\n * @mixes module:net~QueryUrlHelperMixin\n * @mixes module:net~LocationUrlHelperMixin\n * @extends module:net~UrlHelper\n * @alias module:net~LocationDatumMetadataUrlHelper\n */\nclass LocationDatumMetadataUrlHelper extends LocationDatumMetadataUrlHelperMixin(QueryUrlHelperMixin(LocationUrlHelperMixin(UrlHelper))) {\n\n}\n\nexport default LocationDatumMetadataUrlHelperMixin;\nexport { LocationDatumMetadataUrlHelper };\n","import { dateTimeUrlFormat } from '../format/date';\nimport UrlHelper from './urlHelper';\nimport LocationUrlHelperMixin from './locationUrlHelperMixin';\nimport QueryUrlHelperMixin from './queryUrlHelperMixin';\n\n/**\n * Create a LocationDatumUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~LocationDatumUrlHelperMixin} the mixin class\n */\nconst LocationDatumUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds SolarLocation datum query support to {@link module:net~UrlHelper}.\n * \n * <p>This mixin is commonly mixed with the {@link module:net~QueryUrlHelperMixin} to pick\n * up support for the SolarQuery base URL.</p>\n * \n * <p>This mixin is commonly mixed with the {@link module:net~LocationUrlHelperMixin} to\n * pick up support for `locationId` and `sourceId` properties.</p>\n * \n * @mixin\n * @alias module:net~LocationDatumUrlHelperMixin\n */\nclass extends superclass {\n\n\t/**\n\t * Generate a URL for the \"reportable interval\" for a location, optionally limited to a specific source ID.\n\t *\n     * If no source IDs are provided, then the reportable interval query will return an interval for\n     * all available sources.\n     *\n\t * @param {number} [locationId] a specific location ID to use; if not provided the `locationId` property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to limit query to; \n     *                 if not provided the `sourceId` property of this class will be used;\n     *                 if `null` the `sourceId` property of this class will be ignored\n\t * @returns {string} the URL\n\t */\n\treportableIntervalUrl(locationId, sourceId) {\n        let url = this.baseUrl() +'/location/datum/interval?locationId=' \n            +(locationId || this.locationId);\n        let source = (sourceId || this.sourceId);\n\t\tif ( sourceId !== null && source ) {\n\t\t\turl += '&sourceId=' + encodeURIComponent(source);\n\t\t}\n\t\treturn url;\n\t}\n\n\t/**\n\t * Generate a URL for finding the available source IDs for a location or metadata filter.\n\t * \n\t * @param {number} [locationId] a specific location ID to use; if not provided the `locationId`\n     *                              property of this class will be used\n\t * @param {Date} [startDate] a start date to limit the search to\n     * @param {Date} [endDate] an end date to limit the search to\n\t * @returns {string} the URL\n\t */\n\tavailableSourcesUrl(locationId, startDate, endDate) {\n\t\tlet result = this.baseUrl() + '/location/datum/sources?locationId='\n            +(locationId || this.locationId);\n        if ( startDate instanceof Date ) {\n            result += '&start=' +encodeURIComponent(dateTimeUrlFormat(startDate));\n        }\n        if ( endDate instanceof Date ) {\n            result += '&end=' +encodeURIComponent(dateTimeUrlFormat(endDate));\n        }\n\t\treturn result;\n\t}\n\n\t/**\n\t * Generate a URL for querying for location datum, in either raw or aggregate form.\n\t * \n\t * If the `datumFilter` has an `aggregate` value set, then aggregate results will be\n\t * returned by SolarNet.\n\t * \n\t * @param {module:domain~DatumFilter} datumFilter the search criteria\n\t * @param {module:domain~SortDescriptor[]} [sorts] optional sort settings to use\n\t * @param {module:domain~Pagination} [pagination] optional pagination settings to use\n\t * @returns {string} the URL\n\t */\n\tlistDatumUrl(datumFilter, sorts, pagination) {\n\t\tlet result = this.baseUrl() + '/location/datum/list';\n\t\tlet params = (datumFilter ? datumFilter.toUriEncodingWithSorting(sorts, pagination) : '');\n\t\tif ( params.length > 0 ) {\n\t\t\tresult += '?' + params;\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Generate a URL for querying for the most recent datum.\n\t * \n\t * @param {module:domain~DatumFilter} datumFilter the search criteria\n\t * @param {module:domain~SortDescriptor[]} [sorts] optional sort settings to use\n\t * @param {module:domain~Pagination} [pagination] optional pagination settings to use\n\t * @returns {string} the URL\n\t */\n\tmostRecentDatumUrl(datumFilter, sorts, pagination) {\n\t\tlet result = this.baseUrl() + '/location/datum/mostRecent';\n\t\tlet params = (datumFilter ? datumFilter.toUriEncodingWithSorting(sorts, pagination) : '');\n\t\tif ( params.length > 0 ) {\n\t\t\tresult += '?' + params;\n\t\t}\n\t\treturn result;\n\t}\n\n};\n\n/**\n * A concrete {@link module:net~UrlHelper} with the {@link module:net~LocationDatumUrlHelperMixin}, \n * {@link module:net~QueryUrlHelperMixin}, and {@link module:net~LocationUrlHelperMixin} mixins.\n * \n * @mixes module:net~LocationDatumUrlHelperMixin\n * @mixes module:net~QueryUrlHelperMixin\n * @mixes module:net~LocationUrlHelperMixin\n * @extends module:net~UrlHelper\n * @alias module:net~LocationDatumUrlHelper\n */\nclass LocationDatumUrlHelper extends LocationDatumUrlHelperMixin(QueryUrlHelperMixin(LocationUrlHelperMixin(UrlHelper))) {\n\n}\n\nexport default LocationDatumUrlHelperMixin;\nexport { LocationDatumUrlHelper };\n","const NodeIdsKey = 'nodeIds';\nconst SourceIdsKey = 'sourceIds';\n\n/**\n * Create a NodeUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~NodeUrlHelperMixin} the mixin class\n */\nconst NodeUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds support for SolarNode properties to a {@link module:net~UrlHelper}.\n * \n * @mixin\n * @alias module:net~NodeUrlHelperMixin\n */\nclass extends superclass {\n\n    /**\n     * The first available node ID from the `nodeIds` property.\n     * Setting this replaces any existing node IDs with an array of just that value.\n     * @type {number}\n     */\n    get nodeId() {\n        const nodeIds = this.nodeIds;\n        return (Array.isArray(nodeIds) && nodeIds.length > 0 ? nodeIds[0] : null);\n    }\n\n    set nodeId(nodeId) {\n        this.parameter(NodeIdsKey, nodeId ? [nodeId] : null);\n    }\n\n    /**\n     * An array of node IDs, set on the `nodeIds` parameter\n     * @type {number[]}\n     */\n    get nodeIds() {\n        return this.parameter(NodeIdsKey);\n    }\n\n    set nodeIds(nodeIds) {\n        this.parameter(NodeIdsKey, nodeIds);\n    }\n\n    /**\n     * The first available source ID from the `sourceIds` property.\n     * Setting this replaces any existing node IDs with an array of just that value.\n     * @type {string}\n     */\n    get sourceId() {\n        const sourceIds = this.sourceIds;\n        return (Array.isArray(sourceIds) && sourceIds.length > 0 ? sourceIds[0] : null);\n    }\n\n    set sourceId(sourceId) {\n        this.parameter(SourceIdsKey, sourceId ? [sourceId] : sourceId);\n    }\n\n    /**\n     * An array of source IDs, set on the `sourceIds` parameter\n     * @type {string[]}\n     */\n    get sourceIds() {\n        return this.parameter(SourceIdsKey);\n    }\n\n    set sourceIds(sourceIds) {\n        this.parameter(SourceIdsKey, sourceIds);\n    }\n\n}\n\nexport default NodeUrlHelperMixin;\n","import Pagination from '../domain/pagination';\nimport SortDescriptor from '../domain/sortDescriptor';\nimport UrlHelper from './urlHelper';\nimport NodeUrlHelperMixin from './nodeUrlHelperMixin';\nimport QueryUrlHelperMixin from './queryUrlHelperMixin'\n\n\n/**\n * Create a NodeDatumUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~NodeDatumMetadataUrlHelperMixin} the mixin class\n */\nconst NodeDatumMetadataUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds SolarNode datum metadata support to {@link module:net~UrlHelper}.\n * \n * <p>Datum metadata is metadata associated with a specific node and source, i.e. \n * a <code>nodeId</code> and a <code>sourceId</code>.\n * \n * @mixin\n * @alias module:net~NodeDatumMetadataUrlHelperMixin\n */\nclass extends superclass {\n\n    /**\n     * Get a base URL for datum metadata operations using a specific node ID.\n     * \n     * @param {number} [nodeId] a specific node ID to use; if not provided the <code>nodeId</code> property of this class will be used\n     * @returns {string} the base URL\n     * @private\n     */\n    baseNodeDatumMetadataUrl(nodeId) {\n        return this.baseUrl() + '/datum/meta/' +(nodeId || this.nodeId);\n    }\n\n    nodeDatumMetadataUrlWithSource(nodeId, sourceId) {\n        let result = this.baseNodeDatumMetadataUrl(nodeId);\n        let source = (sourceId || this.sourceId);\n        if ( sourceId !== null && source ) {\n            result += '?sourceId=' +encodeURIComponent(source);\n        }\n        return result;\n    }\n\n\t/**\n\t * Generate a URL for viewing datum metadata.\n     * \n     * If no <code>sourceId</code> is provided, then the API will return all available datum metadata for all sources.\n\t *\n\t * @param {number} [nodeId] a specific node ID to use; if not provided the <code>nodeId</code> property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to use; \n     *                            if not provided the <code>sourceId</code> property of this class will be used;\n     *                            if <code>null</code> then ignore any <code>sourceId</code> property of this class\n     * @returns {string} the URL\n\t */\n\tviewNodeDatumMetadataUrl(nodeId, sourceId) {\n        return this.nodeDatumMetadataUrlWithSource(nodeId, sourceId);\n    }\n    \n\t/**\n\t * Generate a URL for adding (merging) datum metadata via a <code>POST</code> request.\n     * \n\t * @param {number} [nodeId] a specific node ID to use; if not provided the <code>nodeId</code> property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to use; if not provided the <code>sourceId</code> property of this class will be used\n     * @returns {string} the URL\n\t */\n    addNodeDatumMetadataUrl(nodeId, sourceId) {\n        return this.nodeDatumMetadataUrlWithSource(nodeId, sourceId);\n    }\n\n\t/**\n\t * Generate a URL for setting datum metadata via a <code>PUT</code> request.\n     * \n\t * @param {number} [nodeId] a specific node ID to use; if not provided the <code>nodeId</code> property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to use; if not provided the <code>sourceId</code> property of this class will be used\n     * @returns {string} the URL\n\t */\n    replaceNodeDatumMetadataUrl(nodeId, sourceId) {\n        return this.nodeDatumMetadataUrlWithSource(nodeId, sourceId);\n    }\n\n\t/**\n\t * Generate a URL for deleting datum metadata via a <code>DELETE</code> request.\n     * \n\t * @param {number} [nodeId] a specific node ID to use; if not provided the <code>nodeId</code> property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to use; if not provided the <code>sourceId</code> property of this class will be used\n     * @returns {string} the URL\n\t */\n    deleteNodeDatumMetadataUrl(nodeId, sourceId) {\n        return this.nodeDatumMetadataUrlWithSource(nodeId, sourceId);\n    }\n\n\t/**\n\t * Generate a URL for searching for datum metadata.\n\t * \n\t * @param {number} [nodeId] a specific node ID to use; if not provided the <code>nodeId</code> property of this class will be used\n\t * @param {string} [sourceId] a specific source ID to use; \n     *                            if not provided the <code>sourceId</code> property of this class will be used;\n     *                            if <code>null</code> then ignore any <code>sourceId</code> property of this class\n\t * @param {SortDescriptor[]} [sorts] optional sort settings to use\n\t * @param {module:domain~Pagination} [pagination] optional pagination settings to use\n\t * @returns {string} the URL\n\t */\n\tfindNodeDatumMetadataUrl(nodeId, sourceId, sorts, pagination) {\n        let result = this.baseNodeDatumMetadataUrl(nodeId);\n\t\tlet params = '';\n        let source = (sourceId || this.sourceId);\n        if ( sourceId !== null && source ) {\n            params += 'sourceId=' +encodeURIComponent(source);\n        }\n\t\tif ( Array.isArray(sorts) ) {\n\t\t\tsorts.forEach((sort, i) => {\n\t\t\t\tif ( sort instanceof SortDescriptor ) {\n\t\t\t\t\tif ( params.length > 0 ) {\n\t\t\t\t\t\tparams += '&';\n\t\t\t\t\t}\n\t\t\t\t\tparams += sort.toUriEncoding(i);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif ( pagination instanceof Pagination ) {\n\t\t\tif ( params.length > 0 ) {\n\t\t\t\tparams += '&';\n\t\t\t}\n\t\t\tparams += pagination.toUriEncoding();\n\t\t}\n\t\tif ( params.length > 0 ) {\n\t\t\tresult += '?' + params;\n\t\t}\n\t\treturn result;\n\t}\n\n};\n\n/**\n * A concrete {@link module:net~UrlHelper} with the {@link module:net~NodeDatumMetadataUrlHelperMixin},  \n * {@link module:net~QueryUrlHelperMixin}, and {@link module:net~NodeUrlHelperMixin} mixins.\n * \n * @mixes module:net~NodeDatumMetadataUrlHelperMixin\n * @mixes module:net~QueryUrlHelperMixin\n * @mixes module:net~NodeUrlHelperMixin\n * @extends module:net~UrlHelper\n * @alias module:net~NodeDatumMetadataUrlHelper\n */\nclass NodeDatumMetadataUrlHelper extends NodeDatumMetadataUrlHelperMixin(QueryUrlHelperMixin(NodeUrlHelperMixin(UrlHelper))) {\n\n}\n\nexport default NodeDatumMetadataUrlHelperMixin;\nexport { NodeDatumMetadataUrlHelper };\n","import DatumFilter from '../domain/datumFilter';\nimport UrlHelper from './urlHelper';\nimport NodeUrlHelperMixin from './nodeUrlHelperMixin';\nimport QueryUrlHelperMixin from './queryUrlHelperMixin';\n\n/**\n * Create a NodeDatumUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~NodeDatumUrlHelperMixin} the mixin class\n */\nconst NodeDatumUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds SolarNode datum query support to {@link module:net~UrlHelper}.\n * \n * @mixin\n * @alias module:net~NodeDatumUrlHelperMixin\n */\nclass extends superclass {\n\n\t/**\n\t * Generate a URL for the \"reportable interval\" for a node, optionally limited to a specific set of source IDs.\n\t *\n     * If no source IDs are provided, then the reportable interval query will return an interval for\n     * all available sources.\n     *\n\t * @param {number} [nodeId] a specific node ID to use; if not provided the `nodeId` property of this class will be used\n\t * @param {string[]} [sourceIds] an array of source IDs to limit query to; if not provided the `sourceIds` property of this class will be used\n\t * @returns {string} the URL\n\t */\n\treportableIntervalUrl(nodeId, sourceIds) {\n\t\tlet url = (this.baseUrl() +'/range/interval?nodeId=' +(nodeId || this.nodeId));\n        let sources = (sourceIds || this.sourceIds);\n\t\tif ( Array.isArray(sources) && sources.length > 0 ) {\n\t\t\turl += '&sourceIds=' + sources.map(e => encodeURIComponent(e)).join(',');\n\t\t}\n\t\treturn url;\n\t}\n\n\t/**\n\t * Generate a URL for finding the available source IDs for a node or metadata filter.\n\t * \n\t * @param {module:domain~DatumFilter} datumFilter the search criteria, which can define `nodeId`, `startDate`, `endDate`,\n\t *                                                and `metadataFilter` properties to limit the results to; if `nodeId` not\n\t *                                                provided the `nodeIds` property of this class will be used\n\t * @param {string} [metadataFilter] the LDAP-style metadata filter\n\t * @returns {string} the URL\n\t */\n\tavailableSourcesUrl(datumFilter) {\n\t\tconst filter = (datumFilter || this.datumFilter());\n\t\tlet result = this.baseUrl() + '/range/sources';\n\t\tconst params = filter.toUriEncoding();\n\t\tif ( params.length > 0 ) {\n\t\t\tresult += '?' + params;\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Generate a URL for querying for datum, in either raw or aggregate form.\n\t * \n\t * If the `datumFilter` has an `aggregate` value set, then aggregate results will be\n\t * returned by SolarNet.\n\t * \n\t * @param {module:domain~DatumFilter} datumFilter the search criteria\n\t * @param {module:domain~SortDescriptor[]} [sorts] optional sort settings to use\n\t * @param {module:domain~Pagination} [pagination] optional pagination settings to use\n\t * @returns {string} the URL\n\t */\n\tlistDatumUrl(datumFilter, sorts, pagination) {\n\t\tlet result = this.baseUrl() + '/datum/list';\n\t\tconst filter = (datumFilter || this.datumFilter());\n\t\tconst params = filter.toUriEncodingWithSorting(sorts, pagination);\n\t\tif ( params.length > 0 ) {\n\t\t\tresult += '?' + params;\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Get a new {@link module:domain~DatumFilter} configured with properties of this instance.\n\t * \n\t * This will configure the following properties:\n\t * \n\t *  * `nodeIds`\n\t *  * `sourceIds`\n\t * \n\t * @returns {module:domain~DatumFilter} the filter\n\t */\n\tdatumFilter() {\n\t\tconst filter = new DatumFilter();\n\t\tlet v;\n\t\t\n\t\tv = this.nodeIds;\n\t\tif ( v ) {\n\t\t\tfilter.nodeIds = v;\n\t\t}\n\n\t\tv = this.sourceIds;\n\t\tif ( v ) {\n\t\t\tfilter.sourceIds = v;\n\t\t}\n\n\t\treturn filter;\n\t}\n\n\t/**\n\t * Generate a URL for querying for the most recent datum.\n\t * \n\t * @param {module:domain~DatumFilter} datumFilter the search criteria\n\t * @param {module:domain~SortDescriptor[]} [sorts] optional sort settings to use\n\t * @param {module:domain~Pagination} [pagination] optional pagination settings to use\n\t * @returns {string} the URL\n\t */\n\tmostRecentDatumUrl(datumFilter, sorts, pagination) {\n\t\tlet result = this.baseUrl() + '/datum/mostRecent';\n\t\tconst filter = (datumFilter || this.datumFilter());\n\t\tconst params = filter.toUriEncodingWithSorting(sorts, pagination);\n\t\tif ( params.length > 0 ) {\n\t\t\tresult += '?' + params;\n\t\t}\n\t\treturn result;\n\t}\n\n};\n\n/**\n * A concrete {@link module:net~UrlHelper} with the {@link module:net~NodeDatumUrlHelperMixin}, \n * {@link module:net~QueryUrlHelperMixin}, and {@link module:net~NodeUrlHelperMixin} mixins.\n * \n * @mixes module:net~NodeDatumUrlHelperMixin\n * @mixes module:net~QueryUrlHelperMixin\n * @mixes module:net~NodeUrlHelperMixin\n * @extends module:net~UrlHelper\n * @alias module:net~NodeDatumUrlHelper\n */\nclass NodeDatumUrlHelper extends NodeDatumUrlHelperMixin(QueryUrlHelperMixin(NodeUrlHelperMixin(UrlHelper))) {\n\n}\n\nexport default NodeDatumUrlHelperMixin;\nexport { NodeDatumUrlHelper };\n","/** \n * The SolarUser default path.\n * @type {string}\n * @alias module:net~SolarUserDefaultPath\n */\nexport const SolarUserDefaultPath = '/solaruser';\n\n/**\n * The {@link module:net~UrlHelper} parameters key for the SolarUser path.\n * @type {string}\n * @alias module:net~SolarUserPathKey\n */\nexport const SolarUserPathKey = 'solarUserPath';\n\n/** \n * The SolarUser REST API path.\n * @type {string}\n * @alias module:net~SolarUserApiPathV1\n */\nexport const SolarUserApiPathV1 = '/api/v1/sec';\n\nconst UserIdsKey = 'userIds';\n\n/**\n * Create a UserUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~UserUrlHelperMixin} the mixin class\n */\nconst UserUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds SolarUser specific support to {@link module:net~UrlHelper}.\n * \n * @mixin\n * @alias module:net~UserUrlHelperMixin\n */\nclass extends superclass {\n\n    /**\n     * Get the default user ID.\n     * \n     * This gets the first available user ID from the `userIds` property.\n     * \n     * @returns {number} the default user ID, or `null`\n     */\n    get userId() {\n        const userIds = this.parameter(UserIdsKey);\n        return (Array.isArray(userIds) && userIds.length > 0 ? userIds[0] : null);\n    }\n\n    /**\n     * Set the user ID.\n     * \n     * This will set the `userIds` property to a new array of just the given value.\n     * \n     * @param {number} userId the user ID to set\n     */\n    set userId(userId) {\n        this.parameter(UserIdsKey, [userId]);\n    }\n\n    get userIds() {\n        return this.parameter(UserIdsKey);\n    }\n\n    set userIds(userIds) {\n        this.parameter(UserIdsKey, userIds);\n    }\n\n\t/**\n\t * Get the base URL to the SolarUser v1 REST API.\n\t * \n\t * The returned URL uses the configured environment to resolve\n\t * the `hostUrl` and a `solarUserPath` context path.\n\t * If the context path is not available, it will default to \n\t * `/solaruser`.\n\t * \n\t * @returns {string} the base URL to SolarUser\n\t */\n\tbaseUrl() {\n\t\tconst path = this.env(SolarUserPathKey) || SolarUserDefaultPath;\n\t\treturn super.baseUrl() + path + SolarUserApiPathV1;\n\t}\n\n\t/**\n\t * Generate a URL to get a list of all active nodes for the user account.\n\t *\n\t * @return {string} the URL to access the user's active nodes\n\t */\n\tviewNodesUrl() {\n\t\treturn this.baseUrl() + '/nodes';\n\t}\n\n\t/**\n\t * Generate a URL to get a list of all pending nodes for the user account.\n\t *\n\t * @return {string} the URL to access the user's pending nodes\n\t */\n\tviewPendingNodesUrl() {\n\t\treturn this.baseUrl() + '/nodes/pending';\n\t}\n\n\t/**\n\t * Generate a URL to get a list of all archived nodes for the user account.\n\t *\n\t * @return {string} the URL to access the user's archived nodes\n\t */\n\tviewArchivedNodesUrl() {\n\t\treturn this.baseUrl() + '/nodes/archived';\n\t}\n\n\t/**\n\t * Generate a URL to update the archived status of a set of nodes via a `POST` request.\n\t *\n\t * @param {number|number[]|null} nodeId a specific node ID, or array of node IDs, to update; if not provided the \n\t *                                      `nodeIds` property of this class will be used\n\t * @param {boolean} archived `true` to mark the nodes as archived; `false` to un-mark\n\t *                           and return to normal status\n\t * @return {string} the URL to update the nodes archived status\n\t */\n\tupdateNodeArchivedStatusUrl(nodeId, archived) {\n\t\tconst nodeIds = Array.isArray(nodeId) ? nodeId : nodeId ? [nodeId] : this.nodeIds;\n\t\tlet result = this.baseUrl() + '/nodes/archived?nodeIds='\n\t\t\t+nodeIds.join(',') +'&archived='\n\t\t\t+(archived ? 'true' : 'false');\n\t\treturn result;\n\t}\n\n}\n\nexport default UserUrlHelperMixin;\n","import UrlHelper from './urlHelper';\nimport NodeUrlHelperMixin from './nodeUrlHelperMixin';\nimport UserUrlHelperMixin from './userUrlHelperMixin'\n\n/**\n * Create a NodeInstructionUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~NodeInstructionUrlHelperMixin} the mixin class\n */\nconst NodeInstructionUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds SolarNode instruction support to {@link module:net~UrlHelper}.\n * \n * @mixin\n * @alias module:net~NodeInstructionUrlHelperMixin\n */\nclass extends superclass {\n\n\t/**\n\t * Generate a URL to get all details for a specific instruction.\n\t * \n\t * @param {number} instructionId the instruction ID to get\n\t * @returns {string} the URL\n\t */\n\tviewInstructionUrl(instructionId) {\n\t\treturn (this.baseUrl() +'/instr/view?id=' +encodeURIComponent(instructionId));\n\t}\n\n\t/**\n\t * Generate a URL for viewing active instructions.\n\t * \n\t * @param {number} [nodeId] a specific node ID to use; if not provided the <code>nodeId</code> property of this class will be used\n\t * @returns {string} the URL\n\t */\n\tviewActiveInstructionsUrl(nodeId) {\n\t\treturn (this.baseUrl() +'/instr/viewActive?nodeId=' \n\t\t\t+(nodeId || this.nodeId));\n\t}\n\n\t/**\n\t * Generate a URL for viewing pending instructions.\n\t * \n\t * @param {number} [nodeId] a specific node ID to use; if not provided the <code>nodeId</code> property of this class will be used\n\t * @returns {string} the URL\n\t */\n\tviewPendingInstructionsUrl(nodeId) {\n\t\treturn (this.baseUrl() +'/instr/viewPending?nodeId=' \n\t\t\t+(nodeId || this.nodeId));\n\t}\n\n\t/**\n\t * Generate a URL for changing the state of an instruction.\n\t * \n\t * @param {number} instructionId the instruction ID to update\n\t * @param {InstructionState} state the instruction state to set\n\t * @returns {string} the URL\n\t * @see the {@link InstructionStates} enum for possible state values\n\t */\n\tupdateInstructionStateUrl(instructionId, state) {\n\t\treturn (this.baseUrl()\n\t\t\t+'/instr/updateState?id=' +encodeURIComponent(instructionId)\n\t\t\t+'&state=' +encodeURIComponent(state.name));\n\t}\n\n\t/**\n\t * Generate a URL for posting an instruction request.\n\t *\n\t * @param {string} topic the instruction topic.\n\t * @param {Object[]} [parameters] an array of parameter objects in the form <code>{name:n1, value:v1}</code>.\n\t * @param {number} [nodeId] a specific node ID to use; if not provided the <code>nodeId</code> property of this class will be used\n\t * @returns {string} the URL\n\t */\n\tqueueInstructionUrl(topic, parameters, nodeId) {\n\t\tvar url = (this.baseUrl()\n\t\t\t+'/instr/add?nodeId=' +(nodeId || this.nodeId)\n\t\t\t+'&topic=' +encodeURIComponent(topic));\n\t\tvar i, len;\n\t\tif ( Array.isArray(parameters) ) {\n\t\t\tfor ( i = 0, len = parameters.length; i < len; i++ ) {\n\t\t\t\turl += '&' +encodeURIComponent('parameters['+i+'].name') +'=' +encodeURIComponent(parameters[i].name)\n\t\t\t\t\t+ '&' +encodeURIComponent('parameters['+i+'].value') +'=' +encodeURIComponent(parameters[i].value);\n\t\t\t}\n\t\t}\n\t\treturn url;\n\t}\n\n\t/**\n\t * Create an instruction parameter suitable to passing to {@link NodeInstructionUrlHelperMixin#queueInstructionUrl}.\n\t * \n\t * @param {string} name the parameter name \n\t * @param {*} value the parameter value\n\t * @returns {object} with <code>name</code> and <code>value</code> properties\n\t */\n\tstatic instructionParameter(name, value) {\n\t\treturn {name:name, value:value};\n\t}\n};\n\n/**\n * A concrete {@link UrlHelper} with the {@link module:net~NodeInstructionUrlHelperMixin},  \n * {@link module:net~UserUrlHelperMixin}, and {@link module:net~NodeUrlHelperMixin} mixins.\n * \n * @mixes module:net~NodeInstructionUrlHelperMixin\n * @mixes module:net~UserUrlHelperMixin\n * @mixes module:net~NodeUrlHelperMixin\n * @extends module:net~UrlHelper\n * @alias module:net~NodeInstructionUrlHelper\n */\nclass NodeInstructionUrlHelper extends NodeInstructionUrlHelperMixin(UserUrlHelperMixin(NodeUrlHelperMixin(UrlHelper))) {\n\n}\n\n/**\n * The static {@link NodeInstructionUrlHelperMixin#instructionParameter} method so it can be imported directly.\n * \n * @alias module:net~instructionParameter\n */\nconst instructionParameter = NodeInstructionUrlHelper.instructionParameter;\n\nexport default NodeInstructionUrlHelperMixin;\nexport { instructionParameter, NodeInstructionUrlHelper };","import Pagination from '../domain/pagination';\nimport SortDescriptor from '../domain/sortDescriptor';\nimport UrlHelper from './urlHelper';\nimport NodeUrlHelperMixin from './nodeUrlHelperMixin';\nimport UserUrlHelperMixin from './userUrlHelperMixin'\n\n/**\n * Create a NodeMetadataUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~NodeMetadataUrlHelperMixin} the mixin class\n */\nconst NodeMetadataUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds SolarNode metadata support to {@link module:net~UrlHelper}.\n * \n * @mixin\n * @alias module:net~NodeMetadataUrlHelperMixin\n */\nclass extends superclass {\n\n\t/**\n\t * Generate a URL for viewing the configured node's metadata.\n\t *\n\t * @param {number} [nodeId] a specific node ID to use; if not provided the `nodeId` property of this class will be used\n\t * @returns {string} the URL\n\t */\n\tviewNodeMetadataUrl(nodeId) {\n\t\treturn (this.baseUrl() +'/nodes/meta/' \n\t\t\t+(nodeId || this.nodeId));\n\t}\n\n\t/**\n\t * Generate a URL for adding metadata to a node via a `POST` request.\n\t *\n\t * @param {number} [nodeId] a specific node ID to use; if not provided the `nodeId` property of this class will be used\n\t * @returns {string} the URL\n\t */\n\taddNodeMetadataUrl(nodeId) {\n\t\treturn this.viewNodeMetadataUrl(nodeId);\n\t}\n\n\t/**\n\t * Generate a URL for setting the metadata of a node via a `PUT` request.\n\t *\n\t * @param {number} [nodeId] a specific node ID to use; if not provided the `nodeId` property of this class will be used\n\t * @returns {string} the URL\n\t */\n\treplaceNodeMetadataUrl(nodeId) {\n\t\treturn this.viewNodeMetadataUrl(nodeId);\n\t}\n\n\t/**\n\t * Generate a URL for deleting the metadata of a node via a `DELETE` request.\n\t *\n\t * @param {number} [nodeId] a specific node ID to use; if not provided the `nodeId` property of this class will be used\n\t * @returns {string} the URL\n\t */\n\tdeleteNodeMetadataUrl(nodeId) {\n\t\treturn this.viewNodeMetadataUrl(nodeId);\n\t}\n\n\t/**\n\t * Generate a URL for searching for node metadata.\n\t * \n\t * @param {number|number[]} [nodeId] a specific node ID, or array of node IDs, to use; if not provided the \n\t *                                   `nodeIds` property of this class will be used, unless `null`\n\t *                                   is passed in which case no node IDs will be added to the URL so that all available\n\t *                                   node metadata objects will be returned\n\t * @param {module:domain~SortDescriptor[]} [sorts] optional sort settings to use\n\t * @param {module:domain~Pagination} [pagination] optional pagination settings to use\n\t * @returns {string} the URL\n\t */\n\tfindNodeMetadataUrl(nodeId, sorts, pagination) {\n\t\tconst nodeIds = (Array.isArray(nodeId) ? nodeId : nodeId ? [nodeId] : nodeId !== null ? this.nodeIds : undefined);\n\t\tlet result = this.baseUrl() + '/nodes/meta';\n\t\tlet params = '';\n\t\tif ( Array.isArray(nodeIds) ) {\n\t\t\tparams += 'nodeIds=' +nodeIds.join(',');\n\t\t}\n\t\tif ( Array.isArray(sorts) ) {\n\t\t\tsorts.forEach((sort, i) => {\n\t\t\t\tif ( sort instanceof SortDescriptor ) {\n\t\t\t\t\tif ( params.length > 0 ) {\n\t\t\t\t\t\tparams += '&';\n\t\t\t\t\t}\n\t\t\t\t\tparams += sort.toUriEncoding(i);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif ( pagination instanceof Pagination ) {\n\t\t\tif ( params.length > 0 ) {\n\t\t\t\tparams += '&';\n\t\t\t}\n\t\t\tparams += pagination.toUriEncoding();\n\t\t}\n\t\tif ( params.length > 0 ) {\n\t\t\tresult += '?' + params;\n\t\t}\n\t\treturn result;\n\t}\n\n};\n\n/**\n * A concrete {@link module:net~UrlHelper} with the {@link module:net~NodeMetadataUrlHelperMixin},  \n * {@link module:net~UserUrlHelperMixin}, and {@link module:net~NodeUrlHelperMixin} mixins.\n * \n * @mixes module:net~NodeMetadataUrlHelperMixin\n * @mixes module:net~UserUrlHelperMixin\n * @mixes module:net~NodeUrlHelperMixin\n * @extends module:net~UrlHelper\n * @alias module:net~NodeMetadataUrlHelper\n */\nclass NodeMetadataUrlHelper extends NodeMetadataUrlHelperMixin(UserUrlHelperMixin(NodeUrlHelperMixin(UrlHelper))) {\n\n}\n\nexport default NodeMetadataUrlHelperMixin;\nexport { NodeMetadataUrlHelper };\n","import UrlHelper from './urlHelper';\nimport UserUrlHelperMixin from './userUrlHelperMixin'\n\n/**\n * Create a UserAuthTokenUrlHelperMixin class.\n *\n * @param {module:net~UrlHelper} superclass the UrlHelper class to mix onto\n * @return {module:net~UserAuthTokenUrlHelperMixin} the mixin class\n */\nconst UserAuthTokenUrlHelperMixin = (superclass) => \n\n/**\n * A mixin class that adds security token support to a SolarUser {@link module:net~UrlHelper}.\n * \n * @mixin\n * @alias module:net~UserAuthTokenUrlHelperMixin\n */\nclass extends superclass {\n\n    /**\n     * Generate a URL for listing all available auth tokens.\n     * \n\t * @returns {string} the URL\n     */\n    listAllAuthTokensUrl() {\n        return this.baseUrl() + '/user/auth-tokens';\n    }\n\n    /**\n     * Generate a URL for creating a new auth token, via a `POST` request.\n     * \n     * The request body accepts a {@link module:domain~SecurityPolicy} JSON document.\n     * \n     * @param {AuthTokenType} type the auth token type to generate\n\t * @returns {string} the URL\n     */\n    generateAuthTokenUrl(type) {\n        return this.baseUrl() + '/user/auth-tokens/generate/' +type.name;\n    }\n\n    /**\n     * Generate a URL for accessing an auth token.\n     * \n     * @param {string} tokenId the token ID\n\t * @returns {string} the URL\n     * @private\n     */\n    authTokenUrl(tokenId) {\n        return this.baseUrl() + '/user/auth-tokens/' +encodeURIComponent(tokenId);\n    }\n\n    /**\n     * Generate a URL for deleting an auth token, via a `DELETE` request.\n     * \n     * @param {string} tokenId the token ID to delete\n\t * @returns {string} the URL\n     */\n    deleteAuthTokenUrl(tokenId) {\n        return this.authTokenUrl(tokenId);\n    }\n\n    /**\n     * Generate a URL for updating (merging) a security policy on an auth token,\n     * via a `PATCH` request.\n     * \n     * The request body accepts a {@link module:net~SecurityPolicy} JSON document.\n     * \n     * @param {string} tokenId the ID of the token to update\n\t * @returns {string} the URL\n     */\n    updateAuthTokenSecurityPolicyUrl(tokenId) {\n        return this.authTokenUrl(tokenId);\n    }\n\n    /**\n     * Generate a URL for replacing a security policy on an auth token,\n     * via a `PUT` request.\n     * \n     * The request body accepts a {@link module:domain~SecurityPolicy} JSON document.\n     * \n     * @param {string} tokenId the ID of the token to update\n\t * @returns {string} the URL\n     */\n    replaceAuthTokenSecurityPolicyUrl(tokenId) {\n        return this.authTokenUrl(tokenId);\n    }\n\n    /**\n     * Generate a URL for updating the status of an auth token,\n     * via a `POST` request.\n     * \n     * @param {string} tokenId the ID of the token to update\n     * @param {AuthTokenStatus} status the status to change to\n\t * @returns {string} the URL\n     */\n    updateAuthTokenStatusUrl(tokenId, status) {\n        return this.authTokenUrl(tokenId) + '?status=' +encodeURIComponent(status.name);\n    }\n}\n\n/**\n * A concrete {@link module:net~UrlHelper} with the {@link module:net~UserAuthTokenUrlHelperMixin} and  \n * {@link module:net~UserUrlHelperMixin} mixins.\n * \n * @mixes module:net~UserAuthTokenUrlHelperMixin\n * @mixes module:net~UserUrlHelperMixin\n * @extends module:net~UrlHelper\n * @alias module:net~UserAuthTokenUrlHelper\n */\nclass UserAuthTokenUrlHelper extends UserAuthTokenUrlHelperMixin(UserUrlHelperMixin(UrlHelper)) {\n\n }\n\nexport default UserAuthTokenUrlHelperMixin;\nexport { UserAuthTokenUrlHelper };\n","/** @module net */\n\nexport { default as AuthorizationV2Builder } from './authV2';\nexport { default as Environment }  from './environment';\nexport { default as HttpHeaders,\n    HttpContentType,\n    HttpMethod } from './httpHeaders';\nexport { default as LocationDatumMetadataUrlHelperMixin,\n\tLocationDatumMetadataUrlHelper } from './locationDatumMetadataUrlHelperMixin';\nexport { default as LocationDatumUrlHelperMixin,\n\tLocationDatumUrlHelper } from './locationDatumUrlHelperMixin';\nexport { default as LocationUrlHelperMixin }  from './locationUrlHelperMixin';\nexport { default as NodeDatumMetadataUrlHelperMixin, \n    NodeDatumMetadataUrlHelper } from './nodeDatumMetadataUrlHelperMixin';\nexport { default as NodeDatumUrlHelperMixin,\n\tNodeDatumUrlHelper } from './nodeDatumUrlHelperMixin';\nexport { default as NodeInstructionUrlHelperMixin, \n    NodeInstructionUrlHelper ,\n    instructionParameter } from './nodeInstructionUrlHelperMixin';\nexport { default as NodeMetadataUrlHelperMixin, \n    NodeMetadataUrlHelper } from './nodeMetadataUrlHelperMixin';\nexport { default as NodeUrlHelperMixin }  from './nodeUrlHelperMixin';\nexport { default as QueryUrlHelperMixin,\n\tSolarQueryDefaultPath,\n\tSolarQueryPathKey,\n\tSolarQueryApiPathV1,\n\tSolarQueryPublicPathKey } from './queryUrlHelperMixin';\nexport { default as UserAuthTokenUrlHelperMixin, \n    UserAuthTokenUrlHelper } from './userAuthTokenUrlHelperMixin';\nexport { default as UserUrlHelperMixin,\n    SolarUserDefaultPath, \n    SolarUserPathKey, \n    SolarUserApiPathV1 } from './userUrlHelperMixin';\nexport { default as UrlHelper } from './urlHelper';\nexport { default as urlQuery } from './urlQuery';\n","/* eslint no-console: 0 */\n\nlet logLevel = 2;\n\nfunction consoleLog(level, ...args) {\n    if ( level > logLevel ) {\n        return;\n    }\n    if ( !console ) {\n        return;\n    }\n\n    let logFn;\n    switch ( level ) {\n        case 1:\n            logFn = console.error;\n            break;\n        case 2:\n            logFn = console.warn;\n            break;\n        case 3:\n            logFn = console.info;\n            break;\n    }\n    if ( !logFn ) {\n        logFn = console.log;\n    }\n    if ( !logFn ) {\n        return; // no console available\n    }\n    logFn(...args); // TODO formatting like sn.format.fmt.apply(this, arguments)?\n}\n\nconst logLevels = Object.freeze({\n    DEBUG: 4,\n    INFO: 3,\n    WARN: 2,\n    ERROR: 1,\n    OFF: 0,\n});\n\n/**\n * An application logger.\n * \n * Logging levels range from 0-4 and is controlled at the application level.\n * Level `0` is off, `1` is error, `2` is warn, `3` is info,  and `4` is debug.\n * The default level starts as `2`.\n */\nclass Logger {\n\n    static debug(...args) {\n        consoleLog(4, ...args);\n    }\n\n    static info(...args) {\n        consoleLog(3, ...args);\n    }\n\n    static warn(...args) {\n        consoleLog(2, ...args);\n    }\n\n    static error(...args) {\n        consoleLog(1, ...args);\n    }\n\n}\n\nObject.defineProperties(Logger, {\n\t/**\n\t * The global logging level. Set to `0` to disable all logging.\n\t * \n\t * @memberof module:util~Logger\n\t * @type {number}\n\t */\n    level: { \n        get:function() { return logLevel; }, \n        set:function(v) { logLevel = typeof v === 'number' ? v : 0}\n    },\n});\n\nexport default Logger;\nexport { logLevels };\n","/** @module util */\n\nexport { default as ComparableEnum } from './comparableEnum';\nexport { default as Configuration } from './configuration';\nexport { default as Enum } from './enum';\nexport { default as Logger,\n logLevels } from './logger';\nexport { default as MultiMap } from './multiMap';\nexport { default as PropMap } from './propMap';\n"],"names":["Enum","name","_name","constructor","freeze","value","enums","Object","reduce","obj","e","enumValues","Array","isArray","undefined","i","len","length","set","result","push","ComparableEnum","_value","other","minEnum","cache","get","Set","agg","compareTo","add","size","Aggregation","level","AggregationValues","Number","MAX_SAFE_INTEGER","Aggregations","enumsValue","AuthTokenStatus","AuthTokenStatusValues","AuthTokenStatuses","AuthTokenType","AuthTokenTypeValues","AuthTokenTypes","Pagination","max","offset","_max","_offset","SortDescriptor","key","descending","_key","_descending","index","propertyName","propName","encodeURIComponent","PropMap","props","properties","newValue","arguments","newProps","keys","k","prop","assign","callbackFn","v","kv","toUriEncoding","forEach","sorts","pagination","params","sort","paginationParams","CountryKey","ElevationKey","LatitudeKey","IdKey","LocalityKey","LongitudeKey","NameKey","PostalCodeKey","RegionKey","StateOrProvinceKey","StreetKey","TimeZoneIdKey","Location","loc","val","timestampFormat","utcFormat","dateTimeFormat","dateTimeUrlFormat","dateFormat","timestampParse","utcParse","dateTimeParse","dateParser","str","date","isoParse","iso8601Date","includeTime","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","AggregationKey","DataPathKey","EndDateKey","LocationIdsKey","LocationKey","MetadataFilterKey","MostRecentKey","NodeIdsKey","QueryKey","SourceIdsKey","StartDateKey","TagsKey","UserIdsKey","DatumFilter","datumFilterUriEncodingPropertyMapper","nodeIds","nodeId","locationIds","locationId","sourceIds","sourceId","userIds","userId","path","substring","GeneralMetadata","info","propertyInfo","tags","stringMapToObject","from","JSON","stringify","json","m","pm","t","parse","objectToStringMap","strMap","create","Map","InstructionState","InstructionStateValues","InstructionStates","LocationPrecision","precision","LocationPrecisionValues","LocationPrecisions","setOrNull","mergedSets","set1","set2","s1","s2","values","SecurityPolicy","aggregations","minAggregation","locationPrecisions","minLocationPrecision","nodeMetadataPaths","userMetadataPaths","_nodeIds","_sourceIds","_aggregations","_minAggregation","_locationPrecisions","_minLocationPrecision","_nodeMetadataPaths","_userMetadataPaths","map","MIN_AGGREGATION_CACHE","MIN_LOCATION_PRECISION_CACHE","SecurityPolicyBuilder","policy","withAggregations","withMinAggregation","withLocationPrecisions","withMinLocationPrecision","withNodeIds","withSourceIds","withNodeMetadataPaths","withUserMetadataPaths","addAggregations","addLocationPrecisions","addNodeIds","addSourceIds","addNodeMetadataPaths","addUserMetadataPaths","minimumEnumSet","buildAggregations","buildLocationPrecisions","displayScaleForValue","num","Math","abs","isNaN","displayUnitsForScale","baseUnit","scale","MultiMap","mappings","mappingNames","putAll","addValue","hasOwnProperty","keyLc","toLowerCase","mapping","indexOf","splice","replace","createGetter","me","createSetter","createProperty","defineProperty","Configuration","initialMap","enabled","newMap","normalizedProtocol","normalizedConfig","config","protocol","port","Environment","HttpMethod","HttpContentType","HttpHeaders","defineProperties","urlQueryParse","search","pairs","pair","match","split","decodeURIComponent","urlQueryEncode","parameters","encoderFn","encoder","handleValue","SIGNING_KEY_VALIDITY","AuthorizationV2Builder","token","environment","tokenId","forceHostPort","reset","contentDigest","httpHeaders","signedHeaderNames","host","method","GET","Date","tokenSecret","signingKey","computeSigningKey","signingKeyExpiration","requestDate","getTime","httpMethod","put","HOST","requestPath","url","uri","uriParse","scheme","query","queryParams","CONTENT_TYPE","useSnDate","headerName","headerValue","headers","digest","Hex","content","SHA256","contentSHA256","header","Base64","keySet","first","vals","valsLen","j","_encodeURIComponent","sortedLowercaseHeaderNames","toUTCString","firstValue","trim","join","EMPTY_STRING_SHA256_HEX","X_SN_DATE","DATE","containsKey","CONTENT_MD5","DIGEST","lowercaseSortedArray","computeCanonicalRequestData","canonicalHeaderNames","canonicalQueryParameters","canonicalHeaders","canonicalSignedHeaderNames","canonicalContentSHA256","secretKey","datestring","HmacSHA256","canonicalRequestData","sortedHeaderNames","canonicalReq","signatureData","computeSignatureData","signature","buildWithKey","now","signedHeaders","existingIndex","findIndex","caseInsensitiveEqualsFn","concat","remove","valueLc","toString","items","sortedItems","_hexEscapeChar","c","charCodeAt","toUpperCase","UrlHelper","env","_parameters","tls","useTls","hostUrl","template","resolveTemplateUrl","variableName","variableValue","LocationUrlHelperMixin","superclass","filter","baseUrl","toUriEncodingWithSorting","parameter","SolarQueryDefaultPath","SolarQueryPathKey","SolarQueryApiPathV1","SolarQueryPublicPathKey","QueryUrlHelperMixin","isPubPath","publicQuery","LocationDatumMetadataUrlHelperMixin","baseLocationDatumMetadataUrl","source","locationDatumMetadataUrlWithSource","LocationDatumMetadataUrlHelper","LocationDatumUrlHelperMixin","startDate","endDate","datumFilter","LocationDatumUrlHelper","NodeUrlHelperMixin","NodeDatumMetadataUrlHelperMixin","baseNodeDatumMetadataUrl","nodeDatumMetadataUrlWithSource","NodeDatumMetadataUrlHelper","NodeDatumUrlHelperMixin","sources","NodeDatumUrlHelper","SolarUserDefaultPath","SolarUserPathKey","SolarUserApiPathV1","UserUrlHelperMixin","babelHelpers.get","archived","NodeInstructionUrlHelperMixin","instructionId","state","topic","NodeInstructionUrlHelper","instructionParameter","NodeMetadataUrlHelperMixin","viewNodeMetadataUrl","NodeMetadataUrlHelper","UserAuthTokenUrlHelperMixin","type","authTokenUrl","status","UserAuthTokenUrlHelper","logLevel","consoleLog","console","logFn","error","warn","log","args","logLevels","Logger"],"mappings":"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"}