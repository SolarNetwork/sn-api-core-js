!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-array"),require("d3-collection"),require("d3-time"),require("d3-time-format"),require("crypto-js/enc-base64"),require("crypto-js/enc-hex"),require("crypto-js/hmac-sha256"),require("crypto-js/sha256"),require("uri-js")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-time","d3-time-format","crypto-js/enc-base64","crypto-js/enc-hex","crypto-js/hmac-sha256","crypto-js/sha256","uri-js"],e):e(t.sn=t.sn||{},t.d3,t.d3,t.d3,t.d3,t.CryptoJS.Base64,t.CryptoJS.Hex,t.CryptoJS.HmacSHA256,t.CryptoJS.SHA256,t.URI)}(this,function(t,e,n,r,i,o,a,u,s,c){"use strict";function l(t,e){return t.getUTCFullYear()+(t.getUTCMonth()<9?"0":"")+(t.getUTCMonth()+1)+(t.getUTCDate()<10?"0":"")+t.getUTCDate()+(e?"T"+(t.getUTCHours()<10?"0":"")+t.getUTCHours()+(t.getUTCMinutes()<10?"0":"")+t.getUTCMinutes()+(t.getUTCSeconds()<10?"0":"")+t.getUTCSeconds()+"Z":"")}function h(t){return t?t.date?t.date:t.localDate?J(t.localDate+(t.localTime?" "+t.localTime:" 00:00")):t.created?G(t.created)||i.isoParse(t.created):void 0:null}function f(t,n,r){var i,o,a,u,s,c=0,l=t.length-1;if(l>0)for(;c<e.max(t.map(function(t){return t.values.length}));){for(a=void 0,i=0;i<=l;i++)if(!(t[i].values.length<=c)&&(o=i<l?i+1:0,t[o].values.length<=c||t[i].values[c].date.getTime()<t[o].values[c].date.getTime())){if(a={date:t[i].values[c].date,sourceId:t[o].key},n)for(u in n)n.hasOwnProperty(u)&&(a[u]=n[u]);r&&(s=t[o].values.length>c?c:c>0?c-1:null,r(a,t[o].key,null!==s?t[o].values[s]:void 0)),t[o].values.splice(c,0,a)}void 0===a&&c++}}function d(t){if(!(t instanceof Map&&t.size>0))return null;var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;u[1]instanceof Set&&e.push(u[0]+":"+Array.from(u[1]).join(","))}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}function p(t,e){if(t===yt||t===ft||t===gt||t===kt){if(Array.isArray(e)&&1===e.length)return[t.substring(0,t.length-1),e[0]]}else{if(t===mt||t===ht)return[t,Q(e)];if(t===dt&&!e)return null;if(t===pt||t===vt){var n=d(e);return n?[t,n,!0]:null}}return t}function y(t){var e=Object.create(null);if(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=L(u,2),c=s[0],l=s[1];e[c]=l instanceof Map?y(l):l}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}return e}function v(t){var e=new Map;if(t){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=t[u];e.set(u,"object"===(void 0===s?"undefined":N(s))?v(s):s)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}return e}function g(t){var e=null;return t instanceof Set?e=t.size>0?t:null:Array.isArray(t)?e=t.length>0?new Set(t):null:t&&(e=new Set([t])),e}function m(t,e){var n=g(t),r=g(e);if(null===n&&null===r)return null;if(null===r)return n;if(null===n)return r;var i=!0,o=!1,a=void 0;try{for(var u,s=r.values()[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;n.add(c)}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}function k(t,e,n,r){var i=e.toLowerCase(),o=t.mappings[i];if(o||(o={key:e,val:[]},t.mappings[i]=o,t.mappingNames.push(i)),r&&(o.val.length=0),Array.isArray(n))for(var a=n.length,u=0;u<a;u+=1)o.val.push(n[u]);else o.val.push(n);return t}function U(t,e){return function(){return t.map[e]}}function _(t,e){return function(n){t.map[e]=n}}function b(t,e){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:U(t,e),set:_(t,e)})}function I(t){return t?t.replace(/:$/,""):"https"}function P(t){var e=Object.assign({host:"data.solarnetwork.net"},t);return e.protocol=I(e.protocol||"https"),e.port=e.port||("https"===e.protocol?443:80),e.host=e.port&&e.hostname?e.hostname:e.host,e}function A(t,e){var n,r,i,o,a,u,s={};if(void 0!==t&&t.length>0)for(t.match(/^\?/)&&(t=t.substring(1)),i=0,o=(n=t.split("&")).length;i<o;i++)2===(r=n[i].split("=",2)).length&&(a=decodeURIComponent(r[0]),u=decodeURIComponent(r[1]),s[a]?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(u)):e&&e.has(a)?s[a]=[u]:s[a]=u);return s}function O(t){var e=t.toLowerCase();return function(t){return e===t.toString().toLowerCase()}}function M(t){for(var e=[],n=t.length,r=0;r<n;r+=1)e.push(t[r].toLowerCase());return e.sort(),e}function w(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}function S(t){return encodeURIComponent(t).replace(/[!'()*]/g,w)}function T(t){if(!(t>he)&&console){var e=void 0;switch(t){case 1:e=console.error;break;case 2:e=console.warn;break;case 3:e=console.info}if(e||(e=console.log),e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.apply(void 0,r)}}}o=o&&"default"in o?o.default:o,a=a&&"default"in a?a.default:a,u=u&&"default"in u?u.default:u,s=s&&"default"in s?s.default:s;var D=Object.freeze({timeNormalizeDataArray:function(t,e){var n=1e3*e.level;if(!Array.isArray(t)||t.length<2)return t;for(var r=0;r<t.length-1;){var i=t[r],o=i.date.getTime(),a=o+n,u=t[r+1].date.getTime();if(u>a){for(var s=[r+1,0],c=o+n;c<u;c+=n){var l=Object.create(Object.getPrototypeOf(i),Object.getOwnPropertyDescriptors(i));for(var h in l)l[h]=null;l.date=new Date(c),s.push(l)}Array.prototype.splice.apply(t,s),r+=s.length}r+=1}}}),N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},j=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),E=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},H=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},R=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},L=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function t(e){C(this,t),this._name=e,this.constructor===t&&Object.freeze(this)}return j(t,[{key:"equals",value:function(t){return this.constructor===t.constructor?t.name===this.name:t===this.name}},{key:"name",get:function(){return this._name}}],[{key:"enumValues",value:function(){return[]}},{key:"enumsValue",value:function(t){return Object.freeze(t.reduce(function(t,e){return t[e.name]=e,t},{}))}},{key:"valueOf",value:function(t){var e=this.enumValues();if(Array.isArray(e))for(var n=0,r=e.length;n<r;n+=1)if(t===e[n].name)return e[n]}},{key:"namesFor",value:function(t){var e=[];if(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;e.push(u.name)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}return e}}]),t}(),q=function(t){function e(t,n){C(this,e);var r=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._value=n,r.constructor===e&&Object.freeze(r),r}return H(e,x),j(e,[{key:"compareTo",value:function(t){return this.value<t.value?-1:this.value>t.value?1:0}},{key:"value",get:function(){return this._value}}],[{key:"minimumEnumSet",value:function(t,e){if(!t)return null;var n=e?e.get(t.name):void 0;if(n)return n;n=new Set;var r=!0,i=!1,o=void 0;try{for(var a,u=t.constructor.enumValues()[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;s.compareTo(t)>-1&&n.add(s)}}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return e&&e.set(t.name,n),n.size>0?n:null}}]),e}(),z=function(t){function e(t,n){C(this,e);var r=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.constructor===e&&Object.freeze(r),r}return H(e,q),j(e,[{key:"level",get:function(){return this.value}}],[{key:"enumValues",value:function(){return F}}]),e}(),F=Object.freeze([new z("Minute",60),new z("FiveMinute",300),new z("TenMinute",600),new z("FifteenMinute",900),new z("ThirtyMinute",1800),new z("Hour",3600),new z("HourOfDay",3600),new z("SeasonalHourOfDay",3600),new z("Day",86400),new z("DayOfWeek",86400),new z("SeasonalDayOfWeek",86400),new z("Week",604800),new z("WeekOfYear",604800),new z("Month",2419200),new z("Year",31536e3),new z("RunningTotal",Number.MAX_SAFE_INTEGER)]),W=z.enumsValue(F),V=i.utcFormat("%Y-%m-%d %H:%M:%S.%LZ"),K=i.utcFormat("%Y-%m-%d %H:%M"),Q=i.utcFormat("%Y-%m-%dT%H:%M"),Y=i.utcFormat("%Y-%m-%d"),G=i.utcParse("%Y-%m-%d %H:%M:%S.%LZ"),J=i.utcParse("%Y-%m-%d %H:%M"),X=Object.freeze({datumDate:h,rollingQueryDateRange:function(t,e,n){function i(t,e){var n=t.ceil(e);return n.getTime()===e.getTime()&&(n=t.offset(n,1)),n}function o(t){var n;return"number"!=typeof(n=isNaN(Number(e))?void 0!==e[t]?Number(e[t]):1:e)&&(n=1),n}n=n||new Date;var a,u,s,c;if(t.compareTo(W.Hour)<0){c=o("numHours"),s=W.Hour,a=i(r.utcMinute,n);var l=Math.min(30,t.level/60);a.setUTCMinutes(a.getUTCMinutes()+l-a.getUTCMinutes()%l,0,0),u=r.utcHour.offset(a,-c)}else W.Month.equals(t)?(c=o("numYears"),s=W.Year,a=i(r.utcMonth,n),u=r.utcYear.offset(r.utcMonth.floor(n),-c)):W.Day.equals(t)?(c=o("numMonths"),s=W.Month,a=i(r.utcDay,n),u=r.utcMonth.offset(r.utcDay.floor(n),-c)):(c=o("numDays"),s=W.Day,a=i(r.utcHour,n),u=r.utcDay.offset(r.utcHour.floor(a),-c));return{start:u,end:a,timeUnit:s,timeCount:c,aggregate:t}}}),Z=Object.freeze({aggregateNestedDataLayers:function(t,e,n,r,i){var o,a,u,s,c,l,h,f,d=t.length,p=n?n.length:0,y=r?r.length:0;if((o=t[0].values.length)>0){for(f=[],a=0;a<o;a+=1){if(c=t[0].values[a],h={},void 0!==i)for(l in i)i.hasOwnProperty(l)&&(h[l]=i[l]);for(s=0;s<p;s+=1)h[n[s]]=c[n[s]];for(s=0;s<y;s+=1)h[r[s]]=0;for(u=0;u<d;u+=1)for(s=0;s<y;s+=1)void 0!==(l=t[u].values[a][r[s]])&&(h[r[s]]+=l);f.push(h)}t=[{key:e,values:f}]}return t},groupedBySourceMetricDataArray:function(t,r,i,o){var a=function(t){return t[r]},u="function"==typeof o?o:e.sum,s=n.nest().key(function(t){return i&&i.has(t.sourceId)?i.get(t.sourceId):t.sourceId}).sortKeys(e.ascending).key(function(t){return t.localDate+" "+t.localTime}).rollup(function(t){var e={date:h(t[0])},n=t[0].sourceId;return i&&i.has(n)&&(n=i.get(n)),e[n]=u(t,a),e}).entries(t).map(function(t){return{key:t.key,values:t.values.map(function(t){return t.value})}});return f(s,null,function(t,e){t[e]=null}),s.reduce(function(t,e){return t?(t.forEach(function(t,n){var r=e.values[n][e.key];t[e.key]=r}),t):e.values},null)},normalizeNestedStackDataByDate:f}),B=function(t){function e(t){C(this,e);var n=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.constructor===e&&Object.freeze(n),n}return H(e,x),j(e,null,[{key:"enumValues",value:function(){return $}}]),e}(),$=Object.freeze([new B("Active"),new B("Disabled")]),tt=B.enumsValue($),et=function(t){function e(t){C(this,e);var n=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.constructor===e&&Object.freeze(n),n}return H(e,x),j(e,null,[{key:"enumValues",value:function(){return nt}}]),e}(),nt=Object.freeze([new et("ReadNodeData"),new et("User")]),rt=et.enumsValue(nt),it=function(t){function e(t){C(this,e);var n=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.constructor===e&&Object.freeze(n),n}return H(e,x),j(e,null,[{key:"enumValues",value:function(){return ot}}]),e}(),ot=Object.freeze([new it("Average"),new it("Sum")]),at=it.enumsValue(ot),ut=function(){function t(e,n){C(this,t),this._max=e>0?+e:0,this._offset=n>0?+n:0}return j(t,[{key:"withOffset",value:function(e){return new t(this.max,e)}},{key:"toUriEncoding",value:function(){var t="";return this.max>0&&(t+="max="+this.max),this.offset>0&&(t.length>0&&(t+="&"),t+="offset="+this.offset),t}},{key:"max",get:function(){return this._max}},{key:"offset",get:function(){return this._offset}}]),t}(),st=function(){function t(e,n){C(this,t),this._key=e,this._descending=!!n}return j(t,[{key:"toUriEncoding",value:function(t,e){var n=void 0,r=e||"sorts";return n=void 0!==t&&t>=0?encodeURIComponent(r+"["+t+"].key")+"=":"key=",n+=encodeURIComponent(this.key),this.descending&&(n+=void 0!==t&&t>=0?"&"+encodeURIComponent(r+"["+t+"].descending")+"=true":"&descending=true"),n}},{key:"key",get:function(){return this._key}},{key:"descending",get:function(){return this._descending}}]),t}(),ct=function(){function t(e){C(this,t),this.props=e instanceof t?e.properties():"object"===(void 0===e?"undefined":N(e))?e:{}}return j(t,[{key:"prop",value:function(t,e){return 1===arguments.length?this.props[t]:(null===e?delete this.props[t]:this.props[t]=e,this)}},{key:"properties",value:function(t){if(t){var e=!0,n=!1,r=void 0;try{for(var i,o=Object.keys(t)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.prop(a,t[a])}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return this}return Object.assign({},this.props)}},{key:"toUriEncoding",value:function(t,e){var n=this,r="",i=!0,o=!1,a=void 0;try{for(var u,s=Object.keys(this.props)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;(function(i){r.length>0&&(r+="&");var o=n.props[i],a=!1;if(e){var u=e(i,o);if(null===u)return"continue";Array.isArray(u)&&u.length>1&&(i=u[0],o=u[1],u.length>2&&(a=!!u[2]))}if("function"==typeof o.toUriEncoding)return r+=o.toUriEncoding(t?encodeURIComponent(t)+"."+i:i),"continue";t&&(r+=encodeURIComponent(t)+"."),r+=encodeURIComponent(i)+"=",Array.isArray(o)?o.forEach(function(t,e){e>0&&(r+=a?"&"+encodeURIComponent(i)+"=":","),t instanceof x&&(t=t.name),r+=encodeURIComponent(t)}):(o instanceof x&&(o=o.name),r+=encodeURIComponent(o)),c=i})(c)}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}},{key:"toUriEncodingWithSorting",value:function(t,e,n,r){var i=this.toUriEncoding(n,r);if(Array.isArray(t)&&t.forEach(function(t,e){t instanceof st&&(i.length>0&&(i+="&"),i+=t.toUriEncoding(e))}),e instanceof ut){var o=e.toUriEncoding();o&&(i.length>0&&(i+="&"),i+=o)}return i}}]),t}(),lt=function(t){function e(t){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return H(e,ct),j(e,[{key:"id",get:function(){return this.prop("id")},set:function(t){this.prop("id",t)}},{key:"name",get:function(){return this.prop("name")},set:function(t){this.prop("name",t)}},{key:"country",get:function(){return this.prop("country")},set:function(t){this.prop("country",t)}},{key:"region",get:function(){return this.prop("region")},set:function(t){this.prop("region",t)}},{key:"stateOrProvince",get:function(){return this.prop("stateOrProvince")},set:function(t){this.prop("stateOrProvince",t)}},{key:"locality",get:function(){return this.prop("locality")},set:function(t){this.prop("locality",t)}},{key:"postalCode",get:function(){return this.prop("postalCode")},set:function(t){this.prop("postalCode",t)}},{key:"street",get:function(){return this.prop("street")},set:function(t){this.prop("street",t)}},{key:"latitude",get:function(){return this.prop("latitude")},set:function(t){this.prop("latitude",t)}},{key:"longitude",get:function(){return this.prop("longitude")},set:function(t){this.prop("longitude",t)}},{key:"elevation",get:function(){return this.prop("elevation")},set:function(t){this.prop("elevation",t)}},{key:"timeZoneId",get:function(){return this.prop("timeZoneId")},set:function(t){this.prop("timeZoneId",t)}}]),e}(),ht="endDate",ft="locationIds",dt="mostRecent",pt="nodeIdMaps",yt="nodeIds",vt="sourceIdMaps",gt="sourceIds",mt="startDate",kt="userIds",Ut=function(t){function e(t){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return H(e,ct),j(e,[{key:"toUriEncoding",value:function(t,n){return E(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toUriEncoding",this).call(this,t,n||p)}},{key:"nodeId",get:function(){var t=this.nodeIds;return Array.isArray(t)&&t.length>0?t[0]:null},set:function(t){this.nodeIds=t?[t]:null}},{key:"nodeIds",get:function(){return this.prop(yt)},set:function(t){this.prop(yt,Array.isArray(t)?t:null)}},{key:"locationId",get:function(){var t=this.locationIds;return Array.isArray(t)&&t.length>0?t[0]:null},set:function(t){this.locationIds=t?[t]:null}},{key:"locationIds",get:function(){return this.prop(ft)},set:function(t){this.prop(ft,Array.isArray(t)?t:null)}},{key:"sourceId",get:function(){var t=this.sourceIds;return Array.isArray(t)&&t.length>0?t[0]:null},set:function(t){this.sourceIds=t?[t]:null}},{key:"sourceIds",get:function(){return this.prop(gt)},set:function(t){this.prop(gt,Array.isArray(t)?t:null)}},{key:"userId",get:function(){var t=this.userIds;return Array.isArray(t)&&t.length>0?t[0]:null},set:function(t){this.userIds=t?[t]:null}},{key:"userIds",get:function(){return this.prop(kt)},set:function(t){this.prop(kt,Array.isArray(t)?t:null)}},{key:"mostRecent",get:function(){return!!this.prop(dt)},set:function(t){this.prop(dt,!!t)}},{key:"startDate",get:function(){return this.prop(mt)},set:function(t){this.prop(mt,t)}},{key:"endDate",get:function(){return this.prop(ht)},set:function(t){this.prop(ht,t)}},{key:"dataPath",get:function(){return this.prop("dataPath")},set:function(t){this.prop("dataPath",t)}},{key:"aggregation",get:function(){return this.prop("aggregation")},set:function(t){this.prop("aggregation",t instanceof z?t:null)}},{key:"tags",get:function(){return this.prop("tags")},set:function(t){this.prop("tags",Array.isArray(t)?t:null)}},{key:"location",get:function(){return this.prop("location")},set:function(t){this.prop("location",t instanceof lt?t:null)}},{key:"query",get:function(){return this.prop("query")},set:function(t){this.prop("query",t)}},{key:"metadataFilter",get:function(){return this.prop("metadataFilter")},set:function(t){this.prop("metadataFilter",t)}},{key:"withoutTotalResultsCount",get:function(){return this.prop("withoutTotalResultsCount")},set:function(t){this.prop("withoutTotalResultsCount",!!t)}},{key:"combiningType",get:function(){return this.prop("combiningType")},set:function(t){this.prop("combiningType",t instanceof it?t:null)}},{key:"nodeIdMaps",get:function(){return this.prop(pt)},set:function(t){this.prop(pt,t instanceof Map?t:null)}},{key:"sourceIdMaps",get:function(){return this.prop(vt)},set:function(t){this.prop(vt,t instanceof Map?t:null)}}]),e}(),_t=function(t){function e(t,n){C(this,e);var r=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._key=n,r.constructor===e&&Object.freeze(r),r}return H(e,x),j(e,[{key:"key",get:function(){return this._key}}],[{key:"enumValues",value:function(){return bt}}]),e}(),bt=Object.freeze([new _t("CalculatedAt","at"),new _t("CalculatedAtDifference","atd"),new _t("NearestDifference","diff")]),It=_t.enumsValue(bt),Pt=function(){function t(e,n,r){C(this,t),this.info=e||null,this.propertyInfo=n||null,this.tags=r instanceof Set?r:Array.isArray(r)?new Set(r):null}return j(t,[{key:"toJsonEncoding",value:function(){var t={},e=this.info;e&&(t.m=y(e));var n=this.propertyInfo;n&&(t.pm=y(n));var r=this.tags;return r&&(t.t=Array.from(r)),JSON.stringify(t)}}],[{key:"fromJsonEncoding",value:function(e){var n=void 0,r=void 0,i=void 0;if(e){var o=JSON.parse(e);n=o.m?v(o.m):null,r=o.pm?v(o.pm):null,i=Array.isArray(o.t)?new Set(o.t):null}return new t(n,r,i)}}]),t}(),At=function(t){function e(t){C(this,e);var n=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.constructor===e&&Object.freeze(n),n}return H(e,x),j(e,null,[{key:"enumValues",value:function(){return Ot}}]),e}(),Ot=Object.freeze([new At("Unknown"),new At("Queued"),new At("Received"),new At("Executing"),new At("Declined"),new At("Completed")]),Mt=At.enumsValue(Ot),wt=function(t){function e(t,n){C(this,e);var r=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.constructor===e&&Object.freeze(r),r}return H(e,q),j(e,[{key:"precision",get:function(){return this.value}}],[{key:"enumValues",value:function(){return St}}]),e}(),St=Object.freeze([new wt("LatLong",1),new wt("Block",5),new wt("Street",10),new wt("PostalCode",20),new wt("Locality",30),new wt("StateOrProvince",40),new wt("Region",50),new wt("TimeZone",60),new wt("Country",70)]),Tt=wt.enumsValue(St),Dt=function(){function t(e,n,r,i,o,a,u,s){C(this,t),this._nodeIds=g(e),this._sourceIds=g(n),this._aggregations=g(r),this._minAggregation=i instanceof z?i:null,this._locationPrecisions=g(o),this._minLocationPrecision=a instanceof wt?a:null,this._nodeMetadataPaths=g(u),this._userMetadataPaths=g(s),this.constructor===t&&Object.freeze(this)}return j(t,[{key:"toJsonEncoding",value:function(){var t={},e=this.nodeIds;return e&&(t.nodeIds=Array.from(e)),(e=this.sourceIds)&&(t.sourceIds=Array.from(e)),(e=this.aggregations)&&(t.aggregations=Array.from(e).map(function(t){return t.name})),(e=this.locationPrecisions)&&(t.locationPrecisions=Array.from(e).map(function(t){return t.name})),(e=this.minAggregation)&&(t.length>0&&(t+="&"),t.minAggregation=e.name),(e=this.minLocationPrecision)&&(t.minLocationPrecision=e.name),(e=this.nodeMetadataPaths)&&(t.nodeMetadataPaths=Array.from(e)),(e=this.userMetadataPaths)&&(t.userMetadataPaths=Array.from(e)),JSON.stringify(t)}},{key:"nodeIds",get:function(){return this._nodeIds}},{key:"sourceIds",get:function(){return this._sourceIds}},{key:"aggregations",get:function(){return this._aggregations}},{key:"locationPrecisions",get:function(){return this._locationPrecisions}},{key:"minAggregation",get:function(){return this._minAggregation}},{key:"minLocationPrecision",get:function(){return this._minLocationPrecision}},{key:"nodeMetadataPaths",get:function(){return this._nodeMetadataPaths}},{key:"userMetadataPaths",get:function(){return this._userMetadataPaths}}]),t}(),Nt=new Map,Ct=new Map,jt=function(){function t(){C(this,t)}return j(t,[{key:"withPolicy",value:function(t){return t&&this.withAggregations(t.aggregations).withMinAggregation(t.minAggregation).withLocationPrecisions(t.locationPrecisions).withMinLocationPrecision(t.minLocationPrecision).withNodeIds(t.nodeIds).withSourceIds(t.sourceIds).withNodeMetadataPaths(t.nodeMetadataPaths).withUserMetadataPaths(t.userMetadataPaths),this}},{key:"addPolicy",value:function(t){return t&&(this.addAggregations(t.aggregations).addLocationPrecisions(t.locationPrecisions).addNodeIds(t.nodeIds).addSourceIds(t.sourceIds).addNodeMetadataPaths(t.nodeMetadataPaths).addUserMetadataPaths(t.userMetadataPaths),t.minAggregation&&this.withMinAggregation(t.minAggregation),t.minLocationPrecision&&this.withMinLocationPrecision(t.minLocationPrecision)),this}},{key:"withNodeIds",value:function(t){return this.nodeIds=g(t),this}},{key:"addNodeIds",value:function(t){return this.withNodeIds(m(this.nodeIds,t))}},{key:"withNodeMetadataPaths",value:function(t){return this.nodeMetadataPaths=g(t),this}},{key:"addNodeMetadataPaths",value:function(t){return this.withNodeMetadataPaths(m(this.nodeMetadataPaths,t))}},{key:"withUserMetadataPaths",value:function(t){return this.userMetadataPaths=g(t),this}},{key:"addUserMetadataPaths",value:function(t){return this.withUserMetadataPaths(m(this.userMetadataPaths,t))}},{key:"withSourceIds",value:function(t){return this.sourceIds=g(t),this}},{key:"addSourceIds",value:function(t){return this.withSourceIds(m(this.sourceIds,t))}},{key:"withAggregations",value:function(t){return this.aggregations=g(t),this}},{key:"addAggregations",value:function(t){return this.withAggregations(m(this.aggregations,t))}},{key:"withLocationPrecisions",value:function(t){return this.locationPrecisions=g(t),this}},{key:"addLocationPrecisions",value:function(t){return this.withLocationPrecisions(m(this.locationPrecisions,t))}},{key:"withMinAggregation",value:function(t){return this.minAggregation=t,this}},{key:"buildAggregations",value:function(){var t=this.minAggregation,e=this.aggregations;return!t&&e&&e.size>0?e:t?z.minimumEnumSet(t,Nt):null}},{key:"withMinLocationPrecision",value:function(t){return this.minLocationPrecision=t,this}},{key:"buildLocationPrecisions",value:function(){var t=this.minLocationPrecision,e=this.locationPrecisions;return!t&&e&&e.size>0?e:t?wt.minimumEnumSet(t,Ct):null}},{key:"build",value:function(){return new Dt(this.nodeIds,this.sourceIds,this.buildAggregations(),this.minAggregation,this.buildLocationPrecisions(),this.minLocationPrecision,this.nodeMetadataPaths,this.userMetadataPaths)}}]),t}(),Et=function(){function t(e){C(this,t),this.mappings={},this.mappingNames=[],e&&this.putAll(e)}return j(t,[{key:"add",value:function(t,e){return k(this,t,e)}},{key:"put",value:function(t,e){return k(this,t,e,!0)}},{key:"putAll",value:function(t){for(var e in t)t.hasOwnProperty(e)&&k(this,e,t[e],!0);return this}},{key:"value",value:function(t){var e=t.toLowerCase(),n=this.mappings[e];return n?n.val:void 0}},{key:"firstValue",value:function(t){var e=this.value(t);return e&&e.length>0?e[0]:void 0}},{key:"clear",value:function(){return this.mappingNames.length=0,this.mappings={},this}},{key:"remove",value:function(t){var e=t.toLowerCase(),n=this.mappingNames.indexOf(e),r=this.mappings[e];return r&&(delete this.mappings[e],this.mappingNames.splice(n,1)),r?r.val:void 0}},{key:"size",value:function(){return this.mappingNames.length}},{key:"isEmpty",value:function(){return this.size()<1}},{key:"containsKey",value:function(t){return void 0!==this.value(t)}},{key:"keySet",value:function(){for(var t=[],e=this.size(),n=0;n<e;n+=1)t.push(this.mappings[this.mappingNames[n]].key);return t}}]),t}(),Ht=function(){function t(e){C(this,t),this.map={},void 0!==e&&this.values(e)}return j(t,[{key:"enabled",value:function(t){return void 0!==t&&!!this.map[t]}},{key:"toggle",value:function(t,e){var n=e;return void 0===t?this:(void 0===n&&(n=void 0===this.map[t]),this.value(t,!0===n||null))}},{key:"value",value:function(t,e){return 1===arguments.length?this.map[t]:(null===e?(delete this.map[t],this.hasOwnProperty(t)&&delete this[t]):(this.map[t]=e,this.hasOwnProperty(t)||b(this,t)),this)}},{key:"values",value:function(t){if(t){for(var e in t)t.hasOwnProperty(e)&&this.value(e,t[e]);return this}return Object.assign({},this.map)}}]),t}(),Rt=function(t){function e(t){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,P(t)))}return H(e,Ht),j(e,[{key:"useTls",value:function(){return"https"===this.value("protocol")}}]),e}(),Lt=Object.freeze({GET:"GET",HEAD:"HEAD",POST:"POST",PUT:"PUT",PATCH:"PATCH",DELETE:"DELETE",OPTIONS:"OPTIONS",TRACE:"TRACE"}),xt=Object.freeze({APPLICATION_JSON:"application/json",APPLICATION_JSON_UTF8:"application/json; charset=UTF-8",FORM_URLENCODED:"application/x-www-form-urlencoded",FORM_URLENCODED_UTF8:"application/x-www-form-urlencoded; charset=UTF-8"}),qt=function(t){function e(){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return H(e,Et),e}();Object.defineProperties(qt,{AUTHORIZATION:{value:"Authorization"},CONTENT_MD5:{value:"Content-MD5"},CONTENT_TYPE:{value:"Content-Type"},DATE:{value:"Date"},DIGEST:{value:"Digest"},HOST:{value:"Host"},X_SN_DATE:{value:"X-SN-Date"}});var zt={urlQueryParse:A,urlQueryEncode:function(t,e){function n(t,e){u.length&&(u+="&"),u+=s(t)+"="+s(e)}var r,i,o,a,u="",s=e||encodeURIComponent;if(t)for(r in t)if(t.hasOwnProperty(r))if(i=t[r],Array.isArray(i))for(o=0,a=i.length;o<a;o++)n(r,i[o]);else n(r,i);return u}},Ft=function(){function t(e,n){C(this,t),this.tokenId=e,this.environment=n||new Rt,this.forceHostPort=!1,this.reset()}return j(t,[{key:"reset",value:function(){this.contentDigest=null,this.httpHeaders=new qt,this.parameters=new Et,this.signedHeaderNames=[];var t=this.environment.host;return"https"!==this.environment.protocol&&80==this.environment.port||(t+=":"+this.environment.port),this.method(Lt.GET).host(t).path("/").date(new Date)}},{key:"saveSigningKey",value:function(t){this.signingKey=this.computeSigningKey(t),this.signingKeyExpiration=new Date(this.requestDate.getTime()+6048e5)}},{key:"method",value:function(t){return this.httpMethod=t,this}},{key:"host",value:function(t){return this.forceHostPort&&t.indexOf(":")<0&&80!=this.environment.port&&(t+=":"+this.environment.port),this.httpHeaders.put(qt.HOST,t),this}},{key:"path",value:function(t){return this.requestPath=t,this}},{key:"url",value:function(t){var e=c.parse(t),n=e.host;return!e.port||("https"!==e.scheme&&"wss"!==e.scheme||443===e.port)&&("http"!==e.scheme&&"ws"!==e.scheme||80===e.port)||(n+=":"+e.port),e.query&&this.queryParams(A(e.query)),this.host(n).path(e.path)}},{key:"contentType",value:function(t){return this.httpHeaders.put(qt.CONTENT_TYPE,t),this}},{key:"date",value:function(t){return this.requestDate=t||new Date,this}},{key:"snDate",value:function(t){return this.useSnDate=t,this}},{key:"header",value:function(t,e){return this.httpHeaders.put(t,e),this}},{key:"headers",value:function(t){return this.httpHeaders=t,this}},{key:"queryParams",value:function(t){return t instanceof Et?this.parameters=t:this.parameters.putAll(t),this}},{key:"signedHttpHeaders",value:function(t){return this.signedHeaderNames=t,this}},{key:"contentSHA256",value:function(t){var e;return e="string"==typeof t?a.parse(t):t,this.contentDigest=e,this}},{key:"computeContentDigest",value:function(t){var e=s(t);return this.contentSHA256(e),this.header("Digest","sha-256="+o.stringify(e)),this}},{key:"canonicalQueryParameters",value:function(){var t=this.parameters.keySet();if(t.length<1)return"";t.sort();for(var e=t.length,n=!0,r="",i=0;i<e;i+=1)for(var o=t[i],a=this.parameters.value(o),u=a.length,s=0;s<u;s+=1)n?n=!1:r+="&",r+=S(o)+"="+S(a[s]);return r}},{key:"canonicalHeaders",value:function(t){for(var e,n,r="",i=t.length,o=0;o<i;o+=1)r+=(e=t[o])+":"+((n="date"===e||"x-sn-date"===e?this.requestDate.toUTCString():this.httpHeaders.firstValue(e))?n.trim():"")+"\n";return r}},{key:"canonicalSignedHeaderNames",value:function(t){return t.join(";")}},{key:"canonicalContentSHA256",value:function(){return this.contentDigest?a.stringify(this.contentDigest):t.EMPTY_STRING_SHA256_HEX}},{key:"canonicalHeaderNames",value:function(){var t=this.httpHeaders,e=this.signedHeaderNames,n=new Et;return n.put(qt.HOST,!0),this.useSnDate?n.put(qt.X_SN_DATE,!0):n.put(qt.DATE,!0),t.containsKey(qt.CONTENT_MD5)&&n.put(qt.CONTENT_MD5,!0),t.containsKey(qt.CONTENT_TYPE)&&n.put(qt.CONTENT_TYPE,!0),t.containsKey(qt.DIGEST)&&n.put(qt.DIGEST,!0),e&&e.length>0&&e.forEach(function(t){return n.put(t,!0)}),M(n.keySet())}},{key:"buildCanonicalRequestData",value:function(){return this.computeCanonicalRequestData(this.canonicalHeaderNames())}},{key:"computeCanonicalRequestData",value:function(t){var e=this.httpMethod+"\n";return e+=this.requestPath+"\n",e+=this.canonicalQueryParameters()+"\n",e+=this.canonicalHeaders(t),e+=this.canonicalSignedHeaderNames(t)+"\n",e+=this.canonicalContentSHA256()}},{key:"computeSigningKey",value:function(t){var e=l(this.requestDate);return u("snws2_request",u(e,"SNWS2"+t))}},{key:"computeSignatureData",value:function(t){return"SNWS2-HMAC-SHA256\n"+l(this.requestDate,!0)+"\n"+a.stringify(s(t))}},{key:"buildWithKey",value:function(t){var e=this.canonicalHeaderNames(),n=this.computeCanonicalRequestData(e),r=this.computeSignatureData(n),i=a.stringify(u(r,t));return"SNWS2 Credential="+this.tokenId+",SignedHeaders="+e.join(";")+",Signature="+i}},{key:"build",value:function(t){var e=this.computeSigningKey(t);return this.buildWithKey(e)}},{key:"buildWithSavedKey",value:function(){return this.buildWithKey(this.signingKey)}},{key:"signingKeyValid",get:function(){return!!(this.signingKey&&this.signingKeyExpiration instanceof Date&&Date.now()<this.signingKeyExpiration.getTime())}},{key:"requestDateHeaderValue",get:function(){return this.requestDate.toUTCString()}},{key:"useSnDate",get:function(){var t=this.signedHeaderNames;return(Array.isArray(t)?t.findIndex(O(qt.X_SN_DATE)):-1)>=0||this.httpHeaders.containsKey(qt.X_SN_DATE)},set:function(t){var e=this.signedHeaderNames,n=Array.isArray(e)?e.findIndex(O(qt.X_SN_DATE)):-1;t&&n<0?(e=e?e.concat(qt.X_SN_DATE):[qt.X_SN_DATE],this.signedHeaderNames=e):!t&&n>=0&&(e.splice(n,1),this.signedHeaderNames=e),this.httpHeaders.remove(qt.X_SN_DATE)}}]),t}();Object.defineProperties(Ft,{EMPTY_STRING_SHA256_HEX:{value:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},SNWS2_AUTH_SCHEME:{value:"SNWS2"}});var Wt=function(){function t(e){C(this,t);var n=e instanceof Rt?e:new Rt(e);this.environment=n,this._parameters=new Ht}return j(t,[{key:"env",value:function(){var t;return(t=this.environment).value.apply(t,arguments)}},{key:"parameter",value:function(){var t;return(t=this._parameters).value.apply(t,arguments)}},{key:"hostUrl",value:function(){var t=this.environment.useTls(),e=+this.environment.value("port"),n="http"+(t?"s":"")+"://"+this.environment.value("host");return(t&&e>0&&443!==e||!t&&e>0&&80!==e)&&(n+=":"+e),n}},{key:"hostWebSocketUrl",value:function(){var t=this.environment.useTls(),e=+this.environment.value("port"),n="ws"+(t?"s":"")+"://"+this.environment.value("host");return(t&&e>0&&443!==e||!t&&e>0&&80!==e)&&(n+=":"+e),n}},{key:"baseUrl",value:function(){return this.hostUrl()}},{key:"resolveTemplatePath",value:function(t){return this.hostUrl()+this.resolveTemplateUrl(t)}},{key:"resolveTemplateUrl",value:function(e){return t.resolveTemplateUrl(e,this._parameters)}},{key:"parameters",get:function(){return this._parameters}}],[{key:"resolveTemplateUrl",value:function(t,e){return t.replace(/\{([^}]+)\}/g,function(t,n){var r=e[n];return void 0!==r?encodeURIComponent(r):""})}}]),t}(),Vt=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"findLocationsUrl",value:function(t,e,n){return this.baseUrl()+"/location?"+t.toUriEncodingWithSorting(e,n)}},{key:"locationId",get:function(){var t=this.locationIds;return Array.isArray(t)&&t.length>0?t[0]:null},set:function(t){this.parameter("locationIds",t?[t]:null)}},{key:"locationIds",get:function(){return this.parameter("locationIds")},set:function(t){this.parameter("locationIds",t)}},{key:"sourceId",get:function(){var t=this.sourceIds;return Array.isArray(t)&&t.length>0?t[0]:null},set:function(t){this.parameter("sourceIds",t?[t]:t)}},{key:"sourceIds",get:function(){return this.parameter("sourceIds")},set:function(t){this.parameter("sourceIds",t)}}]),n}()},Kt=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"baseUrl",value:function(){var t=this.env("solarQueryPath")||"/solarquery",e=this.publicQuery;return this.hostUrl()+t+"/api/v1"+(e?"/pub":"/sec")}},{key:"publicQuery",get:function(){return!!this.env("publicQuery")},set:function(t){this.env("publicQuery",!!t)}}]),n}()},Qt=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"baseLocationDatumMetadataUrl",value:function(t){return this.baseUrl()+"/location/meta/"+(t||this.locationId)}},{key:"locationDatumMetadataUrlWithSource",value:function(t,e){var n=this.baseLocationDatumMetadataUrl(t),r=e||this.sourceId;return null!==e&&r&&(n+="?sourceId="+encodeURIComponent(r)),n}},{key:"viewLocationDatumMetadataUrl",value:function(t,e){return this.locationDatumMetadataUrlWithSource(t,e)}},{key:"addLocationDatumMetadataUrl",value:function(t,e){return this.locationDatumMetadataUrlWithSource(t,e)}},{key:"replaceLocationDatumMetadataUrl",value:function(t,e){return this.locationDatumMetadataUrlWithSource(t,e)}},{key:"deleteLocationDatumMetadataUrl",value:function(t,e){return this.locationDatumMetadataUrlWithSource(t,e)}},{key:"findLocationDatumMetadataUrl",value:function(t,e,n){var r=this.baseUrl()+"/location/meta",i=t.toUriEncodingWithSorting(e,n);return i.length>0&&(r+="?"+i),r}}]),n}()},Yt=function(t){function e(){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return H(e,t),e}(Qt(Kt(Vt(Wt)))),Gt=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"reportableIntervalUrl",value:function(t,e){var n=this.baseUrl()+"/location/datum/interval?locationId="+(t||this.locationId),r=e||this.sourceId;return null!==e&&r&&(n+="&sourceId="+encodeURIComponent(r)),n}},{key:"availableSourcesUrl",value:function(t,e,n){var r=this.baseUrl()+"/location/datum/sources?locationId="+(t||this.locationId);return e instanceof Date&&(r+="&start="+encodeURIComponent(Q(e))),n instanceof Date&&(r+="&end="+encodeURIComponent(Q(n))),r}},{key:"listDatumUrl",value:function(t,e,n){var r=this.baseUrl()+"/location/datum/list",i=t?t.toUriEncodingWithSorting(e,n):"";return i.length>0&&(r+="?"+i),r}},{key:"mostRecentDatumUrl",value:function(t,e,n){var r=this.baseUrl()+"/location/datum/mostRecent",i=t?t.toUriEncodingWithSorting(e,n):"";return i.length>0&&(r+="?"+i),r}}]),n}()},Jt=function(t){function e(){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return H(e,t),e}(Gt(Kt(Vt(Wt)))),Xt=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"listAllNodeIdsUrl",value:function(){return this.baseUrl()+"/nodes"}},{key:"nodeId",get:function(){var t=this.nodeIds;return Array.isArray(t)&&t.length>0?t[0]:null},set:function(t){this.parameter("nodeIds",t?[t]:null)}},{key:"nodeIds",get:function(){return this.parameter("nodeIds")},set:function(t){this.parameter("nodeIds",t)}},{key:"sourceId",get:function(){var t=this.sourceIds;return Array.isArray(t)&&t.length>0?t[0]:null},set:function(t){this.parameter("sourceIds",t?[t]:t)}},{key:"sourceIds",get:function(){return this.parameter("sourceIds")},set:function(t){this.parameter("sourceIds",t)}}]),n}()},Zt=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"baseNodeDatumMetadataUrl",value:function(t){return this.baseUrl()+"/datum/meta/"+(t||this.nodeId)}},{key:"nodeDatumMetadataUrlWithSource",value:function(t,e){var n=this.baseNodeDatumMetadataUrl(t),r=e||this.sourceId;return null!==e&&r&&(n+="?sourceId="+encodeURIComponent(r)),n}},{key:"viewNodeDatumMetadataUrl",value:function(t,e){return this.nodeDatumMetadataUrlWithSource(t,e)}},{key:"addNodeDatumMetadataUrl",value:function(t,e){return this.nodeDatumMetadataUrlWithSource(t,e)}},{key:"replaceNodeDatumMetadataUrl",value:function(t,e){return this.nodeDatumMetadataUrlWithSource(t,e)}},{key:"deleteNodeDatumMetadataUrl",value:function(t,e){return this.nodeDatumMetadataUrlWithSource(t,e)}},{key:"findNodeDatumMetadataUrl",value:function(t,e,n,r){var i=this.baseNodeDatumMetadataUrl(t),o="",a=e||this.sourceId;return null!==e&&a&&(o+="sourceId="+encodeURIComponent(a)),Array.isArray(n)&&n.forEach(function(t,e){t instanceof st&&(o.length>0&&(o+="&"),o+=t.toUriEncoding(e))}),r instanceof ut&&(o.length>0&&(o+="&"),o+=r.toUriEncoding()),o.length>0&&(i+="?"+o),i}},{key:"userMetadataUrl",value:function(t){var e=this.baseUrl()+"/users/meta",n=t||this.userId;return Array.isArray(n)&&(n=n.length>0?n[0]:null),n&&null!==t&&(e+="/"+n),e}},{key:"viewUserMetadataUrl",value:function(t){return this.userMetadataUrl(t)}}]),n}()},Bt=function(t){function e(){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return H(e,t),e}(Zt(Kt(Xt(Wt)))),$t=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"reportableIntervalUrl",value:function(t,e){var n=this.baseUrl()+"/range/interval?nodeId="+(t||this.nodeId),r=e||this.sourceIds;return Array.isArray(r)&&r.length>0&&(n+="&sourceIds="+r.map(function(t){return encodeURIComponent(t)}).join(",")),n}},{key:"availableSourcesUrl",value:function(t){var e=t||this.datumFilter(),n=this.baseUrl()+"/range/sources",r=e.toUriEncoding();return r.length>0&&(n+="?"+r),n}},{key:"listDatumUrl",value:function(t,e,n){var r=this.baseUrl()+"/datum/list",i=(t||this.datumFilter()).toUriEncodingWithSorting(e,n);return i.length>0&&(r+="?"+i),r}},{key:"datumReadingUrl",value:function(t,e,n){var r=this.baseUrl()+"/datum/reading",i=new Ut(t)||this.datumFilter();i.prop("readingType",e.name),n&&i.prop("tolerance",n);var o=i.toUriEncoding();return o.length>0&&(r+="?"+o),r}},{key:"datumFilter",value:function(){var t=new Ut,e=void 0;return(e=this.nodeIds)&&(t.nodeIds=e),(e=this.sourceIds)&&(t.sourceIds=e),t}},{key:"mostRecentDatumUrl",value:function(t,e,n){var r=this.baseUrl()+"/datum/mostRecent",i=(t||this.datumFilter()).toUriEncodingWithSorting(e,n);return i.length>0&&(r+="?"+i),r}}]),n}()},te=function(t){function e(){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return H(e,t),e}($t(Kt(Xt(Wt)))),ee=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"baseUrl",value:function(){var t=this.env("solarUserPath")||"/solaruser";return E(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"baseUrl",this).call(this)+t+"/api/v1/sec"}},{key:"viewNodesUrl",value:function(){return this.baseUrl()+"/nodes"}},{key:"viewPendingNodesUrl",value:function(){return this.baseUrl()+"/nodes/pending"}},{key:"viewArchivedNodesUrl",value:function(){return this.baseUrl()+"/nodes/archived"}},{key:"updateNodeArchivedStatusUrl",value:function(t,e){var n=Array.isArray(t)?t:t?[t]:this.nodeIds;return this.baseUrl()+"/nodes/archived?nodeIds="+n.join(",")+"&archived="+(e?"true":"false")}},{key:"userId",get:function(){var t=this.parameter("userIds");return Array.isArray(t)&&t.length>0?t[0]:null},set:function(t){this.parameter("userIds",[t])}},{key:"userIds",get:function(){return this.parameter("userIds")},set:function(t){this.parameter("userIds",t)}}]),n}()},ne=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"viewInstructionUrl",value:function(t){return this.baseUrl()+"/instr/view?id="+encodeURIComponent(t)}},{key:"viewActiveInstructionsUrl",value:function(t){return this.baseUrl()+"/instr/viewActive?nodeId="+(t||this.nodeId)}},{key:"viewPendingInstructionsUrl",value:function(t){return this.baseUrl()+"/instr/viewPending?nodeId="+(t||this.nodeId)}},{key:"updateInstructionStateUrl",value:function(t,e){return this.baseUrl()+"/instr/updateState?id="+encodeURIComponent(t)+"&state="+encodeURIComponent(e.name)}},{key:"queueInstructionUrl",value:function(t,e,n){var r,i,o=this.baseUrl()+"/instr/add?nodeId="+(n||this.nodeId)+"&topic="+encodeURIComponent(t);if(Array.isArray(e))for(r=0,i=e.length;r<i;r++)o+="&"+encodeURIComponent("parameters["+r+"].name")+"="+encodeURIComponent(e[r].name)+"&"+encodeURIComponent("parameters["+r+"].value")+"="+encodeURIComponent(e[r].value);return o}}],[{key:"instructionParameter",value:function(t,e){return{name:t,value:e}}}]),n}()},re=function(t){function e(){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return H(e,t),e}(ne(ee(Xt(Wt)))),ie=re.instructionParameter,oe=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"viewNodeMetadataUrl",value:function(t){return this.baseUrl()+"/nodes/meta/"+(t||this.nodeId)}},{key:"addNodeMetadataUrl",value:function(t){return this.viewNodeMetadataUrl(t)}},{key:"replaceNodeMetadataUrl",value:function(t){return this.viewNodeMetadataUrl(t)}},{key:"deleteNodeMetadataUrl",value:function(t){return this.viewNodeMetadataUrl(t)}},{key:"findNodeMetadataUrl",value:function(t,e,n){var r=Array.isArray(t)?t:t?[t]:null!==t?this.nodeIds:void 0,i=this.baseUrl()+"/nodes/meta",o="";return Array.isArray(r)&&(o+="nodeIds="+r.join(",")),Array.isArray(e)&&e.forEach(function(t,e){t instanceof st&&(o.length>0&&(o+="&"),o+=t.toUriEncoding(e))}),n instanceof ut&&(o.length>0&&(o+="&"),o+=n.toUriEncoding()),o.length>0&&(i+="?"+o),i}}]),n}()},ae=function(t){function e(){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return H(e,t),e}(oe(ee(Xt(Wt)))),ue=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"listAllAuthTokensUrl",value:function(){return this.baseUrl()+"/user/auth-tokens"}},{key:"generateAuthTokenUrl",value:function(t){return this.baseUrl()+"/user/auth-tokens/generate/"+t.name}},{key:"authTokenUrl",value:function(t){return this.baseUrl()+"/user/auth-tokens/"+encodeURIComponent(t)}},{key:"deleteAuthTokenUrl",value:function(t){return this.authTokenUrl(t)}},{key:"updateAuthTokenSecurityPolicyUrl",value:function(t){return this.authTokenUrl(t)}},{key:"replaceAuthTokenSecurityPolicyUrl",value:function(t){return this.authTokenUrl(t)}},{key:"updateAuthTokenStatusUrl",value:function(t,e){return this.authTokenUrl(t)+"?status="+encodeURIComponent(e.name)}}]),n}()},se=function(t){function e(){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return H(e,t),e}(ue(ee(Wt))),ce=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"findUserMetadataUrl",value:function(t){var e=this.baseUrl()+"/users/meta";if(t){var n=t.toUriEncoding();n.length>0&&(e+="?"+n)}return e}},{key:"userMetadataUrl",value:function(t){var e=this.baseUrl()+"/users/meta",n=t||this.userId;return Array.isArray(n)&&(n=n.length>0?n[0]:null),n&&null!==t&&(e+="/"+n),e}},{key:"viewUserMetadataUrl",value:function(t){return this.userMetadataUrl(t)}},{key:"addUserMetadataUrl",value:function(t){return this.userMetadataUrl(t)}},{key:"replaceUserMetadataUrl",value:function(t){return this.userMetadataUrl(t)}},{key:"deleteUserMetadataUrl",value:function(t){return this.userMetadataUrl(t)}}]),n}()},le=function(t){function e(){return C(this,e),R(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return H(e,t),e}(ce(ee(Wt))),he=2,fe=Object.freeze({DEBUG:4,INFO:3,WARN:2,ERROR:1,OFF:0}),de=function(){function t(){C(this,t)}return j(t,null,[{key:"debug",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[4].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[3].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[2].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];T.apply(void 0,[1].concat(e))}}]),t}();Object.defineProperties(de,{level:{get:function(){return he},set:function(t){he="number"==typeof t?t:0}}}),t.arrayData=D,t.nestData=Z,t.Aggregations=W,t.Aggregation=z,t.AuthTokenStatuses=tt,t.AuthTokenStatus=B,t.AuthTokenTypes=rt,t.AuthTokenType=et,t.CombiningTypes=at,t.CombiningType=it,t.DatumFilter=Ut,t.DatumReadingTypes=It,t.DatumReadingType=_t,t.GeneralMetadata=Pt,t.stringMapToObject=y,t.objectToStringMap=v,t.InstructionStates=Mt,t.InstructionState=At,t.Location=lt,t.LocationPrecisions=Tt,t.LocationPrecision=wt,t.Pagination=ut,t.SecurityPolicy=Dt,t.SecurityPolicyBuilder=jt,t.SortDescriptor=st,t.timestampFormat=V,t.dateTimeFormat=K,t.dateTimeUrlFormat=Q,t.dateFormat=Y,t.timestampParse=G,t.dateTimeParse=J,t.dateParser=function(t){return i.isoParse(t)||G(t)||J(t)},t.iso8601Date=l,t.seasonForDate=function(t){var e=t.getUTCMonth?t.getUTCMonth():Number(t);return e<2||11===e?3:e<5?0:e<8?1:2},t.dateTimeUrlParse=i.isoParse,t.dateParse=i.isoParse,t.displayScaleForValue=function(t){var e=1,n=Math.abs(Number(t));return!1===isNaN(n)&&(n>=1e9?e=1e9:n>=1e6?e=1e6:n>=1e3&&(e=1e3)),e},t.displayUnitsForScale=function(t,e){return(1e9===e?"G":1e6===e?"M":1e3===e?"k":"")+t},t.AuthTokenUrlHelperMixin=function(t){return function(e){function n(){return C(this,n),R(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return H(n,t),j(n,[{key:"refreshTokenV2Url",value:function(t){return this.baseUrl()+"/auth-tokens/refresh/v2?date="+encodeURIComponent(Y(t||new Date))}}]),n}()},t.AuthorizationV2Builder=Ft,t.Environment=Rt,t.HttpHeaders=qt,t.HttpContentType=xt,t.HttpMethod=Lt,t.LocationDatumMetadataUrlHelperMixin=Qt,t.LocationDatumMetadataUrlHelper=Yt,t.LocationDatumUrlHelperMixin=Gt,t.LocationDatumUrlHelper=Jt,t.LocationUrlHelperMixin=Vt,t.NodeDatumMetadataUrlHelperMixin=Zt,t.NodeDatumMetadataUrlHelper=Bt,t.NodeDatumUrlHelperMixin=$t,t.NodeDatumUrlHelper=te,t.NodeInstructionUrlHelperMixin=ne,t.NodeInstructionUrlHelper=re,t.instructionParameter=ie,t.NodeMetadataUrlHelperMixin=oe,t.NodeMetadataUrlHelper=ae,t.NodeUrlHelperMixin=Xt,t.QueryUrlHelperMixin=Kt,t.SolarQueryDefaultPath="/solarquery",t.SolarQueryPathKey="solarQueryPath",t.SolarQueryApiPathV1="/api/v1",t.SolarQueryPublicPathKey="publicQuery",t.UserAuthTokenUrlHelperMixin=ue,t.UserAuthTokenUrlHelper=se,t.UserUrlHelperMixin=ee,t.SolarUserDefaultPath="/solaruser",t.SolarUserPathKey="solarUserPath",t.SolarUserApiPathV1="/api/v1/sec",t.UserMetadataUrlHelperMixin=ce,t.UserMetadataUrlHelper=le,t.UrlHelper=Wt,t.urlQuery=zt,t.ComparableEnum=q,t.Configuration=Ht,t.dateUtils=X,t.Enum=x,t.Logger=de,t.logLevels=fe,t.MultiMap=Et,t.PropMap=ct,Object.defineProperty(t,"__esModule",{value:!0})});