!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array"),require("d3-collection"),require("d3-time"),require("d3-time-format"),require("crypto-js/enc-base64"),require("crypto-js/enc-hex"),require("crypto-js/hmac-sha256"),require("crypto-js/sha256"),require("uri-js")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-time","d3-time-format","crypto-js/enc-base64","crypto-js/enc-hex","crypto-js/hmac-sha256","crypto-js/sha256","uri-js"],t):(e=e||self,t(e.sn={},e.d3,e.d3,e.d3,e.d3,e.CryptoJS.Base64,e.CryptoJS.Hex,e.CryptoJS.HmacSHA256,e.CryptoJS.SHA256,e.URI))}(this,function(e,t,n,r,i,a,o,u,s,l){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?m(e):t}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=k(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function w(e,t){return I(e)||b(e,t)||A()}function I(e){if(Array.isArray(e))return e}function b(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function S(e,t){return e.getUTCFullYear()+(e.getUTCMonth()<9?"0":"")+(e.getUTCMonth()+1)+(e.getUTCDate()<10?"0":"")+e.getUTCDate()+(t?"T"+(e.getUTCHours()<10?"0":"")+e.getUTCHours()+(e.getUTCMinutes()<10?"0":"")+e.getUTCMinutes()+(e.getUTCSeconds()<10?"0":"")+e.getUTCSeconds()+"Z":"")}function D(e){return e?e.date?e.date:e.localDate?re(e.localDate+(e.localTime?" "+e.localTime:" 00:00")):e.created?ne(e.created)||i.isoParse(e.created):void 0:null}function M(e,n,r){var i,a,o,u,s,l=0,c=e.length-1;if(c>0)for(;l<t.max(e.map(function(e){return e.values.length}));){for(o=void 0,i=0;i<=c;i++)if(!(e[i].values.length<=l)&&(a=i<c?i+1:0,e[a].values.length<=l||e[i].values[l].date.getTime()<e[a].values[l].date.getTime())){if(o={date:e[i].values[l].date,sourceId:e[a].key},n)for(u in n)n.hasOwnProperty(u)&&(o[u]=n[u]);r&&(s=e[a].values.length>l?l:l>0?l-1:null,r(o,e[a].key,null!==s?e[a].values[s]:void 0)),e[a].values.splice(l,0,o)}void 0===o&&l++}}function P(e){if(!(e instanceof Map&&e.size>0))return null;var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;u[1]instanceof Set&&t.push("".concat(u[0],":").concat(Array.from(u[1]).join(",")))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}function T(e,t){if(e===De||e===be||e===Pe||e===Ne){if(Array.isArray(t)&&1===t.length)return[e.substring(0,e.length-1),t[0]]}else{if(e===Te||e===Ie)return[e,ee(t)];if(e===Ae&&!t)return null;if(e===Se||e===Me){var n=P(t);return n?[e,n,!0]:null}}return e}function N(e){var t=Object.create(null);if(e){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=w(a.value,2),s=u[0],l=u[1];t[s]=l instanceof Map?N(l):l}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}return t}function O(e){var t=new Map;if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],a=e[i];t.set(i,"object"===c(a)?O(a):a)}return t}function C(e){var t=null;return e instanceof Set?t=e.size>0?e:null:Array.isArray(e)?t=e.length>0?new Set(e):null:e&&(t=new Set([e])),t}function E(e,t){var n=C(e),r=C(t);if(null===n&&null===r)return null;if(null===r)return n;if(null===n)return r;var i=!0,a=!1,o=void 0;try{for(var u,s=r.values()[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;n.add(l)}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}function H(e,t,n,r){if(void 0===n)return e;var i=t.toLowerCase(),a=e.mappings[i];if(a||(a={key:t,val:[]},e.mappings[i]=a,e.mappingNames.push(i)),r&&(a.val.length=0),Array.isArray(n))for(var o=n.length,u=0;u<o;u+=1)a.val.push(n[u]);else a.val.push(n);return e}function _(e,t){return function(){return e.map[t]}}function j(e,t){return function(n){e.map[t]=n}}function R(e,t){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:_(e,t),set:j(e,t)})}function x(e){return e?e.replace(/:$/,""):"https"}function L(e){var t=Object.assign({host:"data.solarnetwork.net"},e);return t.protocol=x(t.protocol||"https"),t.port=t.port||("https"===t.protocol?443:80),t.host=t.port&&t.hostname?t.hostname:t.host,t}function z(e,t){var n,r,i,a,o,u,s={};if(void 0!==e&&e.length>0)for(e.match(/^\?/)&&(e=e.substring(1)),i=0,a=(n=e.split("&")).length;i<a;i++)2===(r=n[i].split("=",2)).length&&(o=decodeURIComponent(r[0]),u=decodeURIComponent(r[1]),s[o]?(Array.isArray(s[o])||(s[o]=[s[o]]),s[o].push(u)):t&&t.has(o)?s[o]=[u]:s[o]=u);return s}function F(e){var t=e.toLowerCase();return function(e){return t===e.toString().toLowerCase()}}function q(e){for(var t=[],n=e.length,r=0;r<n;r+=1)t.push(e[r].toLowerCase());return t.sort(),t}function V(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}function W(e){return encodeURIComponent(e).replace(/[!'()*]/g,V)}function B(e){if(!(e>Ot)&&console){var t;switch(e){case 1:t=console.error;break;case 2:t=console.warn;break;case 3:t=console.info}if(t||(t=console.log),t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.apply(void 0,r)}}}a=a&&a.hasOwnProperty("default")?a.default:a,o=o&&o.hasOwnProperty("default")?o.default:o,u=u&&u.hasOwnProperty("default")?u.default:u,s=s&&s.hasOwnProperty("default")?s.default:s;var K=Object.freeze({timeNormalizeDataArray:function(e,t){var n=1e3*t.level;if(!Array.isArray(e)||e.length<2)return e;for(var r=0;r<e.length-1;){var i=e[r],a=i.date.getTime(),o=a+n,u=e[r+1].date.getTime();if(u>o){for(var s=[r+1,0],l=a+n;l<u;l+=n){var c=Object.create(Object.getPrototypeOf(i),Object.getOwnPropertyDescriptors(i));for(var h in c)c[h]=null;c.date=new Date(l),s.push(c)}Array.prototype.splice.apply(e,s),r+=s.length}r+=1}}}),Q=function(){function e(t){h(this,e),this._name=t,this.constructor===e&&Object.freeze(this)}return d(e,[{key:"equals",value:function(e){return this.constructor===e.constructor?e.name===this.name:e===this.name}},{key:"name",get:function(){return this._name}}],[{key:"enumValues",value:function(){return[]}},{key:"enumsValue",value:function(e){return Object.freeze(e.reduce(function(e,t){return e[t.name]=t,e},{}))}},{key:"valueOf",value:function(e){var t=this.enumValues();if(Array.isArray(t))for(var n=0,r=t.length;n<r;n+=1)if(e===t[n].name)return t[n]}},{key:"namesFor",value:function(e){var t=[];if(e){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;t.push(u.name)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}return t}}]),e}(),Y=function(e){function t(e,n){var r;return h(this,t),r=g(this,p(t).call(this,e)),r._value=n,r.constructor===t&&Object.freeze(m(r)),r}return y(t,Q),d(t,[{key:"compareTo",value:function(e){return this.value<e.value?-1:this.value>e.value?1:0}},{key:"value",get:function(){return this._value}}],[{key:"minimumEnumSet",value:function(e,t){if(!e)return null;var n=t?t.get(e.name):void 0;if(n)return n;n=new Set;var r=!0,i=!1,a=void 0;try{for(var o,u=e.constructor.enumValues()[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;s.compareTo(e)>-1&&n.add(s)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return t&&t.set(e.name,n),n.size>0?n:null}}]),t}(),G=function(e){function t(e,n){var r;return h(this,t),(r=g(this,p(t).call(this,e,n))).constructor===t&&Object.freeze(m(r)),r}return y(t,Y),d(t,[{key:"level",get:function(){return this.value}}],[{key:"enumValues",value:function(){return J}}]),t}(),J=Object.freeze([new G("Minute",60),new G("FiveMinute",300),new G("TenMinute",600),new G("FifteenMinute",900),new G("ThirtyMinute",1800),new G("Hour",3600),new G("HourOfDay",3600),new G("SeasonalHourOfDay",3600),new G("Day",86400),new G("DayOfWeek",86400),new G("SeasonalDayOfWeek",86400),new G("Week",604800),new G("WeekOfYear",604800),new G("Month",2419200),new G("Year",31536e3),new G("RunningTotal",Number.MAX_SAFE_INTEGER)]),X=G.enumsValue(J),Z=i.utcFormat("%Y-%m-%d %H:%M:%S.%LZ"),$=i.utcFormat("%Y-%m-%d %H:%M"),ee=i.utcFormat("%Y-%m-%dT%H:%M"),te=i.utcFormat("%Y-%m-%d"),ne=i.utcParse("%Y-%m-%d %H:%M:%S.%LZ"),re=i.utcParse("%Y-%m-%d %H:%M"),ie=Object.freeze({datumDate:D,rollingQueryDateRange:function(e,t,n){function i(e,t){var n=e.ceil(t);return n.getTime()===t.getTime()&&(n=e.offset(n,1)),n}function a(e){var n;return"number"!=typeof(n=isNaN(Number(t))?void 0!==t[e]?Number(t[e]):1:t)&&(n=1),n}n=n||new Date;var o,u,s,l;if(e.compareTo(X.Hour)<0){l=a("numHours"),s=X.Hour,o=i(r.utcMinute,n);var c=Math.min(30,e.level/60);o.setUTCMinutes(o.getUTCMinutes()+c-o.getUTCMinutes()%c,0,0),u=r.utcHour.offset(o,-l)}else X.Month.equals(e)?(l=a("numYears"),s=X.Year,o=i(r.utcMonth,n),u=r.utcYear.offset(r.utcMonth.floor(n),-l)):X.Day.equals(e)?(l=a("numMonths"),s=X.Month,o=i(r.utcDay,n),u=r.utcMonth.offset(r.utcDay.floor(n),-l)):(l=a("numDays"),s=X.Day,o=i(r.utcHour,n),u=r.utcDay.offset(r.utcHour.floor(o),-l));return{start:u,end:o,timeUnit:s,timeCount:l,aggregate:e}}}),ae=Object.freeze({aggregateNestedDataLayers:function(e,t,n,r,i){var a,o,u,s,l,c,h,f,d=e.length,y=n?n.length:0,p=r?r.length:0;if((a=e[0].values.length)>0){for(f=[],o=0;o<a;o+=1){if(l=e[0].values[o],h={},void 0!==i)for(c in i)i.hasOwnProperty(c)&&(h[c]=i[c]);for(s=0;s<y;s+=1)h[n[s]]=l[n[s]];for(s=0;s<p;s+=1)h[r[s]]=0;for(u=0;u<d;u+=1)for(s=0;s<p;s+=1)void 0!==(c=e[u].values[o][r[s]])&&(h[r[s]]+=c);f.push(h)}e=[{key:t,values:f}]}return e},groupedBySourceMetricDataArray:function(e,r,i,a){var o=function(e){return e[r]},u="function"==typeof a?a:t.sum,s=n.nest().key(function(e){return i&&i.has(e.sourceId)?i.get(e.sourceId):e.sourceId}).sortKeys(t.ascending).key(function(e){return e.localDate+" "+e.localTime}).rollup(function(e){var t={date:D(e[0])},n=e[0].sourceId;return i&&i.has(n)&&(n=i.get(n)),t[n]=u(e,o),t}).entries(e).map(function(e){return{key:e.key,values:e.values.map(function(e){return e.value})}});return M(s,null,function(e,t){e[t]=null}),s.reduce(function(e,t){return e?(e.forEach(function(e,n){var r=t.values[n][t.key];e[t.key]=r}),e):t.values},null)},normalizeNestedStackDataByDate:M}),oe=function(e){function t(e){var n;return h(this,t),(n=g(this,p(t).call(this,e))).constructor===t&&Object.freeze(m(n)),n}return y(t,Q),d(t,null,[{key:"enumValues",value:function(){return ue}}]),t}(),ue=Object.freeze([new oe("Active"),new oe("Disabled")]),se=oe.enumsValue(ue),le=function(e){function t(e){var n;return h(this,t),(n=g(this,p(t).call(this,e))).constructor===t&&Object.freeze(m(n)),n}return y(t,Q),d(t,null,[{key:"enumValues",value:function(){return ce}}]),t}(),ce=Object.freeze([new le("ReadNodeData"),new le("User")]),he=le.enumsValue(ce),fe=function(e){function t(e){var n;return h(this,t),(n=g(this,p(t).call(this,e))).constructor===t&&Object.freeze(m(n)),n}return y(t,Q),d(t,null,[{key:"enumValues",value:function(){return de}}]),t}(),de=Object.freeze([new fe("Average"),new fe("Sum")]),ye=fe.enumsValue(de),pe=function(e){function t(e){var n;return h(this,t),(n=g(this,p(t).call(this,e))).constructor===t&&Object.freeze(m(n)),n}return y(t,Q),d(t,null,[{key:"enumValues",value:function(){return ve}}]),t}(),ve=Object.freeze([new pe("Reset")]),me=pe.enumsValue(ve),ge=function(){function e(t,n){h(this,e),this._max=t>0?+t:0,this._offset=n>0?+n:0}return d(e,[{key:"withOffset",value:function(t){return new e(this.max,t)}},{key:"toUriEncoding",value:function(){var e="";return this.max>0&&(e+="max="+this.max),this.offset>0&&(e.length>0&&(e+="&"),e+="offset="+this.offset),e}},{key:"max",get:function(){return this._max}},{key:"offset",get:function(){return this._offset}}]),e}(),ke=function(){function e(t,n){h(this,e),this._key=t,this._descending=!!n}return d(e,[{key:"toUriEncoding",value:function(e,t){var n,r=t||"sorts";return n=void 0!==e&&e>=0?encodeURIComponent(r+"["+e+"].key")+"=":"key=",n+=encodeURIComponent(this.key),this.descending&&(n+=void 0!==e&&e>=0?"&"+encodeURIComponent(r+"["+e+"].descending")+"=true":"&descending=true"),n}},{key:"key",get:function(){return this._key}},{key:"descending",get:function(){return this._descending}}]),e}(),Ue=function(){function e(t){h(this,e),this.props=t instanceof e?t.properties():"object"===c(t)?t:{}}return d(e,[{key:"prop",value:function(e,t){return 1===arguments.length?this.props[e]:(null===t?delete this.props[e]:this.props[e]=t,this)}},{key:"properties",value:function(e){if(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this.prop(r,e[r])}return this}return Object.assign({},this.props)}},{key:"toUriEncoding",value:function(e,t){for(var n=this,r="",i=0,a=Object.keys(this.props);i<a.length;i++){(function(){var o=a[i];r.length>0&&(r+="&");var u=n.props[o],s=!1;if(t){var l=t(o,u);if(null===l)return"continue";Array.isArray(l)&&l.length>1&&(o=l[0],u=l[1],l.length>2&&(s=!!l[2]))}if("function"==typeof u.toUriEncoding)return r+=u.toUriEncoding(e?encodeURIComponent(e)+"."+o:o),"continue";e&&(r+=encodeURIComponent(e)+"."),r+=encodeURIComponent(o)+"=",Array.isArray(u)?u.forEach(function(e,t){t>0&&(r+=s?"&"+encodeURIComponent(o)+"=":","),e instanceof Q&&(e=e.name),r+=encodeURIComponent(e)}):(u instanceof Q&&(u=u.name),r+=encodeURIComponent(u))})()}return r}},{key:"toUriEncodingWithSorting",value:function(e,t,n,r){var i=this.toUriEncoding(n,r);if(Array.isArray(e)&&e.forEach(function(e,t){e instanceof ke&&(i.length>0&&(i+="&"),i+=e.toUriEncoding(t))}),t instanceof ge){var a=t.toUriEncoding();a&&(i.length>0&&(i+="&"),i+=a)}return i}}]),e}(),we=function(e){function t(e){return h(this,t),g(this,p(t).call(this,e))}return y(t,Ue),d(t,[{key:"id",get:function(){return this.prop("id")},set:function(e){this.prop("id",e)}},{key:"name",get:function(){return this.prop("name")},set:function(e){this.prop("name",e)}},{key:"country",get:function(){return this.prop("country")},set:function(e){this.prop("country",e)}},{key:"region",get:function(){return this.prop("region")},set:function(e){this.prop("region",e)}},{key:"stateOrProvince",get:function(){return this.prop("stateOrProvince")},set:function(e){this.prop("stateOrProvince",e)}},{key:"locality",get:function(){return this.prop("locality")},set:function(e){this.prop("locality",e)}},{key:"postalCode",get:function(){return this.prop("postalCode")},set:function(e){this.prop("postalCode",e)}},{key:"street",get:function(){return this.prop("street")},set:function(e){this.prop("street",e)}},{key:"latitude",get:function(){return this.prop("latitude")},set:function(e){this.prop("latitude",e)}},{key:"longitude",get:function(){return this.prop("longitude")},set:function(e){this.prop("longitude",e)}},{key:"elevation",get:function(){return this.prop("elevation")},set:function(e){this.prop("elevation",e)}},{key:"timeZoneId",get:function(){return this.prop("timeZoneId")},set:function(e){this.prop("timeZoneId",e)}}]),t}(),Ie="endDate",be="locationIds",Ae="mostRecent",Se="nodeIdMaps",De="nodeIds",Me="sourceIdMaps",Pe="sourceIds",Te="startDate",Ne="userIds",Oe=function(e){function t(e){return h(this,t),g(this,p(t).call(this,e))}return y(t,Ue),d(t,[{key:"toUriEncoding",value:function(e,n){return U(p(t.prototype),"toUriEncoding",this).call(this,e,n||T)}},{key:"nodeId",get:function(){var e=this.nodeIds;return Array.isArray(e)&&e.length>0?e[0]:null},set:function(e){this.nodeIds=e?[e]:null}},{key:"nodeIds",get:function(){return this.prop(De)},set:function(e){this.prop(De,Array.isArray(e)?e:null)}},{key:"locationId",get:function(){var e=this.locationIds;return Array.isArray(e)&&e.length>0?e[0]:null},set:function(e){this.locationIds=e?[e]:null}},{key:"locationIds",get:function(){return this.prop(be)},set:function(e){this.prop(be,Array.isArray(e)?e:null)}},{key:"sourceId",get:function(){var e=this.sourceIds;return Array.isArray(e)&&e.length>0?e[0]:null},set:function(e){this.sourceIds=e?[e]:null}},{key:"sourceIds",get:function(){return this.prop(Pe)},set:function(e){this.prop(Pe,Array.isArray(e)?e:null)}},{key:"userId",get:function(){var e=this.userIds;return Array.isArray(e)&&e.length>0?e[0]:null},set:function(e){this.userIds=e?[e]:null}},{key:"userIds",get:function(){return this.prop(Ne)},set:function(e){this.prop(Ne,Array.isArray(e)?e:null)}},{key:"mostRecent",get:function(){return!!this.prop(Ae)},set:function(e){this.prop(Ae,!!e)}},{key:"startDate",get:function(){return this.prop(Te)},set:function(e){this.prop(Te,e)}},{key:"endDate",get:function(){return this.prop(Ie)},set:function(e){this.prop(Ie,e)}},{key:"dataPath",get:function(){return this.prop("dataPath")},set:function(e){this.prop("dataPath",e)}},{key:"aggregation",get:function(){return this.prop("aggregation")},set:function(e){this.prop("aggregation",e instanceof G?e:null)}},{key:"tags",get:function(){return this.prop("tags")},set:function(e){this.prop("tags",Array.isArray(e)?e:null)}},{key:"location",get:function(){return this.prop("location")},set:function(e){this.prop("location",e instanceof we?e:null)}},{key:"query",get:function(){return this.prop("query")},set:function(e){this.prop("query",e)}},{key:"metadataFilter",get:function(){return this.prop("metadataFilter")},set:function(e){this.prop("metadataFilter",e)}},{key:"withoutTotalResultsCount",get:function(){return this.prop("withoutTotalResultsCount")},set:function(e){this.prop("withoutTotalResultsCount",!!e)}},{key:"combiningType",get:function(){return this.prop("combiningType")},set:function(e){this.prop("combiningType",e instanceof fe?e:null)}},{key:"nodeIdMaps",get:function(){return this.prop(Se)},set:function(e){this.prop(Se,e instanceof Map?e:null)}},{key:"sourceIdMaps",get:function(){return this.prop(Me)},set:function(e){this.prop(Me,e instanceof Map?e:null)}}]),t}(),Ce=function(e){function t(e,n){var r;return h(this,t),r=g(this,p(t).call(this,e)),r._key=n,r.constructor===t&&Object.freeze(m(r)),r}return y(t,Q),d(t,[{key:"key",get:function(){return this._key}}],[{key:"enumValues",value:function(){return Ee}}]),t}(),Ee=Object.freeze([new Ce("CalculatedAt","at"),new Ce("CalculatedAtDifference","atd"),new Ce("NearestDifference","diff"),new Ce("Difference","delta"),new Ce("DifferenceWithin","change")]),He=Ce.enumsValue(Ee),_e=function(e){function t(e,n){var r;return h(this,t),r=g(this,p(t).call(this,e)),r._bitNumber=n,r.constructor===t&&Object.freeze(m(r)),r}return y(t,Q),d(t,[{key:"bitmaskBitNumber",get:function(){return this._bitNumber}},{key:"bitmaskBitOffset",get:function(){return this._bitNumber-1}}],[{key:"enumForBitNumber",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if(u.bitmaskBitNumber==e)return u}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}},{key:"bitmaskValue",value:function(e){var t=0;if(null!=e){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;u.bitmaskBitOffset>=0&&(t|=1<<u.bitmaskBitOffset)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}return t}},{key:"setForBitmaskEnum",value:function(e,n){return t.setForBitmask(e,n.enumValues())}},{key:"setForBitmask",value:function(e,t){if(e<1)return new Set;var n=new Set,r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,l=s.bitmaskBitOffset;l>=0&&1==(e>>l&1)&&n.add(s)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}]),t}(),je=function(e){function t(e,n){var r;return h(this,t),(r=g(this,p(t).call(this,e,n))).constructor===t&&Object.freeze(m(r)),r}return y(t,_e),d(t,[{key:"code",get:function(){return this.bitmaskBitNumber}}],[{key:"forCode",value:function(e){return _e.enumForBitNumber(e,Re)}},{key:"enumValues",value:function(){return Re}}]),t}(),Re=Object.freeze([new je("Unknown",0),new je("Normal",1),new je("Starting",2),new je("Standby",3),new je("Shutdown",4),new je("Fault",5),new je("Disabled",6),new je("Recovery",7),new je("Override",8)]),xe=je.enumsValue(Re),Le=function(){function e(t,n,r){h(this,e),this.info=t||null,this.propertyInfo=n||null,this.tags=r instanceof Set?r:Array.isArray(r)?new Set(r):null}return d(e,[{key:"toJsonEncoding",value:function(){var e={},t=this.info;t&&(e.m=N(t));var n=this.propertyInfo;n&&(e.pm=N(n));var r=this.tags;return r&&(e.t=Array.from(r)),JSON.stringify(e)}}],[{key:"fromJsonEncoding",value:function(t){var n,r,i;if(t){var a=JSON.parse(t);n=a.m?O(a.m):null,r=a.pm?O(a.pm):null,i=Array.isArray(a.t)?new Set(a.t):null}return new e(n,r,i)}}]),e}(),ze=function(e){function t(e){var n;return h(this,t),(n=g(this,p(t).call(this,e))).constructor===t&&Object.freeze(m(n)),n}return y(t,Q),d(t,null,[{key:"enumValues",value:function(){return Fe}}]),t}(),Fe=Object.freeze([new ze("Unknown"),new ze("Queued"),new ze("Received"),new ze("Executing"),new ze("Declined"),new ze("Completed")]),qe=ze.enumsValue(Fe),Ve=function(e){function t(e,n){var r;return h(this,t),(r=g(this,p(t).call(this,e,n))).constructor===t&&Object.freeze(m(r)),r}return y(t,Y),d(t,[{key:"precision",get:function(){return this.value}}],[{key:"enumValues",value:function(){return We}}]),t}(),We=Object.freeze([new Ve("LatLong",1),new Ve("Block",5),new Ve("Street",10),new Ve("PostalCode",20),new Ve("Locality",30),new Ve("StateOrProvince",40),new Ve("Region",50),new Ve("TimeZone",60),new Ve("Country",70)]),Be=Ve.enumsValue(We),Ke=function(){function e(t,n,r,i,a,o,u,s){h(this,e),this._nodeIds=C(t),this._sourceIds=C(n),this._aggregations=C(r),this._minAggregation=i instanceof G?i:null,this._locationPrecisions=C(a),this._minLocationPrecision=o instanceof Ve?o:null,this._nodeMetadataPaths=C(u),this._userMetadataPaths=C(s),this.constructor===e&&Object.freeze(this)}return d(e,[{key:"toJsonEncoding",value:function(){var e={},t=this.nodeIds;return t&&(e.nodeIds=Array.from(t)),(t=this.sourceIds)&&(e.sourceIds=Array.from(t)),(t=this.aggregations)&&(e.aggregations=Array.from(t).map(function(e){return e.name})),(t=this.locationPrecisions)&&(e.locationPrecisions=Array.from(t).map(function(e){return e.name})),(t=this.minAggregation)&&(e.length>0&&(e+="&"),e.minAggregation=t.name),(t=this.minLocationPrecision)&&(e.minLocationPrecision=t.name),(t=this.nodeMetadataPaths)&&(e.nodeMetadataPaths=Array.from(t)),(t=this.userMetadataPaths)&&(e.userMetadataPaths=Array.from(t)),JSON.stringify(e)}},{key:"nodeIds",get:function(){return this._nodeIds}},{key:"sourceIds",get:function(){return this._sourceIds}},{key:"aggregations",get:function(){return this._aggregations}},{key:"locationPrecisions",get:function(){return this._locationPrecisions}},{key:"minAggregation",get:function(){return this._minAggregation}},{key:"minLocationPrecision",get:function(){return this._minLocationPrecision}},{key:"nodeMetadataPaths",get:function(){return this._nodeMetadataPaths}},{key:"userMetadataPaths",get:function(){return this._userMetadataPaths}}]),e}(),Qe=new Map,Ye=new Map,Ge=function(){function e(){h(this,e)}return d(e,[{key:"withPolicy",value:function(e){return e&&this.withAggregations(e.aggregations).withMinAggregation(e.minAggregation).withLocationPrecisions(e.locationPrecisions).withMinLocationPrecision(e.minLocationPrecision).withNodeIds(e.nodeIds).withSourceIds(e.sourceIds).withNodeMetadataPaths(e.nodeMetadataPaths).withUserMetadataPaths(e.userMetadataPaths),this}},{key:"addPolicy",value:function(e){return e&&(this.addAggregations(e.aggregations).addLocationPrecisions(e.locationPrecisions).addNodeIds(e.nodeIds).addSourceIds(e.sourceIds).addNodeMetadataPaths(e.nodeMetadataPaths).addUserMetadataPaths(e.userMetadataPaths),e.minAggregation&&this.withMinAggregation(e.minAggregation),e.minLocationPrecision&&this.withMinLocationPrecision(e.minLocationPrecision)),this}},{key:"withNodeIds",value:function(e){return this.nodeIds=C(e),this}},{key:"addNodeIds",value:function(e){return this.withNodeIds(E(this.nodeIds,e))}},{key:"withNodeMetadataPaths",value:function(e){return this.nodeMetadataPaths=C(e),this}},{key:"addNodeMetadataPaths",value:function(e){return this.withNodeMetadataPaths(E(this.nodeMetadataPaths,e))}},{key:"withUserMetadataPaths",value:function(e){return this.userMetadataPaths=C(e),this}},{key:"addUserMetadataPaths",value:function(e){return this.withUserMetadataPaths(E(this.userMetadataPaths,e))}},{key:"withSourceIds",value:function(e){return this.sourceIds=C(e),this}},{key:"addSourceIds",value:function(e){return this.withSourceIds(E(this.sourceIds,e))}},{key:"withAggregations",value:function(e){return this.aggregations=C(e),this}},{key:"addAggregations",value:function(e){return this.withAggregations(E(this.aggregations,e))}},{key:"withLocationPrecisions",value:function(e){return this.locationPrecisions=C(e),this}},{key:"addLocationPrecisions",value:function(e){return this.withLocationPrecisions(E(this.locationPrecisions,e))}},{key:"withMinAggregation",value:function(e){return this.minAggregation=e,this}},{key:"buildAggregations",value:function(){var e=this.minAggregation,t=this.aggregations;return!e&&t&&t.size>0?t:e?G.minimumEnumSet(e,Qe):null}},{key:"withMinLocationPrecision",value:function(e){return this.minLocationPrecision=e,this}},{key:"buildLocationPrecisions",value:function(){var e=this.minLocationPrecision,t=this.locationPrecisions;return!e&&t&&t.size>0?t:e?Ve.minimumEnumSet(e,Ye):null}},{key:"build",value:function(){return new Ke(this.nodeIds,this.sourceIds,this.buildAggregations(),this.minAggregation,this.buildLocationPrecisions(),this.minLocationPrecision,this.nodeMetadataPaths,this.userMetadataPaths)}}]),e}(),Je=function(e){function t(e,n){var r;return h(this,t),(r=g(this,p(t).call(this,e,n))).constructor===t&&Object.freeze(m(r)),r}return y(t,_e),d(t,[{key:"code",get:function(){return this.bitmaskBitNumber}}],[{key:"forCode",value:function(e){return _e.enumForBitNumber(e,Xe)}},{key:"enumValues",value:function(){return Xe}}]),t}(),Xe=Object.freeze([new Je("Clear",1),new Je("ScatteredClouds",2),new Je("Cloudy",3),new Je("Fog",4),new Je("Drizzle",5),new Je("ScatteredShowers",6),new Je("Showers",7),new Je("Rain",8),new Je("Hail",9),new Je("ScatteredSnow",10),new Je("Snow",11),new Je("Storm",12),new Je("SevereStorm",13),new Je("Thunder",14),new Je("Windy",15),new Je("Hazy",16),new Je("Tornado",17),new Je("Hurricane",18),new Je("Dusty",19)]),Ze=Je.enumsValue(Xe),$e=function(){function e(t){h(this,e),this.mappings={},this.mappingNames=[],t&&this.putAll(t)}return d(e,[{key:"add",value:function(e,t){return H(this,e,t)}},{key:"put",value:function(e,t){return H(this,e,t,!0)}},{key:"putAll",value:function(e){for(var t in e)e.hasOwnProperty(t)&&H(this,t,e[t],!0);return this}},{key:"value",value:function(e){var t=e.toLowerCase(),n=this.mappings[t];return n?n.val:void 0}},{key:"firstValue",value:function(e){var t=this.value(e);return t&&t.length>0?t[0]:void 0}},{key:"clear",value:function(){return this.mappingNames.length=0,this.mappings={},this}},{key:"remove",value:function(e){var t=e.toLowerCase(),n=this.mappingNames.indexOf(t),r=this.mappings[t];return r&&(delete this.mappings[t],this.mappingNames.splice(n,1)),r?r.val:void 0}},{key:"size",value:function(){return this.mappingNames.length}},{key:"isEmpty",value:function(){return this.size()<1}},{key:"containsKey",value:function(e){return void 0!==this.value(e)}},{key:"keySet",value:function(){for(var e=[],t=this.size(),n=0;n<t;n+=1)e.push(this.mappings[this.mappingNames[n]].key);return e}}]),e}(),et=function(){function e(t){h(this,e),this.map={},void 0!==t&&this.values(t)}return d(e,[{key:"enabled",value:function(e){return void 0!==e&&!!this.map[e]}},{key:"toggle",value:function(e,t){var n=t;return void 0===e?this:(void 0===n&&(n=void 0===this.map[e]),this.value(e,!0===n||null))}},{key:"value",value:function(e,t){return 1===arguments.length?this.map[e]:(null===t?(delete this.map[e],this.hasOwnProperty(e)&&delete this[e]):(this.map[e]=t,this.hasOwnProperty(e)||R(this,e)),this)}},{key:"values",value:function(e){if(e){for(var t in e)e.hasOwnProperty(t)&&this.value(t,e[t]);return this}return Object.assign({},this.map)}}]),e}(),tt=function(e){function t(e){return h(this,t),g(this,p(t).call(this,L(e)))}return y(t,et),d(t,[{key:"useTls",value:function(){return"https"===this.value("protocol")}}]),t}(),nt=Object.freeze({GET:"GET",HEAD:"HEAD",POST:"POST",PUT:"PUT",PATCH:"PATCH",DELETE:"DELETE",OPTIONS:"OPTIONS",TRACE:"TRACE"}),rt=Object.freeze({APPLICATION_JSON:"application/json",APPLICATION_JSON_UTF8:"application/json; charset=UTF-8",FORM_URLENCODED:"application/x-www-form-urlencoded",FORM_URLENCODED_UTF8:"application/x-www-form-urlencoded; charset=UTF-8"}),it=function(e){function t(){return h(this,t),g(this,p(t).call(this))}return y(t,$e),t}();Object.defineProperties(it,{ACCEPT:{value:"Accept"},AUTHORIZATION:{value:"Authorization"},CONTENT_MD5:{value:"Content-MD5"},CONTENT_TYPE:{value:"Content-Type"},DATE:{value:"Date"},DIGEST:{value:"Digest"},HOST:{value:"Host"},X_SN_DATE:{value:"X-SN-Date"}});var at={urlQueryParse:z,urlQueryEncode:function(e,t){function n(e,t){u.length&&(u+="&"),u+=s(e)+"="+s(t)}var r,i,a,o,u="",s=t||encodeURIComponent;if(e)for(r in e)if(e.hasOwnProperty(r))if(i=e[r],Array.isArray(i))for(a=0,o=i.length;a<o;a++)n(r,i[a]);else n(r,i);return u}},ot=function(){function e(t,n){h(this,e),this.tokenId=t,this.environment=n||new tt,this.forceHostPort=!1,this.reset()}return d(e,[{key:"reset",value:function(){this.contentDigest=null,this.httpHeaders=new it,this.parameters=new $e,this.signedHeaderNames=[];var e=this.environment.host;return this.method(nt.GET).host(e).path("/").date(new Date)}},{key:"saveSigningKey",value:function(e){return this.signingKey=this.computeSigningKey(e),this.signingKeyExpiration=new Date(this.requestDate.getTime()+6048e5),this}},{key:"method",value:function(e){return this.httpMethod=e,this}},{key:"host",value:function(e){return this.forceHostPort&&e.indexOf(":")<0&&80!=this.environment.port&&(e+=":"+this.environment.port),this.httpHeaders.put(it.HOST,e),this}},{key:"path",value:function(e){return this.requestPath=e,this}},{key:"url",value:function(e){var t=l.parse(e),n=t.host;return!t.port||("https"!==t.scheme&&"wss"!==t.scheme||443===t.port)&&("http"!==t.scheme&&"ws"!==t.scheme||80===t.port)||(n+=":"+t.port),t.query&&this.queryParams(z(t.query)),this.host(n).path(t.path)}},{key:"contentType",value:function(e){return this.httpHeaders.put(it.CONTENT_TYPE,e),this}},{key:"date",value:function(e){return this.requestDate=e||new Date,this}},{key:"snDate",value:function(e){return this.useSnDate=e,this}},{key:"header",value:function(e,t){return this.httpHeaders.put(e,t),this}},{key:"headers",value:function(e){return this.httpHeaders=e,this}},{key:"queryParams",value:function(e){return e instanceof $e?this.parameters=e:this.parameters.putAll(e),this}},{key:"signedHttpHeaders",value:function(e){return this.signedHeaderNames=e,this}},{key:"contentSHA256",value:function(e){var t;return t="string"==typeof e?o.parse(e):e,this.contentDigest=t,this}},{key:"computeContentDigest",value:function(e){var t=s(e);return this.contentSHA256(t),this.header("Digest","sha-256="+a.stringify(t)),this}},{key:"canonicalQueryParameters",value:function(){var e=this.parameters.keySet();if(e.length<1)return"";e.sort();for(var t=e.length,n=!0,r="",i=0;i<t;i+=1)for(var a=e[i],o=this.parameters.value(a),u=o.length,s=0;s<u;s+=1)n?n=!1:r+="&",r+=W(a)+"="+W(o[s]);return r}},{key:"canonicalHeaders",value:function(e){for(var t,n,r="",i=e.length,a=0;a<i;a+=1)r+=(t=e[a])+":"+((n="date"===t||"x-sn-date"===t?this.requestDate.toUTCString():this.httpHeaders.firstValue(t))?n.trim():"")+"\n";return r}},{key:"canonicalSignedHeaderNames",value:function(e){return e.join(";")}},{key:"canonicalContentSHA256",value:function(){return this.contentDigest?o.stringify(this.contentDigest):e.EMPTY_STRING_SHA256_HEX}},{key:"canonicalHeaderNames",value:function(){var e=this.httpHeaders,t=this.signedHeaderNames,n=new $e;return n.put(it.HOST,!0),this.useSnDate?n.put(it.X_SN_DATE,!0):n.put(it.DATE,!0),e.containsKey(it.CONTENT_MD5)&&n.put(it.CONTENT_MD5,!0),e.containsKey(it.CONTENT_TYPE)&&n.put(it.CONTENT_TYPE,!0),e.containsKey(it.DIGEST)&&n.put(it.DIGEST,!0),t&&t.length>0&&t.forEach(function(e){return n.put(e,!0)}),q(n.keySet())}},{key:"buildCanonicalRequestData",value:function(){return this.computeCanonicalRequestData(this.canonicalHeaderNames())}},{key:"computeCanonicalRequestData",value:function(e){var t=this.httpMethod+"\n";return t+=this.requestPath+"\n",t+=this.canonicalQueryParameters()+"\n",t+=this.canonicalHeaders(e),t+=this.canonicalSignedHeaderNames(e)+"\n",t+=this.canonicalContentSHA256()}},{key:"computeSigningKey",value:function(e){var t=S(this.requestDate);return u("snws2_request",u(t,"SNWS2"+e))}},{key:"computeSignatureData",value:function(e){return"SNWS2-HMAC-SHA256\n"+S(this.requestDate,!0)+"\n"+o.stringify(s(e))}},{key:"buildWithKey",value:function(e){var t=this.canonicalHeaderNames(),n=this.computeCanonicalRequestData(t),r=this.computeSignatureData(n),i=o.stringify(u(r,e));return"SNWS2 Credential="+this.tokenId+",SignedHeaders="+t.join(";")+",Signature="+i}},{key:"build",value:function(e){var t=this.computeSigningKey(e);return this.buildWithKey(t)}},{key:"buildWithSavedKey",value:function(){return this.buildWithKey(this.signingKey)}},{key:"signingKeyValid",get:function(){return!!(this.signingKey&&this.signingKeyExpiration instanceof Date&&Date.now()<this.signingKeyExpiration.getTime())}},{key:"requestDateHeaderValue",get:function(){return this.requestDate.toUTCString()}},{key:"useSnDate",get:function(){var e=this.signedHeaderNames;return(Array.isArray(e)?e.findIndex(F(it.X_SN_DATE)):-1)>=0||this.httpHeaders.containsKey(it.X_SN_DATE)},set:function(e){var t=this.signedHeaderNames,n=Array.isArray(t)?t.findIndex(F(it.X_SN_DATE)):-1;e&&n<0?(t=t?t.concat(it.X_SN_DATE):[it.X_SN_DATE],this.signedHeaderNames=t):!e&&n>=0&&(t.splice(n,1),this.signedHeaderNames=t),this.httpHeaders.remove(it.X_SN_DATE)}}]),e}();Object.defineProperties(ot,{EMPTY_STRING_SHA256_HEX:{value:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},SNWS2_AUTH_SCHEME:{value:"SNWS2"}});var ut=function(){function e(t){h(this,e);var n=t instanceof tt?t:new tt(t);this.environment=n,this._parameters=new et}return d(e,[{key:"env",value:function(){var e;return(e=this.environment).value.apply(e,arguments)}},{key:"parameter",value:function(){var e;return(e=this._parameters).value.apply(e,arguments)}},{key:"hostUrl",value:function(){var e=this.environment.useTls(),t=+this.environment.value("port"),n="http"+(e?"s":"")+"://"+this.environment.value("host");return(e&&t>0&&443!==t||!e&&t>0&&80!==t)&&(n+=":"+t),n}},{key:"hostWebSocketUrl",value:function(){var e=this.environment.useTls(),t=+this.environment.value("port"),n="ws"+(e?"s":"")+"://"+this.environment.value("host");return(e&&t>0&&443!==t||!e&&t>0&&80!==t)&&(n+=":"+t),n}},{key:"baseUrl",value:function(){return this.hostUrl()}},{key:"resolveTemplatePath",value:function(e){return this.hostUrl()+this.resolveTemplateUrl(e)}},{key:"resolveTemplateUrl",value:function(t){return e.resolveTemplateUrl(t,this._parameters)}},{key:"parameters",get:function(){return this._parameters}}],[{key:"resolveTemplateUrl",value:function(e,t){return e.replace(/\{([^}]+)\}/g,function(e,n){var r=t[n];return void 0!==r?encodeURIComponent(r):""})}}]),e}(),st=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"findLocationsUrl",value:function(e,t,n){return this.baseUrl()+"/location?"+e.toUriEncodingWithSorting(t,n)}},{key:"locationId",get:function(){var e=this.locationIds;return Array.isArray(e)&&e.length>0?e[0]:null},set:function(e){this.parameter("locationIds",e?[e]:null)}},{key:"locationIds",get:function(){return this.parameter("locationIds")},set:function(e){this.parameter("locationIds",e)}},{key:"sourceId",get:function(){var e=this.sourceIds;return Array.isArray(e)&&e.length>0?e[0]:null},set:function(e){this.parameter("sourceIds",e?[e]:e)}},{key:"sourceIds",get:function(){return this.parameter("sourceIds")},set:function(e){this.parameter("sourceIds",e)}}]),n}()},lt=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"baseUrl",value:function(){var e=this.env("solarQueryPath")||"/solarquery",t=this.publicQuery;return this.hostUrl()+e+"/api/v1"+(t?"/pub":"/sec")}},{key:"publicQuery",get:function(){return!!this.env("publicQuery")},set:function(e){this.env("publicQuery",!!e)}}]),n}()},ct=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"baseLocationDatumMetadataUrl",value:function(e){return this.baseUrl()+"/location/meta/"+(e||this.locationId)}},{key:"locationDatumMetadataUrlWithSource",value:function(e,t){var n=this.baseLocationDatumMetadataUrl(e),r=t||this.sourceId;return null!==t&&r&&(n+="?sourceId="+encodeURIComponent(r)),n}},{key:"viewLocationDatumMetadataUrl",value:function(e,t){return this.locationDatumMetadataUrlWithSource(e,t)}},{key:"addLocationDatumMetadataUrl",value:function(e,t){return this.locationDatumMetadataUrlWithSource(e,t)}},{key:"replaceLocationDatumMetadataUrl",value:function(e,t){return this.locationDatumMetadataUrlWithSource(e,t)}},{key:"deleteLocationDatumMetadataUrl",value:function(e,t){return this.locationDatumMetadataUrlWithSource(e,t)}},{key:"findLocationDatumMetadataUrl",value:function(e,t,n){var r=this.baseUrl()+"/location/meta",i=e.toUriEncodingWithSorting(t,n);return i.length>0&&(r+="?"+i),r}}]),n}()},ht=function(e){function t(){return h(this,t),g(this,p(t).apply(this,arguments))}return y(t,ct(lt(st(ut)))),t}(),ft=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"reportableIntervalUrl",value:function(e,t){var n=this.baseUrl()+"/location/datum/interval?locationId="+(e||this.locationId),r=t||this.sourceId;return null!==t&&r&&(n+="&sourceId="+encodeURIComponent(r)),n}},{key:"availableSourcesUrl",value:function(e,t,n){var r=this.baseUrl()+"/location/datum/sources?locationId="+(e||this.locationId);return t instanceof Date&&(r+="&start="+encodeURIComponent(ee(t))),n instanceof Date&&(r+="&end="+encodeURIComponent(ee(n))),r}},{key:"listDatumUrl",value:function(e,t,n){var r=this.baseUrl()+"/location/datum/list",i=e?e.toUriEncodingWithSorting(t,n):"";return i.length>0&&(r+="?"+i),r}},{key:"mostRecentDatumUrl",value:function(e,t,n){var r=this.baseUrl()+"/location/datum/mostRecent",i=e?e.toUriEncodingWithSorting(t,n):"";return i.length>0&&(r+="?"+i),r}}]),n}()},dt=function(e){function t(){return h(this,t),g(this,p(t).apply(this,arguments))}return y(t,ft(lt(st(ut)))),t}(),yt=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"listAllNodeIdsUrl",value:function(){return this.baseUrl()+"/nodes"}},{key:"nodeId",get:function(){var e=this.nodeIds;return Array.isArray(e)&&e.length>0?e[0]:null},set:function(e){this.parameter("nodeIds",e?[e]:null)}},{key:"nodeIds",get:function(){return this.parameter("nodeIds")},set:function(e){this.parameter("nodeIds",e)}},{key:"sourceId",get:function(){var e=this.sourceIds;return Array.isArray(e)&&e.length>0?e[0]:null},set:function(e){this.parameter("sourceIds",e?[e]:e)}},{key:"sourceIds",get:function(){return this.parameter("sourceIds")},set:function(e){this.parameter("sourceIds",e)}}]),n}()},pt=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"baseNodeDatumMetadataUrl",value:function(e){return this.baseUrl()+"/datum/meta/"+(e||this.nodeId)}},{key:"nodeDatumMetadataUrlWithSource",value:function(e,t){var n=this.baseNodeDatumMetadataUrl(e),r=t||this.sourceId;return null!==t&&r&&(n+="?sourceId="+encodeURIComponent(r)),n}},{key:"viewNodeDatumMetadataUrl",value:function(e,t){return this.nodeDatumMetadataUrlWithSource(e,t)}},{key:"addNodeDatumMetadataUrl",value:function(e,t){return this.nodeDatumMetadataUrlWithSource(e,t)}},{key:"replaceNodeDatumMetadataUrl",value:function(e,t){return this.nodeDatumMetadataUrlWithSource(e,t)}},{key:"deleteNodeDatumMetadataUrl",value:function(e,t){return this.nodeDatumMetadataUrlWithSource(e,t)}},{key:"findNodeDatumMetadataUrl",value:function(e,t,n,r){var i=this.baseNodeDatumMetadataUrl(e),a="",o=t||this.sourceId;return null!==t&&o&&(a+="sourceId="+encodeURIComponent(o)),Array.isArray(n)&&n.forEach(function(e,t){e instanceof ke&&(a.length>0&&(a+="&"),a+=e.toUriEncoding(t))}),r instanceof ge&&(a.length>0&&(a+="&"),a+=r.toUriEncoding()),a.length>0&&(i+="?"+a),i}},{key:"userMetadataUrl",value:function(e){var t=this.baseUrl()+"/users/meta",n=e||this.userId;return Array.isArray(n)&&(n=n.length>0?n[0]:null),n&&null!==e&&(t+="/"+n),t}},{key:"viewUserMetadataUrl",value:function(e){return this.userMetadataUrl(e)}}]),n}()},vt=function(e){function t(){return h(this,t),g(this,p(t).apply(this,arguments))}return y(t,pt(lt(yt(ut)))),t}(),mt=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"reportableIntervalUrl",value:function(e,t){var n=this.baseUrl()+"/range/interval?nodeId="+(e||this.nodeId),r=t||this.sourceIds;return Array.isArray(r)&&r.length>0&&(n+="&sourceIds="+r.map(function(e){return encodeURIComponent(e)}).join(",")),n}},{key:"availableSourcesUrl",value:function(e,t){var n=e?new Oe(e):this.datumFilter();void 0!==t&&n.prop("withNodeIds",!!t);var r=this.baseUrl()+"/range/sources",i=n.toUriEncoding();return i.length>0&&(r+="?"+i),r}},{key:"listDatumUrl",value:function(e,t,n){var r=this.baseUrl()+"/datum/list",i=(e||this.datumFilter()).toUriEncodingWithSorting(t,n);return i.length>0&&(r+="?"+i),r}},{key:"datumReadingUrl",value:function(e,t,n,r,i){var a=this.baseUrl()+"/datum/reading",o=new Oe(e)||this.datumFilter();o.prop("readingType",t.name),n&&o.prop("tolerance",n);var u=o.toUriEncodingWithSorting(r,i);return u.length>0&&(a+="?"+u),a}},{key:"datumFilter",value:function(){var e,t=new Oe;return(e=this.nodeIds)&&(t.nodeIds=e),(e=this.sourceIds)&&(t.sourceIds=e),t}},{key:"mostRecentDatumUrl",value:function(e,t,n){var r=this.baseUrl()+"/datum/mostRecent",i=(e||this.datumFilter()).toUriEncodingWithSorting(t,n);return i.length>0&&(r+="?"+i),r}}]),n}()},gt=function(e){function t(){return h(this,t),g(this,p(t).apply(this,arguments))}return y(t,mt(lt(yt(ut)))),t}(),kt=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"baseUrl",value:function(){var e=this.env("solarUserPath")||"/solaruser";return U(p(n.prototype),"baseUrl",this).call(this)+e+"/api/v1/sec"}},{key:"whoamiUrl",value:function(){return this.baseUrl()+"/whoami"}},{key:"viewNodesUrl",value:function(){return this.baseUrl()+"/nodes"}},{key:"viewPendingNodesUrl",value:function(){return this.baseUrl()+"/nodes/pending"}},{key:"viewArchivedNodesUrl",value:function(){return this.baseUrl()+"/nodes/archived"}},{key:"updateNodeArchivedStatusUrl",value:function(e,t){var n=Array.isArray(e)?e:e?[e]:this.nodeIds;return this.baseUrl()+"/nodes/archived?nodeIds="+n.join(",")+"&archived="+(t?"true":"false")}},{key:"nimAuthorizeUrl",value:function(){return this.baseUrl()+"/user/nim/authorize"}},{key:"userId",get:function(){var e=this.parameter("userIds");return Array.isArray(e)&&e.length>0?e[0]:null},set:function(e){this.parameter("userIds",[e])}},{key:"userIds",get:function(){return this.parameter("userIds")},set:function(e){this.parameter("userIds",e)}}]),n}()},Ut=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"viewInstructionUrl",value:function(e){return this.baseUrl()+"/instr/view?id="+encodeURIComponent(e)}},{key:"viewActiveInstructionsUrl",value:function(e){return this.baseUrl()+"/instr/viewActive?nodeId="+(e||this.nodeId)}},{key:"viewPendingInstructionsUrl",value:function(e){return this.baseUrl()+"/instr/viewPending?nodeId="+(e||this.nodeId)}},{key:"updateInstructionStateUrl",value:function(e,t){return this.baseUrl()+"/instr/updateState?id="+encodeURIComponent(e)+"&state="+encodeURIComponent(t.name)}},{key:"urlEncodeInstructionParameters",value:function(e){var t,n,r="";if(Array.isArray(e))for(t=0,n=e.length;t<n;t+=1)r.length>0&&(r+="&"),r+=encodeURIComponent("parameters["+t+"].name")+"="+encodeURIComponent(e[t].name)+"&"+encodeURIComponent("parameters["+t+"].value")+"="+encodeURIComponent(e[t].value);return r}},{key:"queueInstructionUrl",value:function(e,t,n){var r=this.baseUrl()+"/instr/add/"+encodeURIComponent(e)+"?nodeId="+(n||this.nodeId);return Array.isArray(t)&&t.length>0&&(r+="&"+this.urlEncodeInstructionParameters(t)),r}},{key:"queueInstructionsUrl",value:function(e,t,n){var r=this.baseUrl()+"/instr/add/"+encodeURIComponent(e)+"?nodeIds="+(Array.isArray(n)&&n.length>0?n.join(","):Array.isArray(this.nodeIds)?this.nodeIds.join(","):"");return Array.isArray(t)&&t.length>0&&(r+="&"+this.urlEncodeInstructionParameters(t)),r}}],[{key:"instructionParameter",value:function(e,t){return{name:e,value:t}}}]),n}()},wt=function(e){function t(){return h(this,t),g(this,p(t).apply(this,arguments))}return y(t,Ut(kt(yt(ut)))),t}(),It=wt.instructionParameter,bt=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"viewNodeMetadataUrl",value:function(e){return this.baseUrl()+"/nodes/meta/"+(e||this.nodeId)}},{key:"addNodeMetadataUrl",value:function(e){return this.viewNodeMetadataUrl(e)}},{key:"replaceNodeMetadataUrl",value:function(e){return this.viewNodeMetadataUrl(e)}},{key:"deleteNodeMetadataUrl",value:function(e){return this.viewNodeMetadataUrl(e)}},{key:"findNodeMetadataUrl",value:function(e,t,n){var r=Array.isArray(e)?e:e?[e]:null!==e?this.nodeIds:void 0,i=this.baseUrl()+"/nodes/meta",a="";return Array.isArray(r)&&(a+="nodeIds="+r.join(",")),Array.isArray(t)&&t.forEach(function(e,t){e instanceof ke&&(a.length>0&&(a+="&"),a+=e.toUriEncoding(t))}),n instanceof ge&&(a.length>0&&(a+="&"),a+=n.toUriEncoding()),a.length>0&&(i+="?"+a),i}}]),n}()},At=function(e){function t(){return h(this,t),g(this,p(t).apply(this,arguments))}return y(t,bt(kt(yt(ut)))),t}(),St=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"listAllAuthTokensUrl",value:function(){return this.baseUrl()+"/user/auth-tokens"}},{key:"generateAuthTokenUrl",value:function(e){return this.baseUrl()+"/user/auth-tokens/generate/"+e.name}},{key:"authTokenUrl",value:function(e){return this.baseUrl()+"/user/auth-tokens/"+encodeURIComponent(e)}},{key:"deleteAuthTokenUrl",value:function(e){return this.authTokenUrl(e)}},{key:"updateAuthTokenSecurityPolicyUrl",value:function(e){return this.authTokenUrl(e)}},{key:"replaceAuthTokenSecurityPolicyUrl",value:function(e){return this.authTokenUrl(e)}},{key:"updateAuthTokenStatusUrl",value:function(e,t){return this.authTokenUrl(e)+"?status="+encodeURIComponent(t.name)}}]),n}()},Dt=function(e){function t(){return h(this,t),g(this,p(t).apply(this,arguments))}return y(t,St(kt(ut))),t}(),Mt=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"userDatumAuxiliaryBaseUrl",value:function(){return this.baseUrl()+"/datum/auxiliary"}},{key:"listUserDatumAuxiliaryUrl",value:function(e){var t=this.userDatumAuxiliaryBaseUrl();if(e){var n=e.toUriEncoding();n.length>0&&(t+="?"+n)}return t}},{key:"userDatumAuxiliaryIdUrl",value:function(e,t,n,r){if(r&&r.indexOf("/")>=0)return this.userDatumAuxiliaryIdQueryUrl(e,t,n,r);var i=this.userDatumAuxiliaryBaseUrl();return i+="/"+encodeURIComponent(e.name?e.name:e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(Z(n))+"/"+encodeURIComponent(r)}},{key:"userDatumAuxiliaryIdQueryUrl",value:function(e,t,n,r){var i=this.userDatumAuxiliaryBaseUrl(),a=new Ue({type:e,nodeId:t,date:Z(n),sourceId:r}).toUriEncoding();return a.length>0&&(i+="?"+a),i}},{key:"storeUserDatumAuxiliaryUrl",value:function(e,t,n,r){return this.userDatumAuxiliaryIdUrl(e,t,n,r)}},{key:"viewUserDatumAuxiliaryUrl",value:function(e,t,n,r){return this.userDatumAuxiliaryIdUrl(e,t,n,r)}},{key:"deleteUserDatumAuxiliaryUrl",value:function(e,t,n,r){return this.userDatumAuxiliaryIdUrl(e,t,n,r)}}]),n}()},Pt=function(e){function t(){return h(this,t),g(this,p(t).apply(this,arguments))}return y(t,Mt(kt(ut))),t}(),Tt=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"findUserMetadataUrl",value:function(e){var t=this.baseUrl()+"/users/meta";if(e){var n=e.toUriEncoding();n.length>0&&(t+="?"+n)}return t}},{key:"userMetadataUrl",value:function(e){var t=this.baseUrl()+"/users/meta",n=e||this.userId;return Array.isArray(n)&&(n=n.length>0?n[0]:null),n&&null!==e&&(t+="/"+n),t}},{key:"viewUserMetadataUrl",value:function(e){return this.userMetadataUrl(e)}},{key:"addUserMetadataUrl",value:function(e){return this.userMetadataUrl(e)}},{key:"replaceUserMetadataUrl",value:function(e){return this.userMetadataUrl(e)}},{key:"deleteUserMetadataUrl",value:function(e){return this.userMetadataUrl(e)}}]),n}()},Nt=function(e){function t(){return h(this,t),g(this,p(t).apply(this,arguments))}return y(t,Tt(kt(ut))),t}(),Ot=2,Ct=Object.freeze({DEBUG:4,INFO:3,WARN:2,ERROR:1,OFF:0}),Et=function(){function e(){h(this,e)}return d(e,null,[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];B.apply(void 0,[4].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];B.apply(void 0,[3].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];B.apply(void 0,[2].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];B.apply(void 0,[1].concat(t))}}]),e}();Object.defineProperties(Et,{level:{get:function(){return Ot},set:function(e){Ot="number"==typeof e?e:0}}}),Object.defineProperty(e,"dateParse",{enumerable:!0,get:function(){return i.isoParse}}),Object.defineProperty(e,"dateTimeUrlParse",{enumerable:!0,get:function(){return i.isoParse}}),e.Aggregation=G,e.Aggregations=X,e.AuthTokenStatus=oe,e.AuthTokenStatuses=se,e.AuthTokenType=le,e.AuthTokenTypes=he,e.AuthTokenUrlHelperMixin=function(e){return function(t){function n(){return h(this,n),g(this,p(n).apply(this,arguments))}return y(n,e),d(n,[{key:"refreshTokenV2Url",value:function(e){return this.baseUrl()+"/auth-tokens/refresh/v2?date="+encodeURIComponent(te(e||new Date))}}]),n}()},e.AuthorizationV2Builder=ot,e.BitmaskEnum=_e,e.CombiningType=fe,e.CombiningTypes=ye,e.ComparableEnum=Y,e.Configuration=et,e.DatumAuxiliaryType=pe,e.DatumAuxiliaryTypes=me,e.DatumFilter=Oe,e.DatumReadingType=Ce,e.DatumReadingTypes=He,e.DeviceOperatingState=je,e.DeviceOperatingStates=xe,e.Enum=Q,e.Environment=tt,e.GeneralMetadata=Le,e.HttpContentType=rt,e.HttpHeaders=it,e.HttpMethod=nt,e.InstructionState=ze,e.InstructionStates=qe,e.Location=we,e.LocationDatumMetadataUrlHelper=ht,e.LocationDatumMetadataUrlHelperMixin=ct,e.LocationDatumUrlHelper=dt,e.LocationDatumUrlHelperMixin=ft,e.LocationPrecision=Ve,e.LocationPrecisions=Be,e.LocationUrlHelperMixin=st,e.Logger=Et,e.MultiMap=$e,e.NodeDatumMetadataUrlHelper=vt,e.NodeDatumMetadataUrlHelperMixin=pt,e.NodeDatumUrlHelper=gt,e.NodeDatumUrlHelperMixin=mt,e.NodeInstructionUrlHelper=wt,e.NodeInstructionUrlHelperMixin=Ut,e.NodeMetadataUrlHelper=At,e.NodeMetadataUrlHelperMixin=bt,e.NodeUrlHelperMixin=yt,e.Pagination=ge,e.PropMap=Ue,e.QueryUrlHelperMixin=lt,e.SecurityPolicy=Ke,e.SecurityPolicyBuilder=Ge,e.SkyCondition=Je,e.SkyConditions=Ze,e.SolarQueryApiPathV1="/api/v1",e.SolarQueryDefaultPath="/solarquery",e.SolarQueryPathKey="solarQueryPath",e.SolarQueryPublicPathKey="publicQuery",e.SolarUserApiPathV1="/api/v1/sec",e.SolarUserDefaultPath="/solaruser",e.SolarUserPathKey="solarUserPath",e.SortDescriptor=ke,e.UrlHelper=ut,e.UserAuthTokenUrlHelper=Dt,e.UserAuthTokenUrlHelperMixin=St,e.UserDatumAuxiliaryUrlHelper=Pt,e.UserDatumAuxiliaryUrlHelperMixin=Mt,e.UserMetadataUrlHelper=Nt,e.UserMetadataUrlHelperMixin=Tt,e.UserUrlHelperMixin=kt,e.arrayData=K,e.dateFormat=te,e.dateParser=function(e){return i.isoParse(e)||ne(e)||re(e)},e.dateTimeFormat=$,e.dateTimeParse=re,e.dateTimeUrlFormat=ee,e.dateUtils=ie,e.displayScaleForValue=function(e){var t=1,n=Math.abs(Number(e));return!1===isNaN(n)&&(n>=1e9?t=1e9:n>=1e6?t=1e6:n>=1e3&&(t=1e3)),t},e.displayUnitsForScale=function(e,t){return(1e9===t?"G":1e6===t?"M":1e3===t?"k":"")+e},e.instructionParameter=It,e.iso8601Date=S,e.logLevels=Ct,e.nestData=ae,e.objectToStringMap=O,e.seasonForDate=function(e){var t=e.getUTCMonth?e.getUTCMonth():Number(e);return t<2||11===t?3:t<5?0:t<8?1:2},e.stringMapToObject=N,e.timestampFormat=Z,e.timestampParse=ne,e.urlQuery=at,Object.defineProperty(e,"__esModule",{value:!0})});